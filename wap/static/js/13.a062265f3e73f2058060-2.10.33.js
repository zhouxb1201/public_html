webpackJsonp([13],{"+xt5":function(t,e){},"3YEm":function(t,e){},"7ntd":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("eKM9"),o=a("J68u"),i=a("oFuF"),s=Object(n.a)({name:"account-avatar",data:function(){return{}},computed:{imgHeight:function(){return document.body.offsetWidth-30+"px"},avatar:{get:function(){return this.$store.state.account.info.avatar?this.$store.state.account.info.avatar:""},set:function(t){console.log(t)}}},mounted:function(){var t=this;Object(i.s)(this.$store.state.account.info)?this.$store.dispatch("getAccountInfo").then(function(){t.$refs.load.success()}).catch(function(){t.$refs.load.fail()}):this.$refs.load.success()},methods:{onUploadFinish:function(t){var e=t.src;this.$store.commit("setAvatar",e)}},components:{UploadImages:o.a}}),c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("Layout",{ref:"load",staticClass:"account-avatar bg-f8"},[e("Navbar",{attrs:{isMenu:!1}}),this._v(" "),e("div",[e("div",{staticClass:"box"},[e("div",{staticClass:"img",style:"maxHeight:"+this.imgHeight},[e("img",{attrs:{src:this.avatar,onerror:this.$ERRORPIC.noAvatar}})]),this._v(" "),e("div",{staticClass:"fixed-foot-btn-group"},[e("UploadImages",{staticClass:"btn-upload",attrs:{type:"avatar"},on:{finish:this.onUploadFinish}},[e("van-button",{attrs:{size:"normal",type:"danger",round:"",block:""}},[this._v("上传头像")])],1)],1)])])],1)},staticRenderFns:[]};var r=a("VU/8")(s,c,!1,function(t){a("qdLo")},"data-v-1339373f",null);e.default=r.exports},"8nkx":function(t,e){},"9P81":function(t,e){},JGtV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("eKM9"),o=a("oFuF"),i=Object(n.a)({name:"account-set",data:function(){return{}},computed:{avatar:{get:function(){return this.$store.state.account.info.avatar?this.$store.state.account.info.avatar:""},set:function(){}}},activated:function(){var t=this;Object(o.s)(this.$store.state.account.info)?this.$store.dispatch("getAccountInfo").then(function(){t.$refs.load.success()}).catch(function(){t.$refs.load.fail()}):this.$refs.load.success()},methods:{onLogout:function(){var t=this;t.$store.dispatch("logout").then(function(){setTimeout(function(){window.location.href=t.$store.state.domain+"/wap/"},500)})}}}),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{ref:"load",staticClass:"account-set bg-f8"},[a("Navbar"),t._v(" "),a("van-cell-group",{staticClass:"mb-10"},[a("van-cell",{staticClass:"avatar-cell",attrs:{title:"头像","is-link":"",to:"/account/avatar"}},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.avatar,onerror:t.$ERRORPIC.noAvatar}})])]),t._v(" "),a("van-cell",{attrs:{title:"基本信息","is-link":"",to:"/account/info"}})],1),t._v(" "),t.$store.getters.isBingFlag&&t.$store.getters.isBindMobile?a("van-cell-group",{staticClass:"mb-10"},[a("van-cell",{attrs:{title:"修改登录密码","is-link":"",to:{name:"account-post",params:{pagetype:1}}}}),t._v(" "),a("van-cell",{attrs:{title:"设置支付密码","is-link":"",to:{name:"account-post",params:{pagetype:2}}}}),t._v(" "),a("van-cell",{attrs:{title:"修改关联手机","is-link":"",to:{name:"account-post",params:{pagetype:3}}}}),t._v(" "),a("van-cell",{attrs:{title:"绑定电子邮箱","is-link":"",to:{name:"account-post",params:{pagetype:4}}}})],1):t._e(),t._v(" "),a("van-cell-group",{staticClass:"mb-10"},[a("van-cell",{attrs:{title:"收货地址管理","is-link":"",to:"/address/list"}})],1),t._v(" "),a("van-cell-group",{staticClass:"mb-10"},[a("van-cell",{attrs:{title:"关联账号","is-link":"",to:"/account/relevant"}})],1),t._v(" "),t.$store.state.isWeixin&&t.$store.getters.config.is_wchat?t._e():a("div",{staticClass:"foot-btn-group"},[a("van-button",{attrs:{size:"normal",round:"",type:"danger",block:""},on:{click:t.onLogout}},[t._v("注销")])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(i,s,!1,function(t){a("3YEm")},"data-v-5152afe8",null);e.default=c.exports},"N+mU":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("eKM9"),o=a("ocgh"),i=a("VKKs"),s=Object(n.a)({name:"account-relevant",data:function(){return{qq:null,wechat:null}},activated:function(){var t=this;Object(o.c)().then(function(e){var a=e.data;t.qq=a.qq,t.wechat=a.wechat,t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})},methods:{onOtherLogin:function(t){var e=this;return"WCHAT"===t&&e.wechat?(e.$Toast("您已关联微信！"),!1):"QQLOGIN"===t&&e.qq?(e.$Toast("您已关联QQ！"),!1):"WCHAT"!==t||e.$store.getters.config.is_wchat?(Object(i.i)("toPath",e.$route.fullPath),void e.$store.dispatch("otherLogin",{action:"relevant",form:{type:t}}).then(function(){e.$Toast.success("关联成功"),Object(i.f)("toPath")})):(e.$Toast("请配置微信公众号！"),!1)}}}),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{ref:"load",staticClass:"account-relevant bg-f8"},[a("Navbar",{attrs:{isMenu:!1}}),t._v(" "),a("van-cell-group",[t.$store.getters.config.wechat_login&&t.$store.state.isWeixin?a("van-cell",{staticClass:"wx-cell",class:t.wechat?"on":"",attrs:{icon:"v-icon-wechat",title:"微信",value:t.wechat?"已关联":"关联","is-link":""},on:{click:function(e){t.onOtherLogin("WCHAT")}}}):t._e(),t._v(" "),t.$store.getters.config.qq_login?a("van-cell",{staticClass:"qq-cell",class:t.qq?"on":"",attrs:{icon:"v-icon-qq2",title:"QQ",value:t.qq?"已关联":"关联","is-link":""},on:{click:function(e){t.onOtherLogin("QQLOGIN")}}}):t._e()],1),t._v(" "),t.$store.getters.config.wechat_login||t.$store.getters.config.qq_login?a("div",{staticClass:"tip"},[t._v("账号关联之后，用户可使用微信QQ账号快速登录商城。")]):t._e()],1)},staticRenderFns:[]};var r=a("VU/8")(s,c,!1,function(t){a("yAr/")},"data-v-06740f66",null);e.default=r.exports},VNS1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("eKM9"),o=a("D1I1"),i=(a("IcnI"),a("w3CS")),s={data:function(){return{isDisabled:!1,codeTime:0,codeTxt:"获取验证码"}},props:{value:[String,Number],email:[String,Number]},computed:{code:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{onSend:function(){var t=this,e=t.email;if(!Object(i.c)(e))return!1;var a={};a.email=e,a.type="bind_email",t.$store.dispatch("getEmailcode",a).then(function(e){t.startTimer()})},startTimer:function(){this.codeTime=60,this.isDisabled=!0,this.codeTimer()},codeTimer:function(){this.codeTime>0?(this.codeTime--,this.codeTxt=this.codeTime+"s后获取",setTimeout(this.codeTimer,1e3)):this.endTimer()},endTimer:function(){this.codeTime=0,this.isDisabled=!1,this.codeTxt="获取验证码"}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-field",{attrs:{label:"邮箱验证码",type:"number",maxlength:"6",placeholder:"请输入邮箱验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[a("van-button",{staticClass:"btn-code",attrs:{slot:"button",size:"mini",plain:"",type:"danger",disabled:t.isDisabled},on:{click:t.onSend},slot:"button"},[t._v(t._s(t.codeTxt))])],1)},staticRenderFns:[]},r=a("VU/8")(s,c,!1,null,null,null).exports,l=a("ocgh"),u=(a("oFuF"),{data:function(){return{email:"",verification_code:""}},props:{pageType:{type:[Number,String]}},computed:{},methods:{onSave:function(){var t=this;t.pageType;if(!Object(i.c)(t.email)||!Object(i.g)(t.verification_code))return!1;var e={};e.email=t.email,e.email_verification=t.verification_code,Object(l.h)(e).then(function(e){var a=e.message;t.$Toast.success(a),setTimeout(function(){t.$router.replace("/member/centre")},1e3)})}},components:{CellEmailCodeGroup:r}}),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-cell-group",[a("van-field",{attrs:{label:"电子邮箱",placeholder:"请输入电子邮箱",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),a("CellEmailCodeGroup",{attrs:{email:t.email},model:{value:t.verification_code,callback:function(e){t.verification_code=e},expression:"verification_code"}})],1),t._v(" "),a("div",{staticClass:"foot-btn-group"},[a("van-button",{attrs:{size:"normal",type:"danger",round:"",block:""},on:{click:t.onSave}},[t._v("完成")])],1)],1)},staticRenderFns:[]};var f=a("VU/8")(u,d,!1,function(t){a("bvfl")},"data-v-23991b88",null).exports,v=(a("VKKs"),a("vMJZ"),{data:function(){return{mobile:"",verification_code:""}},props:{pageType:{type:[Number,String]}},methods:{onSendSuccess:function(t){var e=t.isHasMobile,a=t.msg;1==e&&this.$Toast(a)},onSave:function(){var t=this;t.pageType;if(!Object(i.f)(t.mobile)||!Object(i.g)(t.verification_code))return!1;var e={};e.mobile=t.mobile,e.verification_code=t.verification_code,Object(l.i)(e).then(function(e){var a=e.message;t.$Toast.success(a),t.$router.replace("/member/centre")})}},components:{CellMsgCodeGroup:o.a}}),m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-cell-group",[a("van-field",{attrs:{label:"新手机号码",placeholder:"请输入新手机号码",type:"number",maxlength:"11"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),a("CellMsgCodeGroup",{attrs:{mobile:t.mobile,type:"bind_mobile","show-left-icon":!1},on:{"send-success":t.onSendSuccess},model:{value:t.verification_code,callback:function(e){t.verification_code=e},expression:"verification_code"}})],1),t._v(" "),a("div",{staticClass:"foot-btn-group"},[a("van-button",{attrs:{size:"normal",type:"danger",round:"",block:""},on:{click:t.onSave}},[t._v("完成")])],1)],1)},staticRenderFns:[]};var p=a("VU/8")(v,m,!1,function(t){a("9P81")},"data-v-10fea7b0",null).exports,_={data:function(){return{check_password:"",password:""}},props:{pageType:{type:[Number,String]}},computed:{},methods:{onSave:function(){var t=this;t.pageType;if(!Object(i.i)(t.password)||!Object(i.b)(t.password,t.check_password))return!1;Object(l.j)(t.password).then(function(e){0===e.code?(t.$Toast(e.message),setTimeout(function(){t.$parent.isValid=!0},500)):(t.$Toast.success(e.message),setTimeout(function(){t.$router.replace("/member/centre")},1e3))})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-cell-group",[a("van-field",{attrs:{label:"新密码",placeholder:"请输入新密码",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("van-field",{attrs:{label:"确认密码",placeholder:"再次输入新密码",type:"password"},model:{value:t.check_password,callback:function(e){t.check_password=e},expression:"check_password"}})],1),t._v(" "),a("div",{staticClass:"foot-btn-group"},[a("van-button",{attrs:{size:"normal",type:"danger",round:"",block:""},on:{click:t.onSave}},[t._v("完成")])],1)],1)},staticRenderFns:[]};var b=a("VU/8")(_,h,!1,function(t){a("mzXL")},"data-v-285d625a",null).exports,g={data:function(){return{action:0,check_password:"",payment_password:""}},props:{pageType:{type:[Number,String]}},methods:{onClick:function(t){this.action=t},onSave:function(){var t=this;if(!Object(i.j)(t.payment_password)||!Object(i.b)(t.payment_password,t.check_password))return!1;Object(l.k)(t.payment_password).then(function(e){0===e.code?(t.$Toast(e.message),setTimeout(function(){t.$parent.isValid=!0},500)):(t.$Toast.success("修改成功"),setTimeout(function(){t.$router.replace("/member/centre")},500))})}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-cell-group",[a("van-field",{attrs:{label:"支付密码",placeholder:"请输入支付密码",type:"password"},on:{click:function(e){t.onClick(1)}},model:{value:t.payment_password,callback:function(e){t.payment_password=e},expression:"payment_password"}}),t._v(" "),a("van-field",{attrs:{label:"确认密码",placeholder:"再次输入新密码",type:"password"},on:{click:function(e){t.onClick(2)}},model:{value:t.check_password,callback:function(e){t.check_password=e},expression:"check_password"}})],1),t._v(" "),a("div",{staticClass:"foot-btn-group"},[a("van-button",{attrs:{size:"normal",type:"danger",round:"",block:""},on:{click:t.onSave}},[t._v("完成")])],1)],1)},staticRenderFns:[]};var y=a("VU/8")(g,$,!1,function(t){a("8nkx")},"data-v-e5127ec4",null).exports,k=Object(n.a)({name:"account-post",data:function(){return{isValid:!0,verification_code:""}},computed:{pageType:function(){return this.$route.params.pagetype},navbarTitle:function(){var t=this.pageType,e="";return 1==t?e="修改密码":2==t?e="支付密码":3==t?e="修改关联手机":4==t&&(e="绑定邮箱"),e&&(document.title=e),e},componentName:function(){var t=this.pageType,e="";return 1==t?e="Password":2==t?e="PaymentPassword":3==t?e="Mobile":4==t&&(e="Email"),"PostUpdate"+e},getParamsType:function(){var t=this.pageType,e="";return 1==t?e="change_password":2==t?e="change_pay_password":3==t?e="update_mobile":4==t&&(e="bind_email"),e}},mounted:function(){this.$refs.load.success()},methods:{onNext:function(){var t=this;if(!Object(i.g)(t.verification_code))return!1;var e={};e.mobile=t.$store.state.member.info.user_tel,e.verification_code=t.verification_code,Object(l.l)(e).then(function(e){0===e.code?t.$Toast(e.message):(t.$Toast.success("验证通过"),t.isValid=!1)})}},components:{CellMsgCodeGroup:o.a,PostUpdateEmail:f,PostUpdateMobile:p,PostUpdatePassword:b,PostUpdatePaymentPassword:y}}),C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{ref:"load",staticClass:"account-relevant bg-f8"},[a("Navbar",{attrs:{title:t.navbarTitle,isMenu:!1}}),t._v(" "),t.isValid?a("div",[a("van-cell-group",[a("van-field",{attrs:{label:"手机号码",type:"tel",disabled:""},model:{value:t.$store.state.member.info.user_tel,callback:function(e){t.$set(t.$store.state.member.info,"user_tel",e)},expression:"$store.state.member.info.user_tel"}}),t._v(" "),a("CellMsgCodeGroup",{attrs:{mobile:t.$store.state.member.info.user_tel,type:t.getParamsType,"show-left-icon":!1},model:{value:t.verification_code,callback:function(e){t.verification_code=e},expression:"verification_code"}})],1),t._v(" "),a("div",{staticClass:"foot-btn-group"},[a("van-button",{attrs:{size:"normal",round:"",type:"danger",block:""},on:{click:t.onNext}},[t._v("\n        下一步\n      ")])],1)],1):a(t.componentName,{tag:"component",attrs:{"page-type":t.pageType}})],1)},staticRenderFns:[]};var T=a("VU/8")(k,C,!1,function(t){a("+xt5")},"data-v-ecd96cd6",null);e.default=T.exports},bWb7:function(t,e){},bvfl:function(t,e){},laOk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),o=a.n(n),i=a("woOf"),s=a.n(i),c=a("eKM9"),r=a("k8Id"),l=a("uMKU"),u=a("ocgh"),d=a("oFuF"),f=a("w3CS"),v=a("bp/4"),m=Object(c.a)({name:"account-info",data:function(){return{isLoading:!1,info:{},user_name:""}},computed:{isForm:function(){return!Object(d.s)(this.formList)},formList:function(){return!Object(d.s)(this.info.custom_data)&&this.info.custom_person&&this.info.custom_person.status==this.$store.state.config.customForm.member_status?this.info.custom_person.form_data:this.info.custom_data},areaInfo:function(){var t={};return Object(d.s)(this.info)||(t.id=[],t.code=this.info.area_code,this.info.province_id&&(t.id[0]=this.info.province_id,t.text=this.info.province_name),this.info.city_id&&(t.id[0]=this.info.province_id,t.id[1]=this.info.city_id,t.text=this.info.province_name+" / "+this.info.city_name),this.info.city_id&&(t.id[0]=this.info.province_id,t.id[1]=this.info.city_id,t.id[2]=this.info.district_id,t.text=this.info.province_name+" / "+this.info.city_name+" / "+this.info.district_name)),t}},mounted:function(){var t=this,e=t.$store.state.account.info;Object(d.s)(e)?t.$store.dispatch("getAccountInfo").then(function(e){var a=e.data;t.loadData(a)}).catch(function(){t.$refs.load.fail()}):t.loadData(e)},methods:{loadData:function(t){var e=s()({},t);this.info=e,this.user_name=e.user_name?e.user_name:"",this.$refs.load.success()},onConfirmDate:function(t){this.info.birthday=t},onAreaConfirm:function(t){this.info.province_name=t.text.split(" / ")[0],this.info.city_name=t.text.split(" / ")[1],this.info.district_name=t.text.split(" / ")[2],this.info.area_code=t.code,this.info.province_id=t.id[0],this.info.city_id=t.id[1],this.info.district_id=t.id[2]},onSave:function(){var t=this,e={},a=t.$refs.FormGroup?t.$refs.FormGroup.getFormData():"";if(t.user_name){if(!Object(f.h)(t.user_name,"用户名不能为纯数字！"))return!1;e.user_name=t.user_name}if(e.nick_name=t.info.nick_name,e.real_name=t.info.real_name,t.isForm){if(!a)return!1;e.post_data=o()({form_data:a,status:t.$store.state.config.customForm.member_status})}else e.sex=t.info.sex,e.birthday=t.info.birthday,e.qq=t.info.qq,e.province_id=t.info.province_id,e.city_id=t.info.city_id,e.district_id=t.info.district_id,e.area_code=t.info.area_code;t.isLoading=!0,Object(u.g)(e).then(function(e){t.$Toast.success("保存成功"),t.isLoading=!1,setTimeout(function(){t.$store.dispatch("getAccountInfo"),t.$router.back()},500)}).catch(function(){t.isLoading=!1})}},components:{CellAreaPopup:r.a,CellDatePopup:l.a,FormGroup:v.a}}),p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{ref:"load",staticClass:"account-info bg-f8"},[a("Navbar",{attrs:{isMenu:!1}}),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{label:"用户名",disabled:!!t.info.user_name,placeholder:"只能更改一次"},model:{value:t.user_name,callback:function(e){t.user_name=e},expression:"user_name"}}),t._v(" "),a("van-field",{attrs:{label:"昵称",placeholder:"请输入昵称"},model:{value:t.info.nick_name,callback:function(e){t.$set(t.info,"nick_name",e)},expression:"info.nick_name"}}),t._v(" "),a("van-field",{attrs:{label:"真实姓名",placeholder:"请输入真实姓名"},model:{value:t.info.real_name,callback:function(e){t.$set(t.info,"real_name",e)},expression:"info.real_name"}}),t._v(" "),t.isForm?a("FormGroup",{ref:"FormGroup",attrs:{items:t.formList}}):t._e(),t._v(" "),a("div",[a("CellDatePopup",{attrs:{label:"生日",placeholder:"请选择生日",value:t.info.birthday},on:{confirm:t.onConfirmDate}}),t._v(" "),a("van-cell",{staticClass:"cell-panel",attrs:{title:"性别"}},[a("van-radio-group",{staticClass:"cell-radio-group",model:{value:t.info.sex,callback:function(e){t.$set(t.info,"sex",e)},expression:"info.sex"}},[a("van-radio",{attrs:{name:1}},[t._v("男")]),t._v(" "),a("van-radio",{attrs:{name:2}},[t._v("女")]),t._v(" "),a("van-radio",{attrs:{name:0}},[t._v("保密")])],1)],1),t._v(" "),a("van-field",{attrs:{label:"QQ",type:"number",placeholder:"请输入QQ号码"},model:{value:t.info.qq,callback:function(e){t.$set(t.info,"qq",e)},expression:"info.qq"}}),t._v(" "),a("CellAreaPopup",{attrs:{label:"所在地",placeholder:"请选择地区",info:t.areaInfo},on:{confirm:t.onAreaConfirm}})],1)],1),t._v(" "),a("div",{staticClass:"foot-btn-group"},[a("van-button",{attrs:{size:"normal",type:"danger",round:"",block:"",loading:t.isLoading},on:{click:t.onSave}},[t._v("保存")])],1)],1)},staticRenderFns:[]};var _=a("VU/8")(m,p,!1,function(t){a("bWb7")},"data-v-0c8e393e",null);e.default=_.exports},mzXL:function(t,e){},qdLo:function(t,e){},"yAr/":function(t,e){}});