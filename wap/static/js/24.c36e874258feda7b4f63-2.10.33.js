webpackJsonp([24],{"/9gm":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("eKM9"),n=e("ywCI"),i=e("kSb9"),r=e("Lo3X"),o={data:function(){return{}},props:{detail:Object},components:{GoodsCard:r.a}},c={render:function(){var t=this.$createElement,a=this._self._c||t;return a("van-cell-group",[a("van-cell",[a("GoodsCard",{attrs:{id:this.detail.goods_id,thumb:this.detail.goods_picture,title:this.detail.goods_name,desc:this.detail.card_title}})],1)],1)},staticRenderFns:[]},d=e("VU/8")(o,c,!1,null,null,null).exports,l=e("QGCa"),u={props:{detail:Object},components:{CodeBox:l.a}},v={render:function(){var t=this.$createElement;return(this._self._c||t)("CodeBox",{attrs:{qrcode:this.detail.card_codeImg,code:this.detail.card_code}})},staticRenderFns:[]},_=e("VU/8")(u,v,!1,null,null,null).exports,m=e("C3ok"),p={data:function(){return{}},props:{detail:Object},computed:{numText:function(){return 1==this.detail.type?"天":"次"}}},f={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("van-cell-group",[e("van-cell",{attrs:{title:"核销情况"}}),t._v(" "),e("van-cell",[e("div",[e("van-col",{attrs:{span:"6"}},[e("div",[t._v("核销数")])]),t._v(" "),e("van-col",{attrs:{span:"18"}},[1==t.detail.type?e("div",[2!=t.detail.state&&0==t.detail.surplus_num?e("div",[t._v("最后一天")]):e("div",[t._v("\n            剩余\n            "),e("span",{staticClass:"span text-maintone"},[t._v(t._s(t.detail.surplus_num))]),t._v(" "),e("span",[t._v(t._s(t.numText))])])]):e("div",[t._v("\n          剩余\n          "),e("span",{staticClass:"span text-maintone"},[t._v(t._s(t.detail.surplus_num))]),t._v(" "),e("span",[t._v(t._s(t.numText))]),t._v(" ，总数\n          "),e("span",{staticClass:"span text-maintone"},[t._v(t._s(t.detail.count_num))]),t._v(" "),e("span",[t._v(t._s(t.numText))])])])],1),t._v(" "),e("div",[e("van-col",{attrs:{span:"6"}},[e("div",[t._v("有效期")])]),t._v(" "),e("van-col",{attrs:{span:"18"}},[e("div",[e("span",[t._v(t._s(t.detail.invalid_time))]),t._v(" 前有效\n        ")])])],1)])],1)},staticRenderFns:[]};var h=e("VU/8")(p,f,!1,function(t){e("dps/")},"data-v-4b6efa63",null).exports,b={data:function(){return{params:{card_id:this.card_id}}},mixins:[e("msXN").e],props:{card_id:[String,Number]},mounted:function(){this.loadList()},methods:{loadList:function(t){var a=this;t&&"init"===t&&a.initList(),Object(n.c)(a.params).then(function(e){var s=e.data,n=s.data;a.pushToList(n,s.page_count,t)}).catch(function(){a.loadError()})}}},x={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("van-cell-group",[e("van-cell",{attrs:{title:"核销记录"}}),t._v(" "),e("List",{staticClass:"list",attrs:{finished:t.finished,error:t.error},on:{"update:error":function(a){t.error=a},load:t.loadList},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.list,function(a,s){return e("van-cell",{key:s},[e("van-row",{attrs:{type:"flex",justify:"space-between"}},[e("van-col",{attrs:{span:"20"}},[e("div",{staticClass:"name"},[t._v(t._s(a.store_name))]),t._v(" "),e("div",{staticClass:"fs-12 text-secondary"},[t._v(t._s(t._f("formatDate")(a.create_time,"s")))])]),t._v(" "),e("van-col",{staticClass:"text-right text-maintone",attrs:{span:"4"}},[e("div",[t._v(t._s(a.num))])])],1)],1)}))],1)},staticRenderFns:[]},C=e("VU/8")(b,x,!1,null,null,null).exports,g=Object(s.a)({name:"consumercard-detail",data:function(){return{detail:{}}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this,a={};a.card_id=t.$route.params.cardid,t.$route.query.card_id&&(a.wx_card_id=t.$route.query.card_id),Object(n.a)(a).then(function(a){var e=a.data;t.detail=e,t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})}},components:{CellAddWxCard:i.a,DetailGoods:d,DetailCode:_,DetailStore:m.a,DetailSituation:h,DetailLog:C}}),y={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Layout",{ref:"load",staticClass:"consumercard-detail bg-f8"},[e("Navbar"),t._v(" "),t.detail.wx_card_state||2!=t.detail.card_type?t._e():e("CellAddWxCard",{staticClass:"card-group-box",attrs:{params:t.detail.card_id},on:{success:t.loadData}}),t._v(" "),e("DetailGoods",{staticClass:"card-group-box",attrs:{detail:t.detail}}),t._v(" "),t.$route.query.card_id?t._e():e("DetailCode",{staticClass:"card-group-box",attrs:{detail:t.detail}}),t._v(" "),e("DetailStore",{staticClass:"card-group-box",attrs:{info:t.detail}}),t._v(" "),e("DetailSituation",{staticClass:"card-group-box",attrs:{detail:t.detail}}),t._v(" "),e("DetailLog",{staticClass:"card-group-box",attrs:{card_id:t.detail.card_id}})],1)},staticRenderFns:[]};var $=e("VU/8")(g,y,!1,function(t){e("4khq")},"data-v-6b82120b",null);a.default=$.exports},"4khq":function(t,a){},C3ok:function(t,a,e){"use strict";var s=e("lpao"),n={props:{info:Object},computed:{newInfo:function(){var t=this.info,a=(t.store_id,t.store_name),e=t.store_tel,s=t.shop_name,n=t.address,i={title:"使用门店"};return i.name=s+"（"+a+"）",i.mobile=e,i.address=n,i}},components:{CellAddressGroup:s.a}},i={render:function(){var t=this.$createElement;return(this._self._c||t)("CellAddressGroup",{attrs:{info:this.newInfo}})},staticRenderFns:[]};var r=e("VU/8")(n,i,!1,function(t){e("cRNC")},"data-v-ebcb06f2",null);a.a=r.exports},Cq3z:function(t,a){},XQtn:function(t,a){},cRNC:function(t,a){},"dps/":function(t,a){},i9fb:function(t,a){},jirn:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("eKM9"),n=e("ORU3"),i={props:{item:Object},computed:{itemBg:function(){return 2==this.item.state?"disabled-bg":1==this.item.type?"time-bg":"number-bg"},numText:function(){var t=this.item,a=t.type,e=t.state,s=t.surplus_num;return 1==a?2!=e&&0==s?"最后一天":"剩余天数":"剩余次数"}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("van-row",{staticClass:"item",class:t.itemBg,attrs:{type:"flex",justify:"space-between"},nativeOn:{click:function(a){t.$router.push("/consumercard/detail/"+t.item.card_id)}}},[e("van-col",{staticClass:"info",attrs:{span:"18"}},[e("div",{staticClass:"name"},[t._v(t._s(t.item.goods_name))]),t._v(" "),e("div",{staticClass:"time"},[t._v("\n      有效期至：\n      "),e("span",[t._v(t._s(t.item.invalid_time))])])]),t._v(" "),e("van-col",{staticClass:"num",attrs:{span:"6"}},[e("div",[t._v(t._s(t.numText))]),t._v(" "),"最后一天"!=t.numText?e("div",{staticClass:"strong"},[t._v(t._s(t.item.surplus_num))]):t._e()])],1)},staticRenderFns:[]};var o=e("VU/8")(i,r,!1,function(t){e("i9fb")},"data-v-44bc1114",null).exports,c=e("ywCI"),d=e("msXN"),l=Object(s.a)({name:"consumercard-list",data:function(){return{tab_active:0,tabs:[{name:"可使用",status:0},{name:"已使用",status:1},{name:"已过期",status:2}],params:{state:0}}},mixins:[d.e],mounted:function(){this.loadList()},methods:{onTab:function(t){var a=this.tabs[t].status;this.params.state=a,this.loadList("init")},loadList:function(t){var a=this;t&&"init"===t&&a.initList(),Object(c.b)(a.params).then(function(e){var s=e.data,n=s.data;a.pushToList(n,s.page_count,t)}).catch(function(){a.loadError()})}},components:{HeadTab:n.a,ListItem:o}}),u={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"consumercard-list bg-f8"},[e("Navbar"),t._v(" "),e("HeadTab",{attrs:{tabs:t.tabs},on:{"tab-change":t.onTab},model:{value:t.tab_active,callback:function(a){t.tab_active=a},expression:"tab_active"}}),t._v(" "),e("List",{staticClass:"list",attrs:{finished:t.finished,error:t.error,"is-empty":t.isListEmpty,empty:{top:t.$store.state.isWeixin?46:90}},on:{"update:error":function(a){t.error=a},load:t.loadList},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.list,function(t,a){return e("ListItem",{key:a,attrs:{item:t}})}))],1)},staticRenderFns:[]};var v=e("VU/8")(l,u,!1,function(t){e("Cq3z")},"data-v-1d4ceba0",null);a.default=v.exports},kSb9:function(t,a,e){"use strict";var s={props:{params:[String,Number]},computed:{text:function(){return this.$store.state.isWeixin&&this.$store.getters.config.is_wchat?"领取到微信卡包，通过卡包快速核销。":"使用微信访问商城可将该消费卡领取到“微信卡包”以便下次使用。"}},methods:{onAdd:function(){var t=this;this.$store.dispatch("wxAddCard",this.params).then(function(){t.$emit("success")})}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("van-cell-group",[e("van-cell",{attrs:{center:""}},[e("div",{staticClass:"icon-box",attrs:{slot:"icon"},slot:"icon"},[e("van-icon",{attrs:{name:"v-icon-card",size:"2.5em",color:"#ff976a"}})],1),t._v(" "),e("div",[e("div",[t._v(t._s(t.text))]),t._v(" "),t.$store.state.isWeixin&&t.$store.getters.config.is_wchat?e("span",{staticClass:"a-link fs-12",on:{click:t.onAdd}},[t._v("前往领取>>")]):t._e()])])],1)},staticRenderFns:[]};var i=e("VU/8")(s,n,!1,function(t){e("XQtn")},"data-v-77e733e4",null);a.a=i.exports}});