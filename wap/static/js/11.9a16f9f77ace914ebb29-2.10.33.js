webpackJsonp([11],{"12DY":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("eKM9"),i=o("r4M4"),s=o("qsHl"),n=o("WyhY"),r=Object(a.a)({name:"goods-category",data:function(){return{activeKey:0,items:[]}},computed:{ofBottom:function(){return this.$store.state.tabbar.isShowTabbar?50:0},content:function(){return this.items[this.activeKey]?this.items[this.activeKey].second_category:[]}},activated:function(){this.loadData()},methods:{loadData:function(){var t=this;Object(s.d)().then(function(e){var o=e.data;t.items=o,t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})},toList:function(t,e){this.$router.push({path:"/goods/list",query:{category_id:t,text:e}})}},components:{HeadSearch:n.a,CategoryView:i.a}}),c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Layout",{ref:"load",staticClass:"goods-category"},[o("HeadSearch"),t._v(" "),o("CategoryView",{attrs:{top:"46",bottom:t.ofBottom}},[o("div",{staticClass:"nav",attrs:{slot:"nav"},slot:"nav"},t._l(t.items,function(e,a){return o("div",{key:a,staticClass:"item",class:t.activeKey==a?"active":"",on:{click:function(e){t.activeKey=a}}},[o("span",{staticClass:"nav-item-text"},[t._v(t._s(e.short_name||e.category_name))])])})),t._v(" "),o("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},t._l(t.content,function(e,a){return o("div",{key:a,staticClass:"item"},[o("div",{staticClass:"item-head"},[o("span",{staticClass:"e-handle",on:{click:function(o){t.toList(e.category_id,e.short_name||e.category_name)}}},[t._v(t._s(e.short_name||e.category_name))])]),t._v(" "),o("div",{staticClass:"item-main"},t._l(e.third_category,function(e,a){return o("div",{key:a,staticClass:"item-child"},[o("div",{staticClass:"item-box e-handle",on:{click:function(o){t.toList(e.category_id,e.short_name||e.category_name)}}},[o("div",{staticClass:"iamges"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.category_pic,expression:"child.category_pic"}],key:e.category_pic,attrs:{"pic-type":"square"}})]),t._v(" "),o("div",{staticClass:"name"},[t._v(t._s(e.short_name||e.category_name))])])])}))])}))])],1)},staticRenderFns:[]};var d=o("VU/8")(r,c,!1,function(t){o("Jiox")},"data-v-37f32a50",null);e.default=d.exports},"338m":function(t,e){},"5ESE":function(t,e){},"8hWq":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("Dd8w"),i=o.n(a),s=o("woOf"),n=o.n(s),r=o("mvHQ"),c=o.n(r),d=o("eKM9"),l=o("muf+"),p=o("NiMi"),u=o("cgSz"),m=o("bOdI"),_=o.n(m),h=(o("nOaS"),o("pIDD")),f=o("//Fk"),g=o.n(f),v=o("9uSG"),y=o("WmBJ"),b=o("oFuF"),k=o("qsHl"),x={data:function(){return{popupShow:!1,showImgHtml:!1,imgUrl:"",shareUrl:"",showLoading:!1,goodsImg:""}},props:{info:Object},computed:{shareBtnStyle:function(){return{top:"15px",position:"absolute"}}},watch:{"info.id":function(t){t&&(this.clickEvent=!1,this.imgLoading="",this.showLoading=!1,this.imgUrl="")},imgUrl:function(t){this.onShow()}},methods:{getShareUrl:function(){var t=this;return new g.a(function(e,o){var a=t,i=a.$store.state.domain+"/wap",s=Object(b.k)(t.$route.query,"extend_code"),n=""+i+(t.$route.path+s);a.$store.dispatch("getExtendCode").then(function(t){t&&(n=s?n+"&extend_code="+t:n+"?extend_code="+t),a.shareUrl=n,e()})})},getGoodsImgBase64:function(t){var e=this;return new g.a(function(o,a){Object(k.i)(t).then(function(t){var a=t.data;o(a[0]||e.info.picture)}).catch(function(){o(e.info.picture)})})},getImgUrl:function(){var t=this;t.$store.dispatch("getPosterImg",{poster_type:2,goods_id:t.info.id}).then(function(e){t.showImgHtml=!1,t.imgUrl=e}).catch(function(){t.getGoodsImgBase64(t.info.id).then(function(e){t.goodsImg=e,t.showImgHtml=!0,t.getShareUrl().then(function(e){g.a.all([t.loadedGoodsImg(),t.loadedQrImg()]).then(function(){t.$nextTick(function(){t.$store.dispatch("buildImg",t.$refs.imageWrapper).then(function(e){t.imgUrl=e})})}).catch(function(){t.$nextTick(function(){t.$store.dispatch("buildImg",t.$refs.imageWrapper).then(function(e){t.imgUrl=e})})})})})})},onClick:function(){this.clickEvent=!0,this.imgUrl?this.onShow():(this.getImgUrl(),this.showLoading=!0,this.imgLoading=this.$Toast.loading({message:"海报生成中",duration:0,loadingType:"spinner"}))},onShow:function(){this.imgLoading&&this.imgLoading.clear(),this.clickEvent&&(this.popupShow=!0,this.showLoading=!1)},loadedGoodsImg:function(){return new g.a(function(t,e){document.getElementById("goodsImg").onload=function(e){t(e)}})},loadedQrImg:function(){return new g.a(function(t,e){document.getElementById("qrImg").onload=function(e){t(e)}})}},beforeDestroy:function(){this.imgLoading&&this.imgLoading.clear()},components:_()({HeadBtn:v.a,Qrcode:y.a},h.a.name,h.a)},C={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"share-box"},[t.$store.state.isWeixin?o("HeadBtn",{style:t.shareBtnStyle}):t._e(),t._v(" "),t.$store.state.message.showService?o("HeadBtn",{staticClass:"cart-btn",style:t.shareBtnStyle,attrs:{event:"",dir:"right",icon:"v-icon-cart1"},on:{click:function(e){t.$router.push("/mall/cart")}}}):t._e(),t._v(" "),t.showLoading?o("div",{staticClass:"loading-box",style:t.shareBtnStyle},[o("van-loading",{attrs:{color:"white",size:"20px"}})],1):o("HeadBtn",{style:t.shareBtnStyle,attrs:{type:"share",event:""},on:{click:t.onClick}}),t._v(" "),!t.imgUrl&&t.showImgHtml&&t.shareUrl?o("div",{ref:"imageWrapper",staticClass:"image-wrapper"},[o("div",{staticClass:"img-box"},[o("div",{staticClass:"banner"},[o("img",{attrs:{src:t.goodsImg,id:"goodsImg",onerror:t.$ERRORPIC.noGoods}})]),t._v(" "),o("van-cell",{staticClass:"info-box"},[o("div",{staticClass:"title"},[t._v(t._s(t.info.title))]),t._v(" "),o("div",{staticClass:"price"},[t._v("\n          "+t._s(t._f("yuan")(t.info.price))+"\n          "),o("small",{staticClass:"market"},[t._v(t._s(t._f("yuan")(t.info.marketPrice)))])])]),t._v(" "),o("div",{staticClass:"qr-box"},[o("Qrcode",{staticClass:"img",attrs:{options:{size:80},value:t.shareUrl,tag:"img",id:"qrImg"}})],1)],1)]):t._e(),t._v(" "),o("van-popup",{staticClass:"share-popup",model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[o("div",{staticClass:"poster-box"},[o("img",{staticClass:"poster-img",attrs:{src:t.imgUrl}})]),t._v(" "),o("div",{staticClass:"foot"},[o("small",{staticClass:"tip"},[o("span",[t._v(t._s(t.$store.state.isWeixin?"长按图片可保存图片或分享":"长按图片可保存图片"))]),t._v(" "),o("span",[t._v(t._s(t.$store.state.isWeixin?"如需链接分享，请点击右上角进行分享":"如需链接分享，请点击下方进行分享"))])])])])],1)},staticRenderFns:[]};var $=o("VU/8")(x,C,!1,function(t){o("338m")},"data-v-2432bb36",null).exports,S=(o("Meda"),o("e89B")),w=(o("zTEI"),o("pzvz")),I=o("msXN"),P={data:function(){return{}},props:{goodsInfo:Object},mixins:[I.j],computed:{showService:function(){return this.$store.state.message.showService||null}},mounted:function(){var t=this;t.getKefu(t.goodsInfo.shopId,t.goodsInfo.id).then(function(e){t.$store.getters.token?t.loadKefu(e.domain).then(function(){t.$store.commit("setShowServiceBtn",!0),t.$nextTick(function(){t.serverFlag=!0;var e=t.$store.state.member.info,o=e.uid,a=e.username,i=e.member_img,s=e.reg_time;t.goodsInfo.id&&qlkefuChat.init({uid:o,uName:a,avatar:i,regTime:s||"",goods:{goods_id:t.goodsInfo.id,goods_name:t.goodsInfo.title,price:t.goodsInfo.goodsPrice,pic_cover:t.goodsInfo.picture}})})}):t.$store.commit("setShowServiceBtn",!0)}).catch(function(){})},components:_()({},S.a.name,S.a)},T={render:function(){var t=this.$createElement,e=this._self._c||t;return this.showService?e("van-goods-action-mini-btn",{staticClass:"btn-kf",attrs:{icon:"v-icon-kf3",text:"客服",id:"WS-SHOW-CHAT"},on:{click:this.openKefu}}):e("van-goods-action-mini-btn",{attrs:{icon:"cart-o",text:"购物车",to:"/mall/cart"}})},staticRenderFns:[]};var B=o("VU/8")(P,T,!1,function(t){o("HFCM")},"data-v-5d926b84",null).exports,O={data:function(){return{collection:this.flag}},props:{flag:Boolean,seckill_id:{default:!1}},mixins:[I.a],computed:{is_collection:function(){return this.collection=this.flag}},methods:{goodsCollect:function(t){var e=this,o=e.$route.params.goodsid,a=e.seckill_id?e.seckill_id:null;t?Object(k.b)(o).then(function(t){e.$Toast.success("取消成功"),e.collection=!1}).catch(function(){}):Object(k.m)(o,a).then(function(t){e.$Toast.success("收藏成功"),e.collection=!0}).catch(function(){})}},components:_()({},S.a.name,S.a)},E={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("van-goods-action-mini-btn",{attrs:{icon:t.collection?"like":"like-o",text:"收藏",is_collection:t.is_collection},on:{click:function(e){t.bindMobile("goodsCollect",t.collection)}}})},staticRenderFns:[]};var j,D=o("VU/8")(O,E,!1,function(t){o("EE33")},"data-v-030cddbc",null).exports,U=o("hxho"),L={data:function(){return{}},props:{goodsInfo:Object,promoteType:{type:String,default:"normal"},promoteParams:Object},computed:{seckill_id:function(){var t=null;return"seckill"==this.promoteType&&(t=this.promoteParams.seckill_id||null),t}},methods:{action:function(t,e){this.$emit("action",t,e)}},components:(j={},_()(j,w.a.name,w.a),_()(j,S.a.name,S.a),_()(j,"ServiceBtn",B),_()(j,"CollectionBtn",D),_()(j,"ActionBtn",U.a),j)},q={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("van-goods-action",{staticClass:"goods-action-group",attrs:{"safe-area-inset-bottom":""}},[t.$store.state.config.addons.shop?o("van-goods-action-mini-btn",{attrs:{icon:"shop-o",text:"店铺",to:"/shop/home/"+t.goodsInfo.shopId}}):t._e(),t._v(" "),t.goodsInfo.id?o("ServiceBtn",{attrs:{"goods-info":t.goodsInfo}}):t._e(),t._v(" "),o("CollectionBtn",{attrs:{flag:t.goodsInfo.isCollect,seckill_id:t.seckill_id}}),t._v(" "),o("ActionBtn",{staticClass:"van-hairline--left",attrs:{"goods-info":t.goodsInfo,"promote-type":t.promoteType,"promote-params":t.promoteParams,"direct-click":""},on:{action:t.action}})],1)},staticRenderFns:[]};var F=o("VU/8")(L,q,!1,function(t){o("L9ah")},"data-v-efb18da4",null).exports,R=o("VKKs"),M=o("BuIE"),H={M012345678901:{id:"detail_banner",max:1,params:{},style:{shape:"round",position:"center",color:"#1989fa"},data:{}},M012345678902:{id:"detail_info",max:1,params:{},style:{margintop:10,marginbottom:10,pricecolor:"#ff454e",pricelightcolor:"#909399",promotecolor:"#ffffff",promotelightcolor:"#ffffff",titlecolor:"#323233"},data:{}},M012345678903:{id:"detail_promote",max:1,params:{},style:{margintop:10,marginbottom:10,titlecolor:"#606266"},data:{C0123456789101:{key:"fullcut",text:"促销"},C0123456789102:{key:"coupon",text:"优惠"},C0123456789103:{key:"rebate",text:"返利"}}},M012345678904:{id:"detail_specs",max:1,params:{},style:{margintop:0,marginbottom:0,titlecolor:"#606266",currentcolor:"#323233",nocurrentcolor:"#909399"},data:{}},M012345678905:{id:"detail_delivery",max:1,params:{},style:{margintop:0,marginbottom:0,titlecolor:"#606266",currentcolor:"#323233",nocurrentcolor:"#909399"},data:{}},M012345678906:{id:"detail_service",max:1,params:{},style:{margintop:0,marginbottom:0,titlecolor:"#323233",desccolor:"#606266"},data:{}},M012345678907:{id:"detail_shop",max:1,params:{},style:{margintop:10,marginbottom:10,namecolor:"#323233",titlecolor:"#323233",starcolor:"#ffd21e",scorecolor:"#ff454e",btncolor:"#ff454e",btntextcolor:"#ffffff"},data:{}},M012345678908:{id:"detail_desc",max:1,params:{},style:{},data:{}}},A=!0,W=Object(d.a)({name:"goods-detail",data:function(){return{pageParam:{style:null,title:null},items:{},promoteType:"normal",promoteParams:{},goodsData:null,showSku:!1,goodsInfo:{},skuAction:"",current_record_id:"",deliveryInfo:{type:"express"},posterInfo:{id:0,picture:"",title:"",price:0,marketPrice:0}}},watch:{"$route.params.goodsid":function(t){t&&"goods-detail"==this.$route.name&&(this.$refs.load.init(),this.loadData())}},computed:{params:function(){var t=this.$route.query,e=t.record_id,o=t.channel_id,a={goods_id:this.$route.params.goodsid};return e&&(a.record_id=e),o&&(a.channel_id=o),a}},mixins:[I.a],mounted:function(){this.loadData()},methods:{getGoodsInfo:function(t){for(var e in this.goodsInfo=t,this.items){var o=this.items[e];"detail_info"===o.id&&(o.goodsInfo=t),"detail_specs"===o.id&&(o.params.isCurrent=!!t.selectedSkuComb,t.isSpec?o.params.valueText=t.selectedSkuComb?t.selectedSkuComb.sku_name:"请选择规格":o.params.valueText="已选："+t.selectedNum+"件")}},onSkuClose:function(t){"group"==t&&this.current_record_id&&(this.current_record_id="")},onShowSku:function(t){"study"==t?this.onStudy({goods_id:this.params.goods_id}):(this.showSku=!0,this.skuAction=t)},onSkuAction:function(t,e){"buy"===t||"group"===t||"seckill"===t||"presell"===t?this.onBuyNow(e):"addCart"===t?this.onAddCart(e):"bargain"==t?this.onBargain(e):"study"==t?this.onStudy(e):this.$Toast("暂无后续操作"+t)},onAddCart:function(t){var e=this;this.bindMobile().then(function(){if(A){A=!1;var o={};o.num=t.selectedNum,o.sku_id=t.selectedSkuComb.id,e.$route.query.shopkeeper_id&&(o.shopkeeper_id=e.$route.query.shopkeeper_id,Object(R.i)("shopkeeper_id",e.$route.query.shopkeeper_id)),t.seckill_id&&(o.seckill_id=t.seckill_id),Object(k.a)(o).then(function(t){var o=t.message;e.$Toast.success(o),e.showSku&&(e.showSku=!1,setTimeout(function(){A=!0},200))}).catch(function(){A=!0})}})},onBuyNow:function(t){var e=this;this.bindMobile().then(function(){var o={order_tag:"buy_now"};o.goodsType=t.goodsType,e.deliveryInfo&&"express"==e.deliveryInfo.type&&(o.address_id=e.deliveryInfo.id),e.$route.query.shopkeeper_id&&(o.shopkeeper_id=e.$route.query.shopkeeper_id,Object(R.i)("shopkeeper_id",e.$route.query.shopkeeper_id)),t.presell_id&&(o.presell_id=t.presell_id),t.group_id&&(o.group_id=t.group_id,e.current_record_id?o.record_id=e.current_record_id:t.record_id&&(o.record_id=t.record_id)),o.sku_list=[];var a={};a.num=t.selectedNum,a.sku_id=t.selectedSkuComb.id,a.shop_id=t.shopId,e.deliveryInfo&&"pickup"==e.deliveryInfo.type&&(a.store_id=e.deliveryInfo.id,a.store_name=e.deliveryInfo.name),t.seckill_id&&(a.seckill_id=t.seckill_id),e.params.channel_id&&(a.channel_id=e.params.channel_id),o.sku_list.push(a),e.$router.push({name:"order-confirm",query:{params:Object(M.b)(c()(o))}})})},onBargain:function(t){this.$router.push({name:"bargain-detail",params:{goodsid:t.id,bargainid:t.bargain_id,bargainuid:t.bargain_uid}})},onStudy:function(t){this.$router.push({name:"course-detail",params:{id:t.goods_id}})},onEvent:function(t,e){"specs"===t?(this.skuAction="",this.showSku=!0):"group"===t?(this.current_record_id=e,this.skuAction="group",this.showSku=!0):"delivery"===t?(this.deliveryInfo.type==e.type&&"pickup"!=e.type||this.getStoreGoodsDetail("pickup"==e.type&&e.id),this.deliveryInfo=e):"initData"===t&&this.loadData()},loadData:function(){var t=this;Object(k.g)(this.params).then(function(e){var o=e.data;if(!1===o.is_allow_browse)return t.$refs.load.fail({errorType:"goods",errorText:"您自身等级无权限浏览该商品",showFoot:!1});t.detailData=o,t.goodsData=t.packageGoodsData(o),t.promoteType=t.packagePromoteData(o).type,t.promoteParams=t.packagePromoteData(o).info,t.posterInfo={id:o.goods_detail.goods_id,picture:o.goods_detail.goods_images[0],title:o.goods_detail.goods_name,price:o.goods_detail.poster_price||0,marketPrice:o.goods_detail.min_market_price},t.onShare({title:o.goods_detail.goods_name,desc:"我刚刚在"+t.$store.getters.config.mall_name+"发现了一个很不错的商品，赶快来看看吧。",imgUrl:o.goods_detail.goods_images[0],link:t.$store.state.domain+"/wap"+t.$route.path+Object(b.k)(t.$route.query,"extend_code")}),t.$store.dispatch("getCustom",{type:3,shop_id:o.goods_detail.shop_id}).then(function(e){var a=e.template_data,i=t.initCustomData(a.items);t.items=t.packageItemsData(i,o),t.$refs.load.success(),t.setPageParam({title:o.goods_detail.goods_name,background:a.page.background})}).catch(function(){t.$refs.load.fail()})}).catch(function(){t.$refs.load.fail()})},initCustomData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},o=H;for(var a in t){var i=t[a];if("detail_fixed"==i.id)for(var s in delete t[a],o)e[s]=o[s];else e[a]=i}return e},setPageParam:function(t){var e=t.title,o=t.background;this.pageParam.title=e,e&&(document.title=e),this.pageParam.style={background:o}},packageItemsData:function(t,e){var o=n()({},t);for(var a in o){var s=o[a];if("detail_banner"===s.id&&(s.data=[],s.data=e.goods_detail.goods_images,s.params={},s.params.video=e.goods_detail.video),"detail_info"===s.id&&(s.params={},s.params.sales=e.goods_detail.sales||0,s.params.postage=e.goods_detail.shipping_fee,s.goodsInfo={},s.params.promoteType=this.promoteType,s.params.promoteParams=this.promoteParams,s.params.digitalAsset={eth:e.eth_market,eos:e.eos_market,fee:e.service_charge}),"detail_specs"===s.id&&(s.params={},s.params.valueText="",s.params.isCurrent=!1,s.params.show=4!=e.goods_detail.goods_type),"detail_shop"===s.id&&(s.params={},s.params.id=e.goods_detail.shop_id,s.params.logo=e.shop_type_info.shop_logo,s.params.name=e.shop_type_info.shop_name,s.params.delivery=e.shop_type_info.shop_deliverycredit,s.params.desc=e.shop_type_info.shop_desccredit,s.params.service=e.shop_type_info.shop_servicecredit,s.params.comprehensive=e.shop_type_info.comprehensive),"detail_desc"===s.id){s.params={},s.params.tabs=[];var r={text:"描述",name:"descript",data:e.goods_detail.description},c={text:"属性",name:"attribute",data:e.goods_detail.goods_attribute_list||[]},d={text:"目录",name:"catalog",data:e.goods_detail.goods_id},l={text:"评论",name:"evaluate",data:e.goods_detail.goods_id};s.params.tabs.push(r),4==e.goods_detail.goods_type?s.params.tabs.push(d):s.params.tabs.push(c),s.params.tabs.push(l)}if("detail_promote"===s.id){for(var p in s.data=s.data||{},s.params={},s.data){var u=s.data[p];u.show=!0,"fullcut"==u.key?u.data=e.full_cut_list:"coupon"==u.key?(u.data=e.coupon_type_list||[],u.data.forEach(function(t){t.loading=!1,t.title=""})):"rebate"==u.key&&(u.data=i()({},e.distributor_res,e.give_point))}"presell"==this.promoteType&&(s.params=this.promoteParams,s.params.promoteType=this.promoteType),"group"==this.promoteType&&!this.params.record_id&&this.promoteParams.group_record_count&&(s.params=this.promoteParams,s.params.promoteType=this.promoteType)}"detail_delivery"===s.id&&(s.params={},s.params.isCurrent=!!this.deliveryInfo.id,s.params.show=4!=e.goods_detail.goods_type,s.params.info={},s.params.info.address=this.deliveryInfo&&this.deliveryInfo.address,s.params.has_express=e.has_express,s.params.has_store=e.has_store),"detail_service"===s.id&&(s.params={},s.params.show=4!=e.goods_detail.goods_type)}return o},packageGoodsData:function(t){var e={};return(e=t.goods_detail).goods_image=t.goods_detail.goods_image_yun,e.is_allow_buy="boolean"!=typeof t.is_allow_buy||t.is_allow_buy,e},packagePromoteData:function(t){var e="normal",o={};return t.seckill_list.seckill_id?e="seckill":t.group_list.group_id?e="group":t.presell_list.presell_id?e="presell":t.bargain_list.bargain_id?e="bargain":t.limit_list&&t.limit_list.discount_id&&(e="limit"),"normal"!=e&&(o=t[e+"_list"]||{}),{type:e,info:o}},getStoreGoodsDetail:function(t){var e=this,o=n()({},this.params);t&&(o.store_id=t),Object(k.j)(o,{loading:!0}).then(function(t){var o=t.data,a=e.goodsData,i=o.goods_detail;for(var s in i)a.hasOwnProperty(s)&&(a[s]=i[s]);e.$store.dispatch("getCustom",{type:3,shop_id:o.goods_detail.shop_id}).then(function(t){var o=t.template_data,a=e.initCustomData(o.items);e.items=e.packageItemsData(a,e.detailData)})})}},components:{InviteWechat:l.a,CustomGroup:p.a,SkuPopup:u.a,ShareBtn:$,BottomGoodsAction:F}}),N={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Layout",{ref:"load",staticClass:"goods-detail bg-f8",style:t.pageParam.style},[o("Navbar",{attrs:{title:t.pageParam.title}}),t._v(" "),o("InviteWechat"),t._v(" "),o("ShareBtn",{attrs:{info:t.posterInfo}}),t._v(" "),o("CustomGroup",{attrs:{type:"3",items:t.items},on:{event:t.onEvent}}),t._v(" "),o("SkuPopup",{attrs:{info:t.goodsData,action:t.skuAction,"promote-type":t.promoteType,"promote-params":t.promoteParams,"get-goods-info":t.getGoodsInfo},on:{action:t.onSkuAction,close:t.onSkuClose},model:{value:t.showSku,callback:function(e){t.showSku=e},expression:"showSku"}}),t._v(" "),o("BottomGoodsAction",{attrs:{"goods-info":t.goodsInfo,"promote-type":t.promoteType,"promote-params":t.promoteParams},on:{action:t.onShowSku}})],1)},staticRenderFns:[]};var G=o("VU/8")(W,N,!1,function(t){o("p7Nb")},"data-v-5c2b363a",null);e.default=G.exports},"9xHN":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("eKM9"),i=(o("u6fB"),o("qsHl")),s=o("msXN"),n=Object(a.a)({name:"goods-collection",data:function(){return{}},activated:function(){this.loadList("init")},mixins:[s.e],methods:{loadList:function(t){var e=this;t&&"init"===t&&e.initList(),Object(i.e)(e.params).then(function(o){var a=o.data,i=a.goods_list;e.pushToList(i,a.page_count,t)}).catch(function(){e.loadError()})}}}),r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"goods-collection bg-f8"},[o("Navbar"),t._v(" "),o("List",{attrs:{finished:t.finished,error:t.error,"is-empty":t.isListEmpty},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,a){return o("van-cell",{key:a,attrs:{clickable:"",to:{name:"goods-detail",params:{goodsid:e.goods_id}}}},[o("div",{staticClass:"item"},[o("div",{staticClass:"img"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.pic_cover,expression:"item.pic_cover"}],key:e.pic_cover,attrs:{"pic-type":"square"}})]),t._v(" "),o("div",{staticClass:"text"},[o("div",{staticClass:"name"},[t._v(t._s(e.goods_name))]),t._v(" "),o("van-row",{attrs:{type:"flex",justify:"space-between"}},[o("van-col",{staticClass:"text-maintone"},[t._v(t._s(t._f("yuan")(e.price)))]),t._v(" "),o("van-col",{staticClass:"van-col-icon"},[o("van-icon",{attrs:{name:"like"}})],1)],1)],1)])])}))],1)},staticRenderFns:[]};var c=o("VU/8")(n,r,!1,function(t){o("Dhl0")},"data-v-a35d0a1e",null);e.default=c.exports},AKby:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("Dd8w"),i=o.n(a),s=o("woOf"),n=o.n(s),r=o("eKM9"),c=o("okIt"),d=o("kp1X"),l=o("qsHl"),p=o("msXN"),u=Object(r.a)({name:"goods-list",data:function(){return{}},mixins:[p.e],beforeRouteEnter:function(t,e,o){"goods-detail"===e.name&&(t.meta.isBack=!0),o()},computed:{navBarTitle:function(){var t=this.$route.query,e=this.$route.meta.title;return t.search_text?e="搜索："+t.search_text:t.text&&(e=t.text),e&&(document.title=e),e}},mounted:function(){this.isFirstEnter=!0},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||(this.params=n()(this.params,i()({},this.getParams())),this.loadList("init")),this.$route.meta.isBack=!1,this.isFirstEnter=!1},methods:{getParams:function(){var t=this.$route.query,e=t.shop_id,o=t.search_text,a=t.category_id;return{order:"",sort:"",min_price:"",max_price:"",is_recommend:0,is_new:0,is_hot:0,is_promotion:0,is_shipping_free:0,goods_type:e>0?2:0==e?0:1,search_text:o||"",category_id:a||"",shop_id:e||""}},loadList:function(t){var e=this;t&&"init"===t&&e.initList(),Object(l.k)(e.params).then(function(o){var a=o.data,i=a.goods_list;e.pushToList(i,a.page_count,t)}).catch(function(){e.loadError()})},setParams:function(t){this.params=t,this.loadList("init")}},components:{TabSortScreen:d.a,GoodsBox:c.a}}),m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"goods-list bg-f8"},[o("Navbar",{attrs:{title:t.navBarTitle}}),t._v(" "),o("TabSortScreen",{attrs:{"set-params":t.setParams}}),t._v(" "),o("List",{attrs:{finished:t.finished,error:t.error,"is-empty":t.isListEmpty,empty:{pageType:"goods",message:"暂无商品",showFoot:!0,top:t.$store.state.isWeixin?46:90,btnLink:"/",btnText:"返回首页"}},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[o("div",{staticClass:"list"},t._l(t.list,function(t,e){return o("GoodsBox",{key:e,attrs:{id:t.goods_id,name:t.goods_name,price:t.price,sales:t.sales,"market-price":t.market_price,image:t.logo}})}))])],1)},staticRenderFns:[]};var _=o("VU/8")(u,m,!1,function(t){o("WL7V")},"data-v-52a53e95",null);e.default=_.exports},CjYO:function(t,e){},Dhl0:function(t,e){},EE33:function(t,e){},HFCM:function(t,e){},Jiox:function(t,e){},KYZ7:function(t,e){},L9ah:function(t,e){},Meda:function(t,e,o){"use strict";var a=o("nsZj"),i=(o.n(a),o("P8PS"));o.n(i)},P8PS:function(t,e){},WL7V:function(t,e){},e89B:function(t,e,o){"use strict";var a=o("WPoX"),i=o("AA6R"),s=o.n(i),n=o("o69Z"),r=o("+2ln"),c=o("rhik"),d=o("n8HW"),l=Object(n.k)("goods-action-mini-btn"),p=l[0],u=l[1];function m(t,e,o,a){return t("div",s()([{class:[u(),"van-hairline"],on:{click:function(t){Object(c.a)(a,"click",t),Object(d.a)(a)}}},Object(c.b)(a)]),[t(r.a,{class:[u("icon"),e.iconClass],attrs:{tag:"div",info:e.info,name:e.icon}}),o.default?o.default():e.text])}m.props=Object(a.a)({},d.c,{text:String,icon:String,info:[String,Number],iconClass:null}),e.a=p(m)},eR4i:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("eKM9"),i=o("qsHl"),s=o("WmBJ"),n=o("oFuF"),r=Object(a.a)({name:"goods-share",data:function(){return{imgUrl:"",goods_detail:{},buildImgLoading:""}},computed:{navBarTitle:function(){var t=this.goods_detail.goods_name;return t&&(document.title=t),t},maxHeight:function(){return{maxHeight:document.body.offsetWidth+"px"}},goodsPrice:function(){this.goods_detail.member_discount;var t=this.goods_detail.limit_discount;return(parseFloat(this.goods_detail.price)*t).toFixed(2)},discountText:function(){var t=this.goods_detail.member_discount,e=this.goods_detail.limit_discount,o=!1;return 1===t&&1===e||(o="折扣价"),o},shareUrl:function(){var t=Object(n.s)(this.$route.query)?"?":"&",e=this.$store.state.domain+"/wap/goods/detail/"+this.goods_detail.goods_id;this.channel_id&&(e=e+"?channel_id="+this.channel_id);return this.$store.getters.extend_code?""+e+t+"extend_code="+this.$store.getters.extend_code:""+e},channel_id:function(){return!!this.$route.query.channel_id&&this.$route.query.channel_id}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this,e=this;Object(i.l)(e.$route.params.goodsid).then(function(o){var a=o.data;e.goods_detail=a,e.onShare({title:e.goods_detail.goods_name,desc:"我刚刚在"+e.$store.getters.config.mall_name+"发现了一个很不错的商品，赶快来看看吧。",imgUrl:e.$BASESRC(e.goods_detail.image),link:e.shareUrl}).then(function(){Object(n.f)(e.goods_detail.image).then(function(o){o&&(e.goods_detail.image=o),e.$refs.load.success(),e.$nextTick(function(){e.$store.dispatch("buildImg",t.$refs.imageWrapper).then(function(t){e.imgUrl=t})})})})}).catch(function(){e.$refs.load.fail()})},onToast:function(t){var e="pic"==t?"长按图片保存到手机分享":"右上角分享或复制链接分享";this.$Toast(e)}},components:{Qrcode:s.a}}),c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Layout",{ref:"load",staticClass:"goods-share bg-f8"},[o("Navbar",{attrs:{title:t.navBarTitle}}),t._v(" "),t.imgUrl?o("div",{staticClass:"poster-box"},[o("img",{staticClass:"poster-img",attrs:{src:t.imgUrl}})]):t._e(),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgUrl,expression:"!imgUrl"}],ref:"imageWrapper",staticClass:"head"},[o("div",{staticClass:"banner",style:t.maxHeight},[o("img",{attrs:{src:t.goods_detail.image,onerror:t.$ERRORPIC.noGoods}})]),t._v(" "),o("div",{staticClass:"qr-box"},[o("Qrcode",{staticClass:"img",attrs:{options:{size:120},value:t.shareUrl,tag:"img"}}),t._v(" "),o("div",{staticClass:"fs-12 text-regular"},[t._v("(长按识别)")])],1)]),t._v(" "),o("van-cell-group",{staticClass:"cell-group"},[o("van-cell",[o("div",{staticClass:"title-share"},[o("div",{staticClass:"title"},[t._v(t._s(t.goods_detail.goods_name))])]),t._v(" "),o("div",{staticClass:"price"},[t._v("\n        "+t._s(t._f("yuan")(t.goodsPrice))+"\n        "),t._v(" "),o("small",{staticClass:"market"},[t._v(t._s(t._f("yuan")(t.goods_detail.market_price)))])])])],1),t._v(" "),o("van-cell",{staticClass:"cell"},[o("div",[t._v("分销小提示：")]),t._v(" "),o("div",[o("p",[t._v("1、当用户通过你分享的链接或图片生成交易时，则该用户会成为你的客户，同时你也会获得相应佣金分成。")]),t._v(" "),o("p",[t._v("2、佣金可在会员中心 --\x3e 分销中心进行提现。")])])]),t._v(" "),o("div",{staticClass:"foot van-hairline--top"},[o("van-row",{staticClass:"box",attrs:{type:"flex",justify:"space-around"}},[o("van-col",{attrs:{span:"12 van-hairline--right"},nativeOn:{click:function(e){t.onToast("pic")}}},[t._v("图片分享")]),t._v(" "),o("van-col",{attrs:{span:"12"},nativeOn:{click:function(e){t.onToast("link")}}},[t._v("链接分享")])],1)],1)],1)},staticRenderFns:[]};var d=o("VU/8")(r,c,!1,function(t){o("eRRE")},"data-v-e7e64cc2",null);e.default=d.exports},eRRE:function(t,e){},kp1X:function(t,e,o){"use strict";var a={data:function(){return{tag:[{name:"推荐",type:"is_recommend",selected:!1},{name:"新品",type:"is_new",selected:!1},{name:"热卖",type:"is_hot",selected:!1},{name:"促销",type:"is_promotion",selected:!1},{name:"包邮",type:"is_shipping_free",selected:!1}],params:{min_price:"",max_price:"",is_recommend:0,is_new:0,is_hot:0,is_promotion:0,is_shipping_free:0}}},props:{show:Boolean,default:!1},methods:{tagSelect:function(t,e){this.tag[t].selected=!e,this.params[this.tag[t].type]=this.tag[t].selected?1:0},closePopup:function(){this.$emit("popup",!1)},onReset:function(){this.params.min_price="",this.params.max_price="",this.params.is_recommend=0,this.params.is_new=0,this.params.is_hot=0,this.params.is_promotion=0,this.params.is_shipping_free=0,this.tag.forEach(function(t){t.selected=!1})},onOonfirm:function(){this.params.min_price=this.params.min_price?parseFloat(this.params.min_price):"",this.params.max_price=this.params.max_price?parseFloat(this.params.max_price):"",this.$emit("screen",this.params)}}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("van-popup",{attrs:{position:"right","close-on-click-overlay":!1},on:{"click-overlay":t.closePopup},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("div",{staticClass:"screen-popup"},[o("div",{staticClass:"screen-condition"},[o("div",{staticClass:"btn-group"},t._l(t.tag,function(e,a){return o("div",{key:a,staticClass:"btn-box"},[o("van-button",{staticClass:"btn",attrs:{size:"small",block:"",type:e.selected?"danger":"default"},on:{click:function(o){t.tagSelect(a,e.selected)}}},[t._v(t._s(e.name))])],1)})),t._v(" "),o("div",{staticClass:"price-range"},[t._v("价格区间")]),t._v(" "),o("div",{staticClass:"condition-group"},[o("div",{staticClass:"input-group"},[o("van-field",{attrs:{type:"number",placeholder:"最低价"},model:{value:t.params.min_price,callback:function(e){t.$set(t.params,"min_price",e)},expression:"params.min_price"}}),t._v(" "),o("span",{staticClass:"input-group-addon"},[t._v("~")]),t._v(" "),o("van-field",{attrs:{type:"number",placeholder:"最高价"},model:{value:t.params.max_price,callback:function(e){t.$set(t.params,"max_price",e)},expression:"params.max_price"}})],1)])]),t._v(" "),o("div",{staticClass:"foot"},[o("div",{staticClass:"btn reset e-handle",on:{click:t.onReset}},[t._v("重置")]),t._v(" "),o("div",{staticClass:"btn sub e-handle",on:{click:t.onOonfirm}},[t._v("确定")])])])])},staticRenderFns:[]};var s=o("VU/8")(a,i,!1,function(t){o("KYZ7")},"data-v-28abe6bc",null).exports,n={data:function(){return{screenPopupShow:!1,tab:[{name:"默认",sort:""},{name:"销售量",icon:"v-icon-sort2",sort:"sales",sort_type:"DESC"},{name:"价格",icon:"v-icon-sort2",sort:"price",sort_type:"DESC"},{name:"筛选",icon:"v-icon-screen",sort:!1}],params:{page_index:1,page_size:10,order:"",sort:"",min_price:"",max_price:"",is_recommend:"",is_new:"",is_hot:"",is_promotion:"",is_shipping_free:"",goods_type:"",search_text:this.$route.query.search_text?this.$route.query.search_text:"",category_id:this.$route.query.category_id?this.$route.query.category_id:""}}},props:{setParams:{type:Function,default:null}},methods:{onSort:function(t){var e=this.$parent.params;e.page_index=1,e.order=this.tab[t].sort,this.tab[t].sort_type?(e.sort=this.tab[t].sort_type,"DESC"==this.tab[t].sort_type?this.tab[t].sort_type="ASC":this.tab[t].sort_type="DESC"):e.sort="",this.setParams&&this.setParams(e,"init")},onScreen:function(t){var e=this.$parent.params;e.page_index=1,e.max_price=t.max_price,e.min_price=t.min_price,e.is_recommend=t.is_recommend,e.is_new=t.is_new,e.is_hot=t.is_hot,e.is_promotion=t.is_promotion,e.is_shipping_free=t.is_shipping_free,this.isShowPopup(!1),this.setParams&&this.setParams(e,"init")},isShowPopup:function(t){this.screenPopupShow="tab"===t||t}},components:{PopupScreen:s}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tab-sort-screen"},[o("van-tabs",{on:{click:t.onSort,disabled:function(e){t.isShowPopup("tab")}}},t._l(t.tab,function(e,a){return o("van-tab",{key:a,attrs:{disabled:!1===e.sort}},[o("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.name)+"\n        "),e.icon?o("van-icon",{attrs:{name:e.icon+" "+e.sort_type}}):t._e()],1)])})),t._v(" "),o("PopupScreen",{attrs:{show:t.screenPopupShow},on:{popup:t.isShowPopup,screen:t.onScreen}})],1)},staticRenderFns:[]};var c=o("VU/8")(n,r,!1,function(t){o("5ESE")},"data-v-1ae465e0",null);e.a=c.exports},p7Nb:function(t,e){},pzvz:function(t,e,o){"use strict";var a=o("AA6R"),i=o.n(a),s=o("o69Z"),n=o("rhik"),r=Object(s.k)("goods-action"),c=r[0],d=r[1];function l(t,e,o,a){return t("div",i()([{class:d({"safe-area-inset-bottom":e.safeAreaInsetBottom})},Object(n.b)(a,!0)]),[o.default&&o.default()])}l.props={safeAreaInsetBottom:Boolean},e.a=c(l)},zTEI:function(t,e,o){"use strict";var a=o("nsZj"),i=(o.n(a),o("CjYO"));o.n(i)}});