webpackJsonp([10],{"+GXX":function(t,e,s){"use strict";var i=s("nsZj"),a=(s.n(i),s("RGxH"));s.n(a)},"+olh":function(t,e){},"/E0E":function(t,e){},"1EBJ":function(t,e){},"9U1p":function(t,e,s){"use strict";var i=s("mvHQ"),a=s.n(i),o=s("FWz8"),n=s("BuIE"),r={props:{value:{type:Boolean,default:!1},code:String,qrcode:String},methods:{onClose:function(){this.$emit("input",!1)}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-popup",{staticClass:"popup",attrs:{"close-on-click-overlay":!1},on:{"click-overlay":t.onClose},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[s("div",{staticClass:"box"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.qrcode}})]),t._v(" "),s("div",{staticClass:"code"},[t._v(t._s(t.code))]),t._v(" "),s("div",{staticClass:"text"},[t._v("提货码为提货凭证，请妥善保管")])])])},staticRenderFns:[]};var c=s("VU/8")(r,l,!1,function(t){s("XXWn")},"data-v-0e09ce8c",null).exports,d=s("oFuF"),u={data:function(){return{takeCodeShow:!1}},props:{info:{type:Object,required:!0,default:{order_id:null,order_status:null,promotion_status:null,order_refund_status:null,is_evaluate:null,member_operation:[],order_goods:[],unrefund:null,unrefund_reason:null}}},filters:{afterSaleBtnText:function(t,e){var s="";return 0===e?1===t?s="退款":2===t||3===t?s="退货/退款":-1===t&&(s="售后情况"):s="售后情况",s},operationText:function(t,e){var s=t.name;return"evaluation"===t.no&&1==e&&(s="追加评价"),"evaluation"===t.no&&2==e&&(s="已追加评价"),"pay"===t.no&&(s="立即付款"),"last_money"===t.no&&(s="付尾款"),s}},computed:{list:function(){var t=this,e=this.info.member_operation.filter(function(e){return 2!=t.info.is_evaluate?e:"evaluation"!==e.no?e:void 0});return e}},methods:{onOperation:function(t){var e=this.info.order_id;if("pay"===t)this.onPay(e);else if("getdelivery"===t)this.onTakeDelivery(e);else if("logistics"===t)this.$router.push({name:"order-logistics",params:{orderid:e}});else if("close"===t)this.onCloseOrder(e);else if("detail"===t)this.$router.push({name:"order-detail",params:{orderid:e}});else if("evaluation"===t)this.onEvaluation();else if("delete_order"===t)this.onDeleteOrder(e);else if("buy_again"===t)this.onBuyAgain(e);else if("refund"===t||"return"===t||"refund_detail"===t){var s=this.info,i=s.unrefund,a=s.unrefund_reason;if(1==i)return this.$Dialog.alert({message:a});this.onResult(e)}else if("last_money"==t){var o=this.info,n=o.can_presell_pay,r=o.can_presell_pay_reason;if(!n)return this.$Dialog.alert({message:r});this.onPayTailMoney(e)}else"pickup"==t?this.onTakeCode():"use_card"==t?this.$router.push("/consumercard/list"):this.$Toast("暂无后续逻辑")},onPay:function(t){Object(d.t)()?location.assign(this.$store.state.domain+"/wap/pay/payment?order_id="+t+"#order"):this.$router.push({name:"pay-payment",query:{order_id:t},hash:"#order"})},onTakeDelivery:function(t){var e=this;e.$Dialog.confirm({message:"确定收货吗？"}).then(function(){Object(o.g)(t).then(function(t){e.$emit("callback",t)})})},onCloseOrder:function(t){var e=this;e.$Dialog.confirm({message:"确定关闭该订单吗？"}).then(function(){Object(o.f)(t).then(function(t){e.$emit("callback",t)})})},onDeleteOrder:function(t){var e=this;e.$Dialog.confirm({message:"确定删除该订单吗？"}).then(function(){Object(o.i)(t).then(function(t){e.$emit("callback",t)})})},onEvaluation:function(){var t={};t.shop={shop_id:this.info.shop_id,shop_name:this.info.shop_name},t.goods=[],this.info.order_goods.forEach(function(e){var s={};s.id=e.order_goods_id,s.img=e.pic_cover,s.name=e.goods_name,s.score=5,s.evaluate="",s.arrImg=[],t.goods.push(s)}),(this.info.store_id||this.info.card_store_id)&&(t.store_id=this.info.store_id?this.info.store_id:this.info.card_store_id),this.$router.push({name:"order-evaluate",params:{orderid:this.info.order_id},query:{order_info:Object(n.b)(a()(t))},hash:1==this.info.is_evaluate?"#again":""})},onBuyAgain:function(t){var e=this,s=[];e.info.order_goods.forEach(function(t){var e={};e.sku_id=t.sku_id,e.num=t.num,s.push(e)}),Object(o.a)({cart:s}).then(function(t){e.$Toast("添加成功，请到购物车结算"),setTimeout(function(){e.$router.push("/mall/cart")},1e3)})},onResult:function(t){this.$router.push({name:"order-post",query:{order_id:t}})},onPayTailMoney:function(t){var e=this;Object(o.q)({order_id:t}).then(function(t){var s=t.data;Object(d.t)()?location.assign(e.$store.state.domain+"/wap/pay/payment?out_trade_no="+s.out_trade_no):e.$router.push({name:"pay-payment",query:{out_trade_no:s.out_trade_no}})})},onTakeCode:function(){this.takeCodeShow=!0}},components:{PopupTakeCode:c}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-row",{staticClass:"btn-group",attrs:{type:"flex",justify:"end"}},[t._l(t.list,function(e,i){return s("van-button",{key:i,staticClass:"btn",attrs:{type:"pay"===e.no||"last_money"===e.no?"danger":"default",size:"small"},on:{click:function(s){t.onOperation(e.no)}}},[t._v(t._s(t._f("operationText")(e,t.info.is_evaluate)))])}),t._v(" "),t.info.verification_code&&1==t.info.order_status?s("PopupTakeCode",{attrs:{code:t.info.verification_code,qrcode:t.info.verification_qrcode},model:{value:t.takeCodeShow,callback:function(e){t.takeCodeShow=e},expression:"takeCodeShow"}}):t._e()],2)},staticRenderFns:[]};var p=s("VU/8")(u,_,!1,function(t){s("JT9V")},"data-v-13ddc78d",null);e.a=p.exports},"B/3N":function(t,e){},Bp9H:function(t,e){},DzEa:function(t,e){},Ehu1:function(t,e){},FQHV:function(t,e){},FmEr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("bOdI"),a=s.n(i),o=(s("nsZj"),s("1EBJ"),s("AA6R")),n=s.n(o),r=s("o69Z"),l=s("rhik"),c=s("sM86"),d=s("+2ln"),u=Object(r.k)("rate"),_=u[0],p=u[1];function f(t,e,s,i){for(var a,o,r,u=e.icon,_=e.size,f=e.color,v=e.voidIcon,h=e.readonly,m=e.disabled,g=e.voidColor,y=e.disabledColor,b=[],x=1;x<=e.count;x++)b.push((a=e.value,o=x,r=e.allowHalf,a>=o?"full":a+.5>=o&&r?"half":"void"));function C(t){m||h||(Object(l.a)(i,"input",t),Object(l.a)(i,"change",t))}return t("div",n()([{class:p()},Object(l.b)(i),{on:{touchmove:function(t){if(!h&&!m&&document.elementFromPoint){Object(c.c)(t);var e=t.touches[0],s=e.clientX,i=e.clientY,a=document.elementFromPoint(s,i);if(a&&a.dataset){var o=a.dataset.score;o&&C(+o)}}}}}]),[b.map(function(s,i){return function(s,i){var a="full"===s,o="void"===s;return t("div",{key:i,class:p("item")},[t(d.a,{attrs:{name:a?u:v,size:_+"px","data-score":i+1,color:m?y:a?f:g},class:p("icon"),on:{click:function(){C(i+1)}}}),e.allowHalf&&t(d.a,{attrs:{name:o?v:u,size:_+"px","data-score":i+.5,color:m?y:o?g:f},class:p("icon","half"),on:{click:function(){C(i+.5)}}})])}(s,i)})])}f.props={value:Number,readonly:Boolean,disabled:Boolean,allowHalf:Boolean,size:{type:Number,default:20},icon:{type:String,default:"star"},voidIcon:{type:String,default:"star-o"},color:{type:String,default:"#ffd21e"},voidColor:{type:String,default:"#c7c7c7"},disabledColor:{type:String,default:"#bdbdbd"},count:{type:Number,default:5}};var v=_(f),h=s("eKM9"),m=s("J68u"),g=s("ADxc"),y=s("BuIE"),b=s("FWz8"),x=(s("T452"),Object(h.a)({name:"order-evaluate",data:function(){return{order_info:{},praiseArr:[{text:"好评",icon:"praise",score:5,checked:!0},{text:"中评",icon:"review",score:3,checked:!1},{text:"差评",icon:"review",score:1,checked:!1}],shop_desc:0,shop_service:0,shop_stic:0,store_service:0,isLoading:!1}},computed:{isAgain:function(){return!(!this.$route.hash||"#again"!=this.$route.hash)},isStore:function(){return!!this.order_info.store_id}},created:function(){this.order_info=JSON.parse(Object(y.a)(this.$route.query.order_info))},mounted:function(){var t=this;setTimeout(function(){t.$refs.load.success()},500)},methods:{onUploadFinish:function(t,e){var s=t.src;this.order_info.goods[parseInt(e)].arrImg.push(s)},onPraise:function(t,e){this.order_info.goods[t].score=e},onSubmit:function(){var t=this,e=[];t.order_info.goods.forEach(function(s){var i={};i.order_goods_id=s.id,i.content=s.evaluate,t.isAgain||(i.explain_type=s.score),i.images=s.arrImg,e.push(i)});var s={};s.order_id=t.$route.params.orderid,s.goods_evaluate=e,!t.isAgain&&t.shop_desc&&(s.shop_desc=t.shop_desc),!t.isAgain&&t.shop_service&&(s.shop_service=t.shop_service),!t.isAgain&&t.shop_stic&&(s.shop_stic=t.shop_stic),!t.isAgain&&t.isStore&&t.store_service&&(s.store_service=t.store_service),t.isLoading=!0,t.isAgain?Object(b.b)(s).then(function(e){var s=e.message;t.$Toast.success(s),t.$router.replace({name:"order-detail",params:{orderid:t.$route.params.orderid}})}).catch(function(){t.isLoading=!1}):Object(b.c)(s).then(function(e){var s=e.message;t.$Toast.success(s),t.$router.replace({name:"order-detail",params:{orderid:t.$route.params.orderid}})}).catch(function(){t.isLoading=!1})}},components:a()({UploadImages:m.a,ImagePanelPreview:g.a},v.name,v)})),C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Layout",{ref:"load",staticClass:"order-evaluate bg-f8"},[s("Navbar"),t._v(" "),s("div",{staticClass:"evaluate"},[s("van-cell",{attrs:{icon:"shop-o",title:t.order_info.shop.shop_name,border:!1}}),t._v(" "),t._l(t.order_info.goods,function(e,i){return s("van-cell-group",{key:i,staticClass:"items"},[s("van-cell",[s("van-row",{attrs:{type:"flex"}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:e.img,onerror:t.$ERRORPIC.noGoods}})]),t._v(" "),t.isAgain?s("div",{staticClass:"name"},[t._v(t._s(e.name))]):s("div",{staticClass:"praise"},t._l(t.praiseArr,function(a,o){return s("van-col",{key:o,staticClass:"item",class:e.score===a.score?"active":"",nativeOn:{click:function(e){t.onPraise(i,a.score)}}},[s("van-icon",{attrs:{name:"v-icon-"+a.icon}}),t._v(" "),s("span",[t._v(t._s(a.text))])],1)}))])],1),t._v(" "),s("van-field",{attrs:{type:"textarea",placeholder:"分享你购买到此商品的想法与心情",rows:"4",autosize:""},model:{value:e.evaluate,callback:function(s){t.$set(e,"evaluate",s)},expression:"item.evaluate"}}),t._v(" "),s("van-cell",[s("van-row",{staticClass:"upload-img",attrs:{type:"flex",justify:"space-between"}},[s("ImagePanelPreview",{staticClass:"img-box",attrs:{list:e.arrImg}}),t._v(" "),s("UploadImages",{attrs:{name:String(i),total:e.arrImg.length,multiple:"",type:"evaluate"},on:{finish:t.onUploadFinish}})],1)],1)],1)})],2),t._v(" "),!t.isAgain&&t.$store.state.config.addons.shop?s("div",{staticClass:"score"},[s("van-cell-group",[s("van-cell",{attrs:{icon:"shop-o",title:"店铺评分"}}),t._v(" "),s("van-cell",[s("van-row",{staticClass:"item",attrs:{type:"flex"}},[s("div",{staticClass:"text"},[t._v("描述相符")]),t._v(" "),s("van-rate",{model:{value:t.shop_desc,callback:function(e){t.shop_desc=e},expression:"shop_desc"}})],1),t._v(" "),s("van-row",{staticClass:"item",attrs:{type:"flex"}},[s("div",{staticClass:"text"},[t._v("物流服务")]),t._v(" "),s("van-rate",{model:{value:t.shop_stic,callback:function(e){t.shop_stic=e},expression:"shop_stic"}})],1),t._v(" "),s("van-row",{staticClass:"item",attrs:{type:"flex"}},[s("div",{staticClass:"text"},[t._v("服务态度")]),t._v(" "),s("van-rate",{model:{value:t.shop_service,callback:function(e){t.shop_service=e},expression:"shop_service"}})],1)],1)],1)],1):t._e(),t._v(" "),!t.isAgain&&t.isStore?s("div",{staticClass:"score"},[s("van-cell-group",[s("van-cell",{attrs:{icon:"shop-o",title:"门店评分"}}),t._v(" "),s("van-cell",[s("van-row",{staticClass:"item",attrs:{type:"flex"}},[s("div",{staticClass:"text"},[t._v("服务态度")]),t._v(" "),s("van-rate",{model:{value:t.store_service,callback:function(e){t.store_service=e},expression:"store_service"}})],1)],1)],1)],1):t._e(),t._v(" "),s("div",{staticClass:"foot-btn-group"},[s("van-button",{attrs:{size:"normal",round:"",type:"danger",block:"",loading:t.isLoading},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var k=s("VU/8")(x,C,!1,function(t){s("aSgA")},"data-v-910b0594",null);e.default=k.exports},IaLg:function(t,e){},"Ib/F":function(t,e){},JJcu:function(t,e,s){"use strict";var i={props:{items:Object},filters:{toNumber:function(t){return parseFloat(t)}},methods:{discount:function(t){return parseFloat(t)>0}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-cell",{staticClass:"discount-group"},[t.items.man_song_id&&parseFloat(t.items.discount)>0?s("div",{staticClass:"item"},[s("div",{staticClass:"box"},[s("van-tag",{attrs:{type:"danger"}},[t._v("满减")]),t._v(" "),s("span",{staticClass:"text-nowrap"},[t._v("订单满"+t._s(t._f("toNumber")(t.items.price))+"减"+t._s(t._f("toNumber")(t.items.discount)))])],1)]):t._e(),t._v(" "),1==t.items.free_shipping?s("div",{staticClass:"item"},[s("div",{staticClass:"box"},[s("van-tag",{attrs:{type:"success"}},[t._v("包邮")]),t._v(" "),s("span",{staticClass:"text text-nowrap"},[t._v("订单满"+t._s(t._f("toNumber")(t.items.price))+"包邮")])],1)]):t._e(),t._v(" "),t.items.coupon_type_id?s("div",{staticClass:"item"},[s("div",{staticClass:"box"},[s("van-tag",{attrs:{type:"primary"}},[t._v("满送")]),t._v(" "),s("span",{staticClass:"text text-nowrap"},[t._v("订单满"+t._s(t._f("toNumber")(t.items.price))+"送优惠券("+t._s(t.items.coupon_type_name)+")")])],1)]):t._e(),t._v(" "),t.items.gift_card_id?s("div",{staticClass:"item"},[s("div",{staticClass:"box"},[s("van-tag",{attrs:{type:"primary"}},[t._v("满送")]),t._v(" "),s("span",{staticClass:"text text-nowrap"},[t._v("订单满"+t._s(t._f("toNumber")(t.items.price))+"送礼品券("+t._s(t.items.gift_voucher_name)+")")])],1)]):t._e(),t._v(" "),t.items.gift_id?s("div",{staticClass:"item"},[s("div",{staticClass:"box"},[s("van-tag",{attrs:{type:"primary"}},[t._v("满送")]),t._v(" "),s("span",{staticClass:"text text-nowrap"},[t._v("订单满"+t._s(t._f("toNumber")(t.items.price))+"送赠品("+t._s(t.items.gift_name)+")")])],1)]):t._e()])},staticRenderFns:[]};var o=s("VU/8")(i,a,!1,function(t){s("KESx")},"data-v-30fcb1ce",null);e.a=o.exports},JT9V:function(t,e){},KESx:function(t,e){},L2c0:function(t,e,s){"use strict";var i={props:{columns:Array,textAlign:{type:String,default:"left"}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-cell-group",[t._t("head"),t._v(" "),s("van-cell",t._l(t.columns,function(e,i){return s("div",{key:i,staticClass:"item"},[s("div",{staticClass:"title",style:{whiteSpace:"left"==t.textAlign?"initial":"nowrap"}},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"value",style:{textAlign:t.textAlign,color:e.color}},[t._v("\n        "+t._s(e.value)+"\n        "),e.btnText?s("van-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.$emit("onclick",i)}}},[t._v(t._s(e.btnText))]):t._e()],1)])})),t._v(" "),t._t("foot")],2)},staticRenderFns:[]};var o=s("VU/8")(i,a,!1,function(t){s("/E0E")},"data-v-934246e8",null);e.a=o.exports},LT09:function(t,e){},Lbtm:function(t,e){},Pf0w:function(t,e){},PjAf:function(t,e){},RGxH:function(t,e){},SPdX:function(t,e){},TH7r:function(t,e){},V6aL:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=s("eKM9"),o=s("bOdI"),n=s.n(o),r=(s("uCzd"),s("t8KH")),l=(s("+GXX"),s("fTPy")),c={data:function(){return{}},props:{detail:Object},components:(i={},n()(i,l.a.name,l.a),n()(i,r.a.name,r.a),i)},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0===t.detail.order_status?s("van-row",{staticClass:"head",attrs:{type:"flex",justify:"space-between"}},[s("van-col",{attrs:{span:"16"}},[s("div",{staticClass:"text pl-15"},[s("div",{staticClass:"fs-16"},[t._v("等待买家付款")]),t._v(" "),s("div",{staticClass:"fs-12"},[t._v("逾期未付款，订单将自动取消")])])]),t._v(" "),s("van-col",{attrs:{span:"8"}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.$BASEIMGPATH+"order-detail-"+t.detail.order_status+".png"}})])])],1):1===t.detail.order_status||2===t.detail.order_status||3===t.detail.order_status?s("van-row",{staticClass:"head",attrs:{type:"flex",justify:"space-between"}},[s("van-col",{attrs:{span:"16"}},[s("van-steps",{staticClass:"steps",attrs:{active:t.detail.order_status-1,"active-color":"#ffcc64"}},[s("van-step",{staticClass:"item"},[t._v("已付款")]),t._v(" "),s("van-step",{staticClass:"item"},[t._v("已发货")]),t._v(" "),s("van-step",{staticClass:"item"},[t._v("已签收")])],1)],1),t._v(" "),s("van-col",{attrs:{span:"8"}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.$BASEIMGPATH+"order-detail-"+t.detail.order_status+".png"}})])])],1):4===t.detail.order_status||5===t.detail.order_status?s("van-row",{staticClass:"head",attrs:{type:"flex",justify:"center"}},[s("van-col",{attrs:{span:"8"}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.$BASEIMGPATH+"order-detail-"+t.detail.order_status+".png"}})]),t._v(" "),s("div",{staticClass:"text text-center"},[t._v(t._s(4===t.detail.order_status?"交易完成":"订单关闭"))])])],1):-1===t.detail.order_status?s("van-row",{staticClass:"head",attrs:{type:"flex",justify:"center"}},[s("van-col",{attrs:{span:"8"}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.$BASEIMGPATH+"order-detail-"+t.detail.order_status+".png"}})]),t._v(" "),s("div",{staticClass:"text text-center"},[t._v("售后中")])])],1):6===t.detail.order_status?s("van-row",{staticClass:"head",attrs:{type:"flex",justify:"center"}},[s("van-col",{attrs:{span:"8"}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.$BASEIMGPATH+"result-pay-success.png"}})]),t._v(" "),s("div",{staticClass:"text text-center"},[t._v(t._s(t.detail.status_name))])])],1):t._e()},staticRenderFns:[]};var u=s("VU/8")(c,d,!1,function(t){s("FQHV")},"data-v-36ce6fbc",null).exports,_=s("L2c0"),p=s("oFuF"),f=s("msXN"),v={data:function(){return{showService:!1}},props:{detail:Object},mixins:[f.j],mounted:function(){var t=this;t.getKefu(t.detail.shop_id).then(function(e){t.$store.getters.token?t.loadKefu(e.domain).then(function(){t.showService=!0,t.$nextTick(function(){t.serverFlag=!0;var e=t.$store.state.member.info,s=e.uid,i=e.username,a=e.member_img,o=e.reg_time;qlkefuChat.init({uid:s,uName:i,avatar:a,regTime:o||"",goods:{goods_id:"",goods_name:"",price:"",pic_cover:""}})})}):t.showService=!0}).catch(function(){})},computed:{columns:function(){var t=this.detail,e=t.shop_name,s=t.order_status,i=t.payment_type_name,a=t.order_no,o=t.create_time,n=t.pay_time,r=t.consign_time,l=t.finish_time,c=[{title:"商家店铺",value:e},{title:"订单编号",value:a},{title:"创建时间",value:Object(p.m)(o,"s")}];return 0!==s&&5!==s&&c.splice(1,0,{title:"支付方式",value:i,color:"#ff454e"}),n&&c.push({title:"付款时间",value:Object(p.m)(n,"s")}),r&&c.push({title:"发货时间",value:Object(p.m)(r,"s")}),l&&c.push({title:"成交时间",value:Object(p.m)(l,"s")}),c}},components:{CellInfoGroup:_.a}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("CellInfoGroup",{attrs:{columns:this.columns}},[e("van-cell",{attrs:{slot:"head",icon:"orders-o",title:"订单信息"},slot:"head"}),this._v(" "),this.showService?e("van-cell",{attrs:{slot:"foot"},slot:"foot"},[e("div",{staticClass:"cell-service",attrs:{id:"WS-SHOW-CHAT"},on:{click:this.openKefu}},[e("van-icon",{attrs:{name:"v-icon-kf1"}}),this._v(" "),e("span",[this._v("联系客服")])],1)]):this._e()],1)},staticRenderFns:[]};var m=s("VU/8")(v,h,!1,function(t){s("jo1R")},"data-v-6c9a2406",null).exports,g=s("lpao"),y={props:{detail:Object},computed:{info:function(){var t=this.detail,e=t.store_id,s=t.store_name,i=t.store_tel,a=t.shop_name,o=t.receiver_name,n=t.receiver_mobile,r=t.receiver_province,l=t.receiver_city,c=t.receiver_district,d=t.receiver_address,u={};return u.title=e?"提货地址":"收货地址",u.name=e?a+"（"+s+"）":o,u.mobile=e?i:n,u.address=r+l+c+d,u}},components:{CellAddressGroup:g.a}},b={render:function(){var t=this.$createElement;return(this._self._c||t)("CellAddressGroup",{attrs:{info:this.info}})},staticRenderFns:[]},x=s("VU/8")(y,b,!1,null,null,null).exports,C={data:function(){return{}},props:{status:{type:[Number,String]},orderid:{type:[Number,String]},info:{type:Object}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return 2!==t.status&&3!==t.status&&4!==t.status||!t.info.mailNo?s("van-cell-group",[s("van-cell",[s("div",{staticClass:"empty"},[t._v("暂无物流信息")])])],1):s("van-cell-group",[s("van-cell",{staticClass:"nowrap",attrs:{icon:"v-icon-logistic6",title:t.info.expTextName+" "+t.info.mailNo,"is-link":"",value:"更多",to:{name:"order-logistics",params:{orderid:t.orderid}}}}),t._v(" "),t.info.newestInfo?s("van-cell",[s("div",{staticClass:"text"},[t._v(t._s(t.info.newestInfo.context))]),t._v(" "),s("div",{staticClass:"fs-12 text-regular"},[t._v(t._s(t.info.newestInfo.time))])]):t._e()],1)},staticRenderFns:[]};var T=s("VU/8")(C,k,!1,function(t){s("IaLg")},"data-v-154b3b4b",null).exports,$={props:{detail:Object}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("van-cell-group",[e("van-cell",{attrs:{icon:"edit",title:"买家留言"}}),this._v(" "),e("van-cell",[e("van-col",{staticClass:"text-regular fs-12",attrs:{span:"24"}},[this._v(this._s(this.detail.buyer_message?this.detail.buyer_message:"该订单没有留言"))])],1)],1)},staticRenderFns:[]},S=s("VU/8")($,w,!1,null,null,null).exports,O=s("Lo3X"),j={data:function(){return{}},props:{detail:{type:Object}},filters:{afterSaleBtnText:function(t,e){var s="";return 0===e?1===t?s="退款":2===t||3===t?s="退货/退款":-1===t&&(s="售后情况"):s="售后情况",s}},computed:{pointText:function(){return this.$store.state.member.memberSetText.point_style}},methods:{onResult:function(t){if(1==this.detail.unrefund)return this.$Dialog.alert({message:this.detail.unrefund_reason});this.$router.push({name:"order-post",query:{order_goods_id:t}})}},components:{GoodsCard:O.a}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-cell-group",[s("van-cell",{attrs:{icon:"shop-o"}},[s("van-row",{attrs:{slot:"title",type:"flex"},slot:"title"},[s("span",[t._v(t._s(t.detail.shop_name))]),t._v(" "),s("van-icon",{staticClass:"van-cell__right-icon",attrs:{name:"arrow"}})],1)],1),t._v(" "),s("van-cell",t._l(t.detail.order_goods,function(e,i){return s("GoodsCard",{key:i,staticClass:"goods-card",attrs:{to:e.goods_id&&10==t.detail.order_type?"/integral/goods/detail/"+e.goods_id:"/goods/detail/"+e.goods_id,num:e.num,price:e.price,desc:e.sku_name,title:e.goods_name,thumb:e.pic_cover}},[s("div",{staticClass:"card__bottom",attrs:{slot:"bottom"},slot:"bottom"},[e.goods_point>0?s("div",{staticClass:"card__price-group"},[e.price>0&&e.goods_point>0?s("div",{staticClass:"card__price"},[t._v(t._s(t._f("yuan")(e.price))+" + "+t._s(e.goods_point)+t._s(t.pointText))]):s("div",{staticClass:"card__price"},[t._v(t._s(e.goods_point)+t._s(t.pointText))])]):s("div",{staticClass:"card__price-group"},[e.price?s("div",{staticClass:"card__price"},[t._v(t._s(t._f("yuan")(e.price)))]):t._e()]),t._v(" "),e.num?s("div",{staticClass:"card__num"},[t._v("x "+t._s(e.num))]):t._e()]),t._v(" "),e.member_operation.length>0?s("div",{attrs:{slot:"footer"},slot:"footer"},t._l(e.member_operation,function(i,a){return s("van-button",{key:a,staticClass:"btn",attrs:{size:"mini"},on:{click:function(s){t.onResult(e.order_goods_id)}}},[t._v(t._s(i.name))])})):t._e()])}))],1)},staticRenderFns:[]};var E=s("VU/8")(j,F,!1,function(t){s("B/3N")},"data-v-33073187",null).exports,P=s("9GaH"),G={props:{detail:Object},computed:{pointText:function(){return this.$store.state.member.memberSetText.point_style},columns:function(){var t=this.detail,e=t.order_type,s=t.goods_money,i=t.order_money,a=t.order_real_money,o=t.order_point,n=t.shipping_fee,r=t.invoice,l=t.promotion_money,c=t.deduction_money,d=t.presell_status,u=t.first_real_money,_=t.final_real_money,p=[];return 10==e?s>0&&o?p=[{title:"商品总额",value:o+this.pointText+" + "+Object(P.yuan)(s),color:"#ff454e"}]:o>0&&(p=[{title:"商品总额",value:o+this.pointText,color:"#ff454e"}]):p=[{title:"商品总额",value:Object(P.yuan)(s),color:"#ff454e"}],parseFloat(c)>0&&p.push({title:this.$store.state.member.memberSetText.point_style+"抵扣",value:Object(P.yuan)(c),color:"#ff454e"}),7==e?0==d?p.push({title:"待付定金",value:u,color:"#ff454e"}):1==d?p.push({title:"已付定金",value:u,color:"#ff454e"},{title:"待付尾款(含运费"+(r.type?"税费":"")+")",value:_,color:"#ff454e"}):2==d&&(p.push({title:"已付定金",value:u,color:"#ff454e"},{title:"已付尾款",value:_,color:"#ff454e"},{title:"运费",value:Object(P.yuan)(n),color:"#ff454e"}),r.type&&p.push({title:"税费",value:Object(P.yuan)(r.tax),color:"#ff454e"}),p.push({title:"实付",value:a,color:"#ff454e"})):10==e?o>0&&i>0?p.push({title:"运费",value:Object(P.yuan)(n),color:"#ff454e"},{title:"实付",value:o+this.pointText+" + "+Object(P.yuan)(i),color:"#ff454e"}):o>0?p.push({title:"运费",value:Object(P.yuan)(n),color:"#ff454e"},{title:"实付",value:o+this.pointText,color:"#ff454e"}):p.push({title:"运费",value:Object(P.yuan)(n),color:"#ff454e"},{title:"实付",value:Object(P.yuan)(i),color:"#ff454e"}):(p.push({title:"运费",value:Object(P.yuan)(n),color:"#ff454e"},{title:"优惠金额",value:Object(P.yuan)(l),color:"#ff454e"}),r.type&&p.push({title:"税费",value:Object(P.yuan)(r.tax),color:"#ff454e"}),p.push({title:"实付",value:a,color:"#ff454e"})),p}},components:{CellInfoGroup:_.a}},L={render:function(){var t=this.$createElement;return(this._self._c||t)("CellInfoGroup",{attrs:{columns:this.columns,"text-align":"right"}})},staticRenderFns:[]},I=s("VU/8")(G,L,!1,null,null,null).exports,A=s("QGCa"),D={props:{detail:Object},components:{CodeBox:A.a}},R={render:function(){var t=this.$createElement;return(this._self._c||t)("CodeBox",{attrs:{qrcode:this.detail.verification_qrcode,code:this.detail.verification_code}})},staticRenderFns:[]};var B=s("VU/8")(D,R,!1,function(t){s("DzEa")},"data-v-6b3db59e",null).exports,N={data:function(){return{}},props:{detail:Object},mounted:function(){},computed:{columns:function(){var t=[];return this.detail.invoice.type&&t.push({title:"发票类型",value:1==this.detail.invoice.type?"电子普通发票":"增值税专用发票",btnText:this.detail.invoice.is_upload>0?"查看发票":""}),1==this.detail.invoice.type&&(this.detail.invoice.title&&t.push({title:"抬头类型",value:1==this.detail.invoice.title?"个人":"公司"}),t.push({title:"发票抬头",value:this.detail.invoice.title_name}),1!=this.detail.invoice.title&&t.push({title:"税号",value:this.detail.invoice.taxpayer_no})),2==this.detail.invoice.type&&t.push({title:"公司名称",value:this.detail.invoice.company_name},{title:"纳锐人识别号",value:this.detail.invoice.taxpayer_no},{title:"注册地址",value:this.detail.invoice.company_addr},{title:"注册电话",value:this.detail.invoice.mobile},{title:"开户银行",value:this.detail.invoice.bank},{title:"银行账户",value:this.detail.invoice.card_no}),t.push({title:"发票内容",value:this.detail.invoice.content}),t}},methods:{onJump:function(t){0==t&&this.$router.push({name:"invoice-detail",query:{order_no:this.detail.order_no,is_upload:this.detail.invoice.is_upload}})}},components:{CellInfoGroup:_.a}},z={render:function(){var t=this.$createElement,e=this._self._c||t;return this.detail.invoice.type?e("CellInfoGroup",{attrs:{columns:this.columns},on:{onclick:this.onJump}},[e("van-cell",{attrs:{slot:"head",icon:"orders-o",title:"发票信息"},slot:"head"})],1):this._e()},staticRenderFns:[]};var U=s("VU/8")(N,z,!1,function(t){s("SPdX")},"data-v-41b0f679",null).exports,V=s("xX32"),q=s("9U1p"),H=s("FWz8"),M=Object(a.a)({name:"order-detail",data:function(){return{detail:{},logistic_info:{}}},computed:{isShowAddress:function(){var t=this.detail,e=t.card_store_id,s=(t.order_type,t.is_virtual),i=t.goods_type;return!e&&!s&&3!=i&&4!=i},isShowLogistic:function(){var t=this.detail,e=t.card_store_id,s=t.store_id,i=(t.order_type,t.is_virtual),a=t.goods_type;return!e&&!s&&!i&&3!=a&&4!=a}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;Object(H.l)(t.$route.params.orderid).then(function(e){var s=e.data;if(t.detail=s,!Object(p.s)(t.detail.goods_packet_list)){var i=t.detail.goods_packet_list[0].shipping_info;if(i){var a={};a.expTextName=i.expTextName,a.mailNo=i.mailNo,a.newestInfo=Object(p.s)(i.data)?"":i.data[0],t.logistic_info=a}}t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})},onCallback:function(t){var e=t.message;this.$Toast.success(e),this.$router.replace({name:"order-list",query:{order_status:""}})}},components:{DetailHead:u,DetailInfo:m,DetailAddress:x,DetailLogistic:T,DetailMessage:S,DetailGoods:E,DetailLog:I,DetailTakeCode:B,DetailInvoice:U,FootOperation:q.a,CellAssemble:V.a}}),X={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Layout",{ref:"load",staticClass:"order-detail bg-f8"},[s("Navbar"),t._v(" "),s("DetailHead",{attrs:{detail:t.detail}}),t._v(" "),t.isShowAddress?s("DetailAddress",{staticClass:"card-group-box",attrs:{detail:t.detail}}):t._e(),t._v(" "),t.isShowLogistic?s("DetailLogistic",{staticClass:"card-group-box",attrs:{status:t.detail.order_status,orderid:t.detail.order_id,info:t.logistic_info}}):t._e(),t._v(" "),t.detail.store_id&&1==t.detail.order_status?s("DetailTakeCode",{staticClass:"card-group-box",attrs:{detail:t.detail}}):t._e(),t._v(" "),t.detail.group_record_id?s("CellAssemble",{staticClass:"card-group-box",attrs:{record_id:t.detail.group_record_id}}):t._e(),t._v(" "),s("DetailGoods",{staticClass:"card-group-box",attrs:{detail:t.detail}}),t._v(" "),s("DetailMessage",{staticClass:"card-group-box",attrs:{detail:t.detail}}),t._v(" "),s("DetailInvoice",{staticClass:"card-group-box",attrs:{detail:t.detail}}),t._v(" "),s("DetailInfo",{staticClass:"card-group-box",attrs:{detail:t.detail}}),t._v(" "),s("DetailLog",{staticClass:"card-group-box",attrs:{detail:t.detail}}),t._v(" "),t.detail.member_operation&&t.detail.member_operation.length>0?s("div",{staticClass:"foot"},[s("FootOperation",{attrs:{info:t.detail},on:{callback:t.onCallback}})],1):t._e()],1)},staticRenderFns:[]};var J=s("VU/8")(M,X,!1,function(t){s("YRNY")},"data-v-ba53db8c",null);e.default=J.exports},XXWn:function(t,e){},YRNY:function(t,e){},aSgA:function(t,e){},fTPy:function(t,e,s){"use strict";var i=s("o69Z"),a=s("+2ln"),o=Object(i.k)("step"),n=o[0],r=o[1];e.a=n({beforeCreate:function(){var t=this.$parent.steps,e=this.$parent.slots().indexOf(this.$vnode);t.splice(-1===e?t.length:e,0,this)},beforeDestroy:function(){var t=this.$parent.steps.indexOf(this);t>-1&&this.$parent.steps.splice(t,1)},computed:{status:function(){var t=this.$parent.steps.indexOf(this),e=this.$parent.active;return t<e?"finish":t===e?"process":void 0}},render:function(t){var e,s=this.status,i=this.$parent,o=i.activeIcon,n=i.activeColor,l=i.direction,c="process"===s&&{color:n};return t("div",{class:["van-hairline",r([l,(e={},e[s]=s,e)])]},[t("div",{class:r("title"),style:c},[this.slots()]),t("div",{class:r("circle-container")},["process"!==s?t("i",{class:r("circle")}):this.slots("active-icon")||t(a.a,{attrs:{name:o},style:{color:n}})]),t("div",{class:r("line")})])}})},gUuH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=s("bOdI"),o=s.n(a),n=(s("uCzd"),s("t8KH")),r=(s("+GXX"),s("fTPy")),l=s("eKM9"),c=s("FWz8"),d=s("oFuF"),u=Object(l.a)({name:"order-logistics",data:function(){return{active:0,order_no:"",packet_list:[]}},computed:{headInfo:function(){var t={},e=this.packet_list[this.active];return Object(d.s)(e)||(t.express_company_logo=e.express_company_logo,t.mailNo=e.shipping_info?e.shipping_info.mailNo:"暂无快递公司",t.expTextName=e.shipping_info?e.shipping_info.expTextName:"暂无快递单号"),t},isShowTitle:function(){return this.packet_list.length>1?"":"hidden"}},mounted:function(){var t=this;Object(c.k)(t.$route.params.orderid).then(function(e){t.order_no=e.data.order_no,t.packet_list=e.data.goods_packet_list,t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})},components:(i={},o()(i,r.a.name,r.a),o()(i,n.a.name,n.a),i)}),_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Layout",{ref:"load",staticClass:"order-logistics bg-f8"},[s("Navbar"),t._v(" "),s("van-cell-group",{staticClass:"head"},[s("van-cell",[s("van-row",{staticClass:"box",attrs:{type:"flex"}},[s("van-col",{staticClass:"img",attrs:{span:"8"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.headInfo.express_company_logo,expression:"headInfo.express_company_logo"}],key:t.headInfo.express_company_logo,attrs:{"pic-type":"shop"}})]),t._v(" "),s("van-col",{staticClass:"text",attrs:{span:"16"}},[s("div",[t._v("\n            订单编号：\n            "),s("span",[t._v(t._s(t.order_no))])]),t._v(" "),s("div",[t._v("\n            快递公司：\n            "),s("span",[t._v(t._s(t.headInfo.expTextName))])]),t._v(" "),s("div",[t._v("\n            快递单号：\n            "),s("span",[t._v(t._s(t.headInfo.mailNo))])])])],1)],1)],1),t._v(" "),s("van-tabs",{staticClass:"info",class:t.isShowTitle,model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.packet_list,function(e,i){return s("van-tab",{key:i,attrs:{title:e.packet_name}},[e.shipping_info.expTextName?s("van-steps",{attrs:{direction:"vertical",active:0,"active-color":"chocolate"}},t._l(e.shipping_info.data,function(e,i){return s("van-step",{key:i},[s("div",{staticClass:"mb-06"},[t._v(t._s(e.context))]),t._v(" "),s("div",{staticClass:"fs-12"},[t._v(t._s(e.time))])])})):s("div",{staticClass:"empty"},[t._v("暂无物流信息")])],1)}))],1)},staticRenderFns:[]};var p=s("VU/8")(u,_,!1,function(t){s("mzbF")},"data-v-45969141",null);e.default=p.exports},gd2u:function(t,e){},gzPa:function(t,e){},h5xq:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),o=s("woOf"),n=s.n(o),r=s("eKM9"),l=s("ORU3"),c=s("Lo3X"),d=s("9U1p"),u=s("oFuF"),_=s("9GaH"),p={data:function(){return{}},props:{items:{type:Object}},filters:{filterSpec:function(t){if(Object(u.s)(t))return"";var e=[];return t.forEach(function(t){var s=t.spec_name+" "+t.spec_value_name;e.push(s)}),e.join(" , ")},afterSaleBtnText:function(t,e){var s="";return 0===e?1===t?s="退款":2===t||3===t?s="退货/退款":-1===t&&(s="售后情况"):s="售后情况",s}},computed:{pointText:function(){return this.$store.state.member.memberSetText.point_style},payText:function(){var t="",e=this.items,s=e.order_type,i=e.order_money,a=e.order_real_money,o=e.order_point;10==s?t=(parseFloat(i)?Object(_.yuan)(i)+" + ":"")+(o?o+this.pointText:""):t=a;return t}},methods:{onResult:function(t){var e=this.items,s=e.unrefund,i=e.unrefund_reason;if(1==s)return this.$Dialog.alert({message:i});this.$router.push({name:"order-post",query:{order_goods_id:t}})},onCallback:function(t){this.$emit("init-list",t)}},components:{GoodsCard:c.a,FootOperation:d.a}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-cell-group",{staticClass:"item card-group-box",attrs:{border:!1}},[s("van-cell",{attrs:{icon:"shop-o",value:t.items.status_name,"value-class":"text-maintone"}},[s("van-row",{attrs:{slot:"title",type:"flex"},slot:"title"},[s("span",[t._v(t._s(t.items.shop_name))]),t._v(" "),s("van-icon",{staticClass:"van-cell__right-icon",attrs:{name:"arrow"}})],1)],1),t._v(" "),s("van-cell",t._l(t.items.order_goods,function(e,i){return s("GoodsCard",{key:i,staticClass:"goods-card",attrs:{to:e.goods_id&&10==t.items.order_type?"/integral/goods/detail/"+e.goods_id:"/goods/detail/"+e.goods_id,lazyLoad:"",desc:t._f("filterSpec")(e.spec),num:e.num,price:e.price,title:e.goods_name,thumb:e.pic_cover}},[s("div",{staticClass:"card__bottom",attrs:{slot:"bottom"},slot:"bottom"},[e.goods_point>0?s("div",{staticClass:"card__price-group"},[e.price>0&&e.goods_point>0?s("div",{staticClass:"card__price"},[t._v("\n            "+t._s(t._f("yuan")(e.price))+" + "+t._s(e.goods_point)+t._s(t.pointText)+"\n          ")]):s("div",{staticClass:"card__price"},[t._v("\n            "+t._s(e.goods_point)+t._s(t.pointText)+"\n          ")])]):s("div",{staticClass:"card__price-group"},[e.price?s("div",{staticClass:"card__price"},[t._v("\n            "+t._s(t._f("yuan")(e.price))+"\n          ")]):t._e()]),t._v(" "),e.num?s("div",{staticClass:"card__num"},[t._v("x "+t._s(e.num))]):t._e()]),t._v(" "),e.member_operation&&e.member_operation.length>0?s("div",{attrs:{slot:"footer"},slot:"footer"},t._l(e.member_operation,function(i,a){return s("van-button",{key:a,staticClass:"btn",attrs:{size:"mini"},on:{click:function(s){t.onResult(e.order_goods_id)}}},[t._v(t._s(i.name))])})):t._e()])})),t._v(" "),s("van-cell",[s("van-row",{staticClass:"van-cell__value",attrs:{type:"flex",justify:"end"}},[s("van-col",[0!==t.items.order_status?s("span",{staticClass:"pay-type-text"},[t._v(t._s(t.items.pay_type_name))]):t._e(),t._v(" "),s("span",[t._v(t._s(0===t.items.order_status?"待支付":"实付"))]),t._v(":\n        "),s("span",{staticClass:"pay-money-text"},[t._v(t._s(t.payText))])])],1)],1),t._v(" "),s("van-cell",[s("FootOperation",{attrs:{info:t.items},on:{callback:t.onCallback}})],1)],1)},staticRenderFns:[]};var v=s("VU/8")(p,f,!1,function(t){s("TH7r")},"data-v-6d5e0288",null).exports,h=s("FWz8"),m=s("msXN"),g=Object(r.a)({name:"order-list",data:function(){return{active:0,tabs:[{name:"全部",status:""},{name:"待付款",status:0},{name:"待发货",status:1},{name:"待收货",status:2},{name:"待评价",status:-2},{name:"售后",status:-1}]}},mixins:[m.e],created:function(){this.isFirstEnter=!0},beforeRouteEnter:function(t,e,s){-1!=["order-detail","order-evaluate","order-logistics","order-post","consumercard-list","pay-payment"].indexOf(e.name)&&(t.meta.isBack=!0),s()},mounted:function(){},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||(this.params=n()(this.params,a()({},this.getParams())),this.active=this.getTabActive(),this.loadList("init")),this.$route.meta.isBack=!1,this.isFirstEnter=!1},methods:{getParams:function(){return{order_status:void 0==this.$route.query.status?"":this.$route.query.status,search_text:""}},getTabActive:function(){var t=this.$route.query,e=0;if(!Object(u.s)(t)){var s=parseInt(t.status);isNaN(s)||(0===s?e=1:1===s?e=2:2===s?e=3:-2===s?e=4:-1===s&&(e=5))}return e},onTab:function(t){var e=this.tabs[t].status;this.params.order_status=e,this.$router.replace({name:"order-list",query:{status:e}}),this.loadList("init")},onSearch:function(t){this.params.search_text=t,this.loadList("init")},loadList:function(t){var e=this;t&&"init"===t&&e.initList(),Object(h.n)(e.params).then(function(s){var i=s.data,a=i.order_list.map(function(t){return t.order_goods=t.order_item_list,t});e.pushToList(a,i.page_count,t)}).catch(function(){e.loadError()})},onInitList:function(t){var e=t.message,s=this;s.$Toast.success({message:e,forbidClick:!0}),setTimeout(function(){s.loadList("init")},500)}},components:{HeadTab:l.a,OrderPanelGroup:v}}),y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-list bg-f8"},[s("Navbar"),t._v(" "),s("HeadTab",{attrs:{tabs:t.tabs,"search-placeholder":"订单号/店铺名称/商品名称","show-search":"","search-text":t.params.search_text},on:{"tab-change":t.onTab,search:t.onSearch},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}}),t._v(" "),s("List",{staticClass:"list",attrs:{finished:t.finished,error:t.error,"is-empty":t.isListEmpty,empty:{pageType:"order",message:"没有相关订单",showFoot:!0,btnLink:"/goods/list",btnText:"去购物"}},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,i){return s("OrderPanelGroup",{key:i,attrs:{items:e},on:{"init-list":t.onInitList}})}))],1)},staticRenderFns:[]};var b=s("VU/8")(g,y,!1,function(t){s("gzPa")},"data-v-5ceb9fcb",null);e.default=b.exports},jSj2:function(t,e){},jo1R:function(t,e){},kAb5:function(t,e){},m3LI:function(t,e,s){"use strict";var i=s("JLLx"),a={data:function(){return{}},props:{value:{type:Boolean,default:!1},store_id:[String,Number],list:Array},filters:{distance:function(t){return t+"km"}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},active:{get:function(){return this.store_id&&Number(this.store_id)},set:function(t){}}},methods:{close:function(){this.$emit("input",!1)},select:function(t){this.$emit("select",t),this.close()}},components:{PopupBottom:i.a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("PopupBottom",{attrs:{fullScreen:"",showFootClose:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("van-radio-group",{staticClass:"list",model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("van-cell-group",{attrs:{border:!1}},t._l(t.list,function(e,i){return s("van-cell",{key:i,attrs:{clickable:""}},[s("van-radio",{staticClass:"item",attrs:{name:e.store_id},on:{click:function(s){t.select(e)}}},[s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[s("van-col",{attrs:{span:"18"}},[t._v(t._s(e.store_name))]),t._v(" "),s("van-col",{staticClass:"distance",attrs:{span:"6"}},[t._v(t._s(t._f("distance")(e.distance)))])],1),t._v(" "),s("div",{staticClass:"detail"},[s("van-col",{attrs:{span:"24"}},[t._v(t._s(e.province_name+e.city_name+e.dictrict_name+e.address))])],1)])])],1)}))],1)],1)},staticRenderFns:[]};var n=s("VU/8")(a,o,!1,function(t){s("vvrX")},"data-v-4eaf9136",null);e.a=n.exports},mzbF:function(t,e){},nCFg:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("bOdI"),a=s.n(i),o=(s("10Qn"),s("UQoe")),n=s("mvHQ"),r=s.n(n),l=s("//Fk"),c=s.n(l),d=s("eKM9"),u=s("d/4A"),_=s("c5oL"),p=s("m3LI"),f=s("OQ2V"),v=s("Lo3X"),h=s("bp/4"),m=s("JJcu"),g={props:{info:Object}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-cell",[s("div",{staticClass:"presell-info"},[s("div",{staticClass:"front-item"},[s("span",{staticClass:"sort"},[t._v("1")]),t._v(" "),s("div",{staticClass:"money"},[s("span",[t._v("定金")]),t._v("\n        "+t._s(t._f("yuan")(t.info.frontMoney))+"\n      ")])]),t._v(" "),s("div",[s("span",{staticClass:"sort"},[t._v("2")]),t._v(" "),s("div",{staticClass:"money"},[s("span",[t._v("尾款"+t._s(t.info.tailText))]),t._v("\n        "+t._s(t._f("yuan")(t.info.tailMoney))+"\n        "),s("span",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(t.info.pay_start_time)))]),t._v("开始支付\n      ")])])])])},staticRenderFns:[]};var b=s("VU/8")(g,y,!1,function(t){s("omRF")},"data-v-7f57c02a",null).exports,x=s("L2c0"),C={data:function(){return{checked:!1}},props:{isPointDeduct:Boolean,info:Object},watch:{"info.total_deduction_money":function(t){parseFloat(t)<=0&&(this.checked=!1)}},computed:{isDisabled:function(){return!(this.isPointDeduct&&parseFloat(this.info.total_deduction_money)>0)},pointDeductMoney:function(){return this.checked?this.info.total_deduction_money:0}},methods:{onChange:function(t){this.$emit("load-data",t)}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isPointDeduct?s("van-cell-group",[s("van-cell",{attrs:{center:""}},[s("van-checkbox",{staticClass:"flex-auto-center",attrs:{slot:"icon",disabled:t.isDisabled,"label-disabled":t.isDisabled,name:"point",shape:"square"},on:{change:t.onChange},slot:"icon",model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v(t._s(t.$store.state.member.memberSetText.point_style))]),t._v(" "),s("div",{staticClass:"text"},[t._v("共"+t._s(t.info.point)+t._s(t.$store.state.member.memberSetText.point_style)+"，可使用"+t._s(t.info.total_deduction_point)+"个")]),t._v(" "),s("div",{staticClass:"money",attrs:{slot:"right-icon"},slot:"right-icon"},[t._v("- "+t._s(t._f("yuan")(t.pointDeductMoney)))])],1)],1):t._e()},staticRenderFns:[]};var T=s("VU/8")(C,k,!1,function(t){s("Bp9H")},"data-v-118dbb39",null).exports,$=s("JLLx"),w={data:function(){return{title:"支付方式",show:!1,items:[{name:"在线支付",label:"支持余额、微信、支付宝、银行卡",type:1},{name:"货到付款",label:"收货时线下付款，更便捷",type:0}]}},props:{value:{type:Number,default:1}},computed:{text:function(){var t=this;return this.items.filter(function(e){return e.type==t.value})[0].name}},methods:{onClose:function(){this.show=!1},onSelect:function(t){this.$emit("input",t),this.onClose()}},components:{PopupBottom:$.a}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-cell-group",{staticClass:"cell-group"},[s("van-cell",{attrs:{title:t.title,"is-link":"",value:t.text},on:{click:function(e){t.show=!0}}}),t._v(" "),s("PopupBottom",{attrs:{title:t.title},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("van-radio-group",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[s("van-cell-group",t._l(t.items,function(e,i){return s("van-cell",{key:i,attrs:{center:"",title:e.name,label:e.label,clickable:""},on:{click:function(s){t.onSelect(e.type)}}},[s("van-radio",{attrs:{slot:"right-icon",name:e.type},slot:"right-icon"})],1)}))],1)],1)],1)},staticRenderFns:[]};var O=s("VU/8")(w,S,!1,function(t){s("+olh")},"data-v-406c54d9",null).exports,j={data:function(){return{title:"发票",show:!1,value:"",headername:"",head_taxpayer_no:"",company_name:"",com_taxpayer_no:"",logon_addr:"",logon_phone:"",bank:"",card_no:"",is_bill_type_active:1,is_bill_head_active:0,bill_head_list:[{title:"个人"},{title:"公司"}],is_bill_content_active:0,bill_content_list:[{title:"商品明细",content:"发票内容将显示商品名称与价格信息，发票金额为实际支付金额，不含优惠抵扣金额与运费。"},{title:"商品分类",content:"发票内容将显示分类名称（例：服装/女装/T恤）与价格信息，发票金额为实际支付金额，不含优惠抵扣金额。"}],invoice:{},is_tax:1}},props:{tax_fee:[Object],shop_id:[Number],price:[Number]},computed:{},mounted:function(){this.isBillType()},methods:{isBillType:function(){this.tax_fee.is_pt_show&&!this.tax_fee.is_zy_show?(this.is_bill_type_active=1,this.value="不开具发票"):!this.tax_fee.is_pt_show&&this.tax_fee.is_zy_show?(this.is_bill_type_active=2,this.value="不开具发票"):this.tax_fee.is_pt_show&&this.tax_fee.is_zy_show&&(this.is_bill_type_active=1,this.value="不开具发票")},onCancel:function(){this.show=!1,this.value="不开具发票",this.headername="",this.head_taxpayer_no="",this.company_name="",this.com_taxpayer_no="",this.logon_addr="",this.logon_phone="",this.bank="",this.card_no="",this.is_tax=2,this.$emit("getInvoice",this.invoice,this.shop_id,this.is_tax)},onSure:function(){if(1==this.is_bill_type_active){if(this.value="电子普通发票",this.invoice.type=1,!this.delSpace(this.headername))return this.$Toast("请输入抬头名称"),!1;if(this.invoice.title_name=this.headername,0==this.is_bill_head_active)this.invoice.title=1;else{if(this.invoice.title=2,!this.delSpace(this.head_taxpayer_no))return this.$Toast("请输入纳税人识别号"),!1;this.invoice.taxpayer_no=this.head_taxpayer_no}this.invoice.invoice_tax_key="pt",this.invoice.price=this.price,this.is_tax=1}else if(2==this.is_bill_type_active){if(this.value="增值税专用发票",this.invoice.type=2,!this.delSpace(this.company_name))return this.$Toast("请输入公司名称"),!1;if(!this.delSpace(this.com_taxpayer_no))return this.$Toast("请输入纳税人识别号"),!1;if(!this.delSpace(this.logon_phone))return this.$Toast("请输入注册电话"),!1;if(!this.delSpace(this.logon_addr))return this.$Toast("请输入注册地址"),!1;if(!this.delSpace(this.bank))return this.$Toast("请输入开户银行"),!1;if(!this.delSpace(this.card_no))return this.$Toast("请输入银行账户"),!1;this.invoice.company_name=this.company_name,this.invoice.taxpayer_no=this.com_taxpayer_no,this.invoice.company_addr=this.logon_addr,this.invoice.mobile=this.logon_phone,this.invoice.bank=this.bank,this.invoice.card_no=this.card_no,this.invoice.invoice_tax_key="zy",this.invoice.price=this.price,this.is_tax=1}else this.value="不开具发票",this.is_tax=2;0==this.is_bill_content_active?this.invoice.content_type=1:this.invoice.content_type=2,this.show=!1,this.$emit("getInvoice",this.invoice,this.shop_id,this.is_tax)},checkBillType:function(t){this.is_bill_type_active=t},checkBillHead:function(t){this.is_bill_head_active=t},checkGoodsTilte:function(t){this.is_bill_content_active=t},delSpace:function(t){return t.replace(/\s*/g,"")}},components:{PopupBottom:$.a}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.tax_fee.is_pt_show||t.tax_fee.is_zy_show?s("div",[s("van-cell",{attrs:{title:t.title,"is-link":"",value:t.value},on:{click:function(e){t.show=!0}}}),t._v(" "),s("div",[s("PopupBottom",{attrs:{title:t.title},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"cell-group"},[s("div",{staticClass:"cell"},[s("h4",[t._v("发票类型")]),t._v(" "),s("div",{staticClass:"check-wrap"},[t.tax_fee.is_pt_show?s("span",{class:1==t.is_bill_type_active?"active":"",on:{click:function(e){t.checkBillType(1)}}},[t._v("电子普通发票")]):t._e(),t._v(" "),t.tax_fee.is_zy_show?s("span",{class:2==t.is_bill_type_active?"active":"",on:{click:function(e){t.checkBillType(2)}}},[t._v("增值税专用发票")]):t._e()]),t._v(" "),s("div",{staticClass:"text"},[t._v("电子普通发票和纸质普通发票具备同等法律效力，可支持报销入账，发票开具后可在订单详情页查看。")])]),t._v(" "),1==t.is_bill_type_active?s("div",{staticClass:"cell"},[s("h4",[t._v("发票抬头")]),t._v(" "),s("div",{staticClass:"check-wrap"},t._l(t.bill_head_list,function(e,i){return s("span",{key:i,class:t.is_bill_head_active==i?"active":"",on:{click:function(e){t.checkBillHead(i)}}},[t._v(t._s(e.title))])})),t._v(" "),s("div",{staticClass:"input"},[s("van-field",{attrs:{border:!1,label:"抬头名称",placeholder:"请输入抬头名称"},model:{value:t.headername,callback:function(e){t.headername=e},expression:"headername"}}),t._v(" "),1==t.is_bill_head_active?s("van-field",{attrs:{border:!1,label:"纳税人识别号",placeholder:"请输入纳税人识别号"},model:{value:t.head_taxpayer_no,callback:function(e){t.head_taxpayer_no=e},expression:"head_taxpayer_no"}}):t._e()],1)]):t._e(),t._v(" "),2==t.is_bill_type_active?s("div",{staticClass:"cell"},[s("h4",[t._v("公司信息")]),t._v(" "),s("div",{staticClass:"input"},[s("van-field",{attrs:{border:!1,label:"公司名称",placeholder:"请输入公司名称"},model:{value:t.company_name,callback:function(e){t.company_name=e},expression:"company_name"}}),t._v(" "),s("van-field",{attrs:{border:!1,label:"纳税人识别号",placeholder:"请输入纳税人识别号"},model:{value:t.com_taxpayer_no,callback:function(e){t.com_taxpayer_no=e},expression:"com_taxpayer_no"}}),t._v(" "),s("van-field",{attrs:{border:!1,label:"注册地址",placeholder:"请输入注册地址"},model:{value:t.logon_addr,callback:function(e){t.logon_addr=e},expression:"logon_addr"}}),t._v(" "),s("van-field",{attrs:{type:"number",border:!1,label:"注册电话",maxlength:"11",placeholder:"请输入注册电话"},model:{value:t.logon_phone,callback:function(e){t.logon_phone=e},expression:"logon_phone"}}),t._v(" "),s("van-field",{attrs:{border:!1,label:"开户银行",placeholder:"请输入开户银行"},model:{value:t.bank,callback:function(e){t.bank=e},expression:"bank"}}),t._v(" "),s("van-field",{attrs:{type:"number",border:!1,label:"银行账户",placeholder:"请输入银行账户"},model:{value:t.card_no,callback:function(e){t.card_no=e},expression:"card_no"}})],1)]):t._e(),t._v(" "),s("div",{staticClass:"cell"},[s("h4",[t._v("发票内容")]),t._v(" "),s("div",{staticClass:"check-wrap"},t._l(t.bill_content_list,function(e,i){return s("span",{key:i,class:t.is_bill_content_active==i?"active":"",on:{click:function(e){t.checkGoodsTilte(i)}}},[t._v(t._s(e.title))])})),t._v(" "),s("div",{staticClass:"text"},[t._v(t._s(0==t.is_bill_content_active?t.bill_content_list[0].content:t.bill_content_list[1].content))])])]),t._v(" "),s("div",{staticClass:"fixed-foot-btn-group",attrs:{slot:"footer"},slot:"footer"},[s("van-button",{attrs:{size:"normal",block:"",round:"",plain:"",hairline:"",type:"danger"},on:{click:t.onCancel}},[t._v("不开具发票")]),t._v(" "),s("van-button",{attrs:{size:"normal",block:"",round:"",type:"danger"},on:{click:t.onSure}},[t._v("确定")])],1)])],1)],1):t._e()},staticRenderFns:[]};var E=s("VU/8")(j,F,!1,function(t){s("Ib/F")},"data-v-32ae8b8a",null).exports,P=s("FWz8"),G=(s("Llv5"),s("oFuF")),L=s("BuIE"),I=s("9GaH"),A=s("VKKs"),D=Object(d.a)({name:"order-confirm",data:function(){var t=JSON.parse(Object(L.a)(this.$route.query.params)),e=1;return"buy_now"==t.order_tag&&(3==t.goodsType||4==t.goodsType?e=0:(0==t.goodsType||t.sku_list[0].store_id)&&(e=2)),{params:t,orderType:t.order_tag,address:{},items:null,goods_amount:0,promotion_amount:0,total_shipping:0,total_amount:0,pointInfo:{},isPointDeduct:!1,isGivePoint:!1,givePoint:0,isLoading:!1,disabledStepper:!1,isPickup:0,noExpress:0,formList:[],shipping_type:e,payType:1,is_tax_fee:0,total_tax:0,invoice_list:[],shop_id_list:[],shop_invoice_list:[]}},filters:{filterSpec:function(t){if(Object(G.s)(t))return"";var e=[];return t.forEach(function(t){var s=t.spec_name+" "+t.spec_value_name;e.push(s)}),e.join(" , ")}},watch:{shipping_type:function(t){t&&(2==t?this.params.shipping_type=t:(delete this.params.shipping_type,this.params.sku_list.forEach(function(t){t.store_id=0,t.store_name=null})),this.loadData(!0))}},computed:{cellInfoGroup:function(){var t=this.$data,e=t.goods_amount,s=t.promotion_amount,i=t.total_shipping,a=t.isGivePoint,o=t.givePoint,n=[];return a&&o>0&&n.push({title:"获得"+this.$store.state.member.memberSetText.point_style,value:o,color:"#ff454e"}),n.push({title:"商品小计",value:Object(I.yuan)(e),color:"#ff454e"}),this.params.presell_id||this.isVirtualGoods||n.push({title:"运费",value:Object(I.yuan)(i),color:"#ff454e"}),n.push({title:"优惠金额",value:Object(I.yuan)(s),color:"#ff454e"}),this.is_tax_fee&&n.push({title:"税费",value:Object(I.yuan)(this.total_tax),color:"#ff454e"}),n},order_data:function(){var t=this,e=this.items,s={custom_order:""};return s.order_from=this.$store.state.isWeixin&&this.$store.getters.config.is_wchat?1:2,s.is_deduction=this.params.is_deduction?1:0,s.total_amount=this.total_amount>0?this.total_amount:0,"cart"===this.orderType&&(s.cart_from=this.params.cart_from||1),0!==this.shipping_type&&(s.shipping_type=this.shipping_type,s.address_id=this.address.id),this.isOfflineGoods&&(s.shipping_type=2),this.params.group_id&&(s.group_id=this.params.group_id,this.params.record_id&&(s.record_id=this.params.record_id)),(this.params.shopkeeper_id||Object(A.c)("shopkeeper_id"))&&(s.shopkeeper_id=this.params.shopkeeper_id||Object(A.c)("shopkeeper_id")),s.shop_list=[],e?(e.forEach(function(e){var i={};i.leave_message=e.leave_message,i.shop_id=e.shop_id,i.rule_id=e.full_cut.rule_id?e.full_cut.rule_id:"",i.coupon_id=e.coupon_id,i.shop_amount=e.shop_amount<=0?e.shop_amount=0:e.shop_amount,2==t.shipping_type&&(t.isOfflineGoods?i.card_store_id=e.store_id:(i.store_id=e.store_id,i.has_store=e.has_store)),t.is_tax_fee&&t.shop_invoice_list.forEach(function(t){i.shop_id==t.shop_id&&(i.invoice=t.invoice,i.invoice.invoice_tax=e.tax_fee[t.invoice.invoice_tax_key])}),i.goods_list=[],e.goods_list.forEach(function(e){var s={};s.goods_id=e.goods_id,s.goods_name=e.goods_name,s.sku_id=e.sku_id,s.price=e.price,s.num=e.num,s.discount_price=e.discount_price,s.seckill_id=e.seckill_id,s.channel_id=e.channel_id?e.channel_id:"",s.discount_id=e.discount_id,s.bargain_id=e.bargain_id?e.bargain_id:"",t.params.presell_id&&(s.presell_id=t.params.presell_id),i.goods_list.push(s)}),s.shop_list.push(i)}),s):{}},isDisabled:function(){return!(this.order_data.total_amount>=0&&void 0!==this.order_data.total_amount)},isForm:function(){return!Object(G.s)(this.formList)},isShowShipping:function(){return!this.isVirtualGoods&&!this.isOfflineGoods&&!this.isCourseGoods},isShowAddress:function(){var t=!0;return 2==this.shipping_type&&this.items&&(t=!this.items.every(function(t){var e=t.has_store;return parseInt(e)})),t},shippingTip:function(){var t=null;return this.noExpress?t="由于部分商品商城缺货，只能通过线下自提下单取货。":2==this.shipping_type&&this.items&&(this.items.every(function(t){var e=t.has_store;return parseInt(e)})||(t="由于部分商家不支持线下自提，请为不支持线下自提的订单商品选择收货地址")),t},cellShippingText:function(){var t="配送方式";return this.isOfflineGoods&&(t="使用门店"),t},isVirtualGoods:function(){var t=!1;return"buy_now"===this.orderType&&3==this.params.goodsType&&(t=!0),t},isOfflineGoods:function(){var t=!1;return"buy_now"===this.orderType&&0==this.params.goodsType&&(t=!0),t},isCourseGoods:function(){var t=!1;return"buy_now"===this.orderType&&4==this.params.goodsType&&(t=!0),t},isDpay:function(){return!this.params.presell_id&&!this.isOfflineGoods&&!this.isVirtualGoods&&!this.isCourseGoods&&this.$store.getters.config.dpay},isStoreCartOrder:function(){return 2==this.params.cart_from}},mounted:function(){this.loadData()},methods:{onAddress:function(t){this.address=t,this.params.address_id=t.id,this.loadData(!0)},cellShippingValue:function(t){var e=t.shipping_fee,s=t.store_name,i=t.has_store,a=this;if(a.isOfflineGoods)return s||"请选择门店";var o="";function n(){o="快递 ¥"+e,0==parseFloat(e)&&(o=a.params.presell_id?"快递":"快递 包邮"),a.address.id||(o="未选择收货地址")}return 1==a.shipping_type&&n(),2==a.shipping_type&&(i?o=s||"请选择自提门店":n()),o},isSelectStore:function(t){return!!(this.isOfflineGoods||t.has_store&&2==this.shipping_type)},onPopupStore:function(t){t.store_show=this.isSelectStore(t)},onStepperChange:function(t){"buy_now"===this.orderType&&(this.disabledStepper=!0,this.loadData(!0))},shopGoodsAmount:function(t){return t.map(function(t){return t.num}).reduce(function(t,e){return t+e})},onStepperLimit:function(t){"plus"===t?this.$Toast("已超出最大购买数！"):this.$Toast("至少选择一件！")},onPointDeduct:function(t){this.params.is_deduction=t?1:0,this.loadData(!0)},loadData:function(t){var e=this;e.getLocation().then(function(){Object(P.m)(e.params,t).then(function(t){var s=t.data,i=t.message;i&&e.$Toast(i),e.goods_amount=s.goods_amount,e.promotion_amount=s.promotion_amount,e.total_shipping=s.total_shipping,e.total_amount=s.amount,e.isPickup=parseInt(s.has_store),e.noExpress=s.has_express,e.noExpress&&(e.shipping_type=2),e.items=s.shop.map(function(t,i){t.leave_message=e.items?e.items[i].leave_message:"",t.shop_amount=t.total_amount;var a=t.goods_list[0].coupon_id;return t.coupon_show=!1,t.coupon_id="",t.coupon_name="",t.coupon_list.forEach(function(e){e.shop_id=t.shop_id,e.selected=!1,e.loading=!1}),a&&t.coupon_list.forEach(function(e){e.coupon_id==a&&(t.coupon_id=e.coupon_id,t.coupon_name=e.coupon_name,e.selected=!0,e.loading=!e.selected)}),t.tax_fee&&(e.is_tax_fee=1,e.total_tax=s.total_tax),t.store_show=!1,t.store_id=t.store_id||"",t.store_name=t.store_name||"",e.params.presell_id&&t.goods_list.forEach(function(e){e.presell_price=t.presell_info.allmoney,t.presell_info.frontMoney=parseFloat(t.presell_info.firstmoney)*parseInt(e.num),t.presell_info.tailMoney=parseFloat(t.presell_info.final_real_money),t.presell_info.tailText="(含运费"+(t.tax_fee?"税费":"")+")",e.stock=t.presell_info.presellnum,e.max_buy=t.presell_info.maxbuy}),t}),Object(G.s)(s.address)||(e.address={name:s.address.consigner,tel:s.address.mobile,id:s.address.address_id,address:s.address.province_name+s.address.city_name+s.address.district_name+s.address.address_detail}),e.isPointDeduct=!!parseInt(s.is_point_deduction),e.pointInfo=s.deduction_point,e.isGivePoint=!!parseInt(s.is_point),e.givePoint=s.total_give_point,"buy_now"===e.orderType&&(e.disabledStepper=!1),e.formList=Object(G.s)(s.customform)?[]:s.customform,e.$refs.load.success()}).catch(function(t){var s=t.code,i=t.message;e.$Dialog.alert({message:i}).then(function(){-2==s&&e.$router.replace("/mall/cart")}),e.$store.getters.isBingFlag&&e.$store.getters.isBindMobile?e.$refs.load.fail():e.$refs.load.result()})})},getLocation:function(){var t=this;return new c.a(function(e,s){2==t.shipping_type||t.isOfflineGoods?t.$store.dispatch("getBMapLocation").then(function(s){var i=s.location;t.params.lng=i.lng,t.params.lat=i.lat,e()}).catch(function(s){t.$Toast(s),e()}):e()})},onStore:function(t){var e=this,s=t.shop_id,i=t.store_id,a=t.store_name;this.items.forEach(function(t){t.shop_id==s&&(t.store_id=i,t.store_name=a,e.params.sku_list.forEach(function(e,s){t.goods_list.filter(function(t){return t.sku_id==e.sku_id})[0]&&(e.store_id=i,e.store_name=a)}),e.loadData(!0))})},onUseCoupon:function(t,e){var s=this;this.items.some(function(e){if(e.coupon_id==t.coupon_id)return s.$Toast("该优惠券只能使用一次！"),!0})||this.items.forEach(function(e){e.shop_id==t.shop_id&&(e.coupon_id=t.coupon_id,e.coupon_list=e.coupon_list.map(function(e){return e.selected=e.coupon_id==t.coupon_id,e.loading=e.selected,e}),s.params.sku_list.forEach(function(s,i){e.goods_list.filter(function(t){return t.sku_id==s.sku_id})[0]&&(s.coupon_id=t.coupon_id)}),s.loadData(!0))})},onSubmit:function(){var t=this,e=this,s=e.$refs.FormGroup?e.$refs.FormGroup.getFormData():"";if(e.isForm){if(!s)return!1;e.order_data.custom_order=r()(s)}if(1==e.shipping_type&&!e.order_data.address_id)return e.$Toast("请选择收货地址！");if(2==e.shipping_type)if(e.isOfflineGoods){if(!e.order_data.shop_list.every(function(t){return t.card_store_id}))return e.$Toast("请选择门店！")}else if(e.order_data.shop_list.some(function(t,s){var i=t.store_id,a=t.has_store;return a||e.order_data.address_id?a&&!i?e.$Toast(e.items[s].shop_name+"需要选择自提门店！"):void 0:e.$Toast(e.items[s].shop_name+"需要选择收货地址！")}))return!1;e.isLoading=!0,Object(P.h)(e.order_data,2==e.order_data.shipping_type).then(function(t){var s=t.data;e.payType?Object(G.t)()?location.replace(e.$store.state.domain+"/wap/pay/payment?out_trade_no="+s.out_trade_no):e.$router.replace({name:"pay-payment",query:{out_trade_no:s.out_trade_no}}):e.onDpay(s.out_trade_no)}).catch(function(s){var i=s.code;s.message;-2==i&&t.loadData(!0),e.isLoading=!1})},onDpay:function(t){var e=this;Object(P.r)({out_trade_no:t}).then(function(){e.$router.replace({name:"pay-result",query:{out_trade_no:t,dpay_order:1}})}).catch(function(){e.isLoading=!1})},getInvoice:function(t,e,s){var i={};i.shop_id=e,i.tax_type=1==s?t.type:0;var a={};a.shop_id=e,a.invoice=1==s?t:{},-1==this.shop_id_list.indexOf(e)?(this.shop_id_list.push(e),this.invoice_list.push(i),this.shop_invoice_list.push(a)):(this.invoice_list.forEach(function(i){i.shop_id==e&&(i.tax_type=1==s?t.type:0)}),this.shop_invoice_list.forEach(function(i){i.shop_id==e&&(i.invoice=1==s?t:{})})),this.params.invoice_list=this.invoice_list,this.loadData(!0)}},beforeDestroy:function(){var t=document.getElementsByTagName("iframe")[0];t&&t.remove()},components:a()({SubmitBar:u.a,ChoiceAddress:f.a,PopupCoupon:_.a,PopupStore:p.a,FormGroup:h.a,CellFullCut:m.a,GoodsCard:v.a,CellPresell:b,CellInfoGroup:x.a,CellPointDeduct:T,CellPayTypeGroup:O,CellInvoiceGroup:E},o.a.name,o.a)}),R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Layout",{ref:"load",staticClass:"order-confirm bg-f8"},[s("Navbar",{attrs:{isMenu:!1}}),t._v(" "),t.isShowShipping?[!t.noExpress&&t.isPickup?s("van-cell",{staticClass:"cell-panel",attrs:{title:"配送方式"}},[s("van-radio-group",{staticClass:"cell-radio-group",model:{value:t.shipping_type,callback:function(e){t.shipping_type=e},expression:"shipping_type"}},[s("van-radio",{attrs:{name:1}},[t._v("快递配送")]),t._v(" "),s("van-radio",{attrs:{name:2}},[t._v("线下自提")])],1)],1):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.shippingTip,expression:"shippingTip"}],staticClass:"shipping-tip"},[t._v(t._s(t.shippingTip))]),t._v(" "),s("ChoiceAddress",{directives:[{name:"show",rawName:"v-show",value:t.isShowAddress,expression:"isShowAddress"}],attrs:{address:t.address},on:{select:t.onAddress}})]:t._e(),t._v(" "),t.isDpay?s("CellPayTypeGroup",{model:{value:t.payType,callback:function(e){t.payType=e},expression:"payType"}}):t._e(),t._v(" "),t.isForm?s("FormGroup",{ref:"FormGroup",attrs:{items:t.formList}}):t._e(),t._v(" "),s("div",{staticClass:"list"},[t._l(t.items,function(e,i){return s("van-cell-group",{key:i,staticClass:"items card-group-box"},[s("van-cell",{attrs:{title:e.shop_name,icon:"shop-o"}}),t._v(" "),t._l(e.goods_list,function(e){return s("van-cell",{key:e.goods_id},[s("GoodsCard",{attrs:{title:e.goods_name,desc:t._f("filterSpec")(e.spec),price:e.discount_price,thumb:t._f("BASESRC")(e.goods_pic),num:"cart"===t.orderType?e.num:null}},["buy_now"===t.orderType&&4!=t.params.goodsType?s("div",{staticClass:"tags",attrs:{slot:"bottomRight"},slot:"bottomRight"},[s("van-stepper",{staticClass:"stepper-box",attrs:{integer:"",disabled:t.disabledStepper,"disable-input":"",max:0===e.max_buy?e.stock:e.stock>e.max_buy?e.max_buy:e.stock},on:{change:t.onStepperChange,overlimit:t.onStepperLimit},model:{value:t.params.sku_list[0].num,callback:function(e){t.$set(t.params.sku_list[0],"num",e)},expression:"params.sku_list[0].num"}})],1):t._e()])],1)}),t._v(" "),t.params.presell_id?s("CellPresell",{attrs:{info:e.presell_info}}):t._e(),t._v(" "),t.isVirtualGoods?t._e():s("van-cell",{staticClass:"cell-right-text",attrs:{title:t.cellShippingText,value:t.cellShippingValue(e),"is-link":t.isSelectStore(e)},on:{click:function(s){t.onPopupStore(e)}}}),t._v(" "),e.coupon_num>0?s("van-cell",{staticClass:"cell-right-text",attrs:{title:"优惠券",value:e.coupon_name?"已选："+e.coupon_name:"有 "+e.coupon_num+" 张可用优惠券","is-link":""},on:{click:function(t){e.coupon_show=!0}}}):t._e(),t._v(" "),s("CellInvoiceGroup",{attrs:{tax_fee:e.tax_fee,shop_id:e.shop_id,price:e.amount_for_coupon_discount},on:{getInvoice:t.getInvoice}}),t._v(" "),s("van-field",{attrs:{label:"买家留言",type:"textarea",placeholder:"选填：留言内容尽量和商家沟通",rows:"1",autosize:""},model:{value:e.leave_message,callback:function(s){t.$set(e,"leave_message",s)},expression:"item.leave_message"}}),t._v(" "),e.full_cut.rule_id?s("CellFullCut",{attrs:{items:e.full_cut}}):t._e(),t._v(" "),s("van-cell",[s("div",{staticClass:"foot"},[t._v("\n          共 \n          "),s("span",[t._v(t._s(t.shopGoodsAmount(e.goods_list)))]),t._v(" 件商品   小计：\n          "),s("span",{staticClass:"price"},[t._v(t._s(t._f("yuan")(e.shop_amount)))])])]),t._v(" "),s("PopupCoupon",{attrs:{items:e.coupon_list,title:e.shop_name,"get-type":1},on:{use:t.onUseCoupon},model:{value:e.coupon_show,callback:function(s){t.$set(e,"coupon_show",s)},expression:"item.coupon_show"}}),t._v(" "),t.$store.state.config.addons.store?s("PopupStore",{attrs:{store_id:e.store_id,list:e.store_list||[]},on:{select:t.onStore},model:{value:e.store_show,callback:function(s){t.$set(e,"store_show",s)},expression:"item.store_show"}}):t._e()],2)}),t._v(" "),s("CellPointDeduct",{staticClass:"card-group-box",attrs:{isPointDeduct:t.isPointDeduct,info:t.pointInfo},on:{"load-data":t.onPointDeduct}}),t._v(" "),s("CellInfoGroup",{staticClass:"card-group-box",attrs:{columns:t.cellInfoGroup,textAlign:"right"}})],2),t._v(" "),s("SubmitBar",{attrs:{price:t.order_data.total_amount,"button-text":"提交订单",disabled:t.isDisabled,loading:t.isLoading},on:{submit:t.onSubmit}})],2)},staticRenderFns:[]};var B=s("VU/8")(D,R,!1,function(t){s("gd2u")},"data-v-32d663e9",null);e.default=B.exports},omRF:function(t,e){},t8KH:function(t,e,s){"use strict";var i=s("o69Z"),a=s("LmuL"),o=s("+2ln"),n=Object(i.k)("steps"),r=n[0],l=n[1];e.a=r({props:{icon:String,title:String,active:Number,iconClass:String,description:String,direction:{type:String,default:"horizontal"},activeColor:{type:String,default:a.c},activeIcon:{type:String,default:"checked"}},data:function(){return{steps:[]}},render:function(t){var e=this.icon,s=this.title,i=this.description,a=this.slots,n=(a("icon")||e)&&t("div",{class:l("icon")},[a("icon")||t(o.a,{attrs:{name:e},class:this.iconClass})]),r=t("div",{class:l("message")},[t("div",{class:l("title")},[s]),t("div",{class:[l("desc"),"van-ellipsis"]},[i])]);return t("div",{class:l([this.direction])},[(s||i)&&t("div",{class:l("status")},[n,r,a("message-extra")]),t("div",{class:l("items",{alone:!s&&!i})},[a()])])}})},uCzd:function(t,e,s){"use strict";var i=s("nsZj"),a=(s.n(i),s("Pf0w"));s.n(a)},vvrX:function(t,e){},xX32:function(t,e,s){"use strict";var i=s("EQSt"),a={data:function(){return{now_num:0,group_num:0,buyer_list:[]}},props:{record_id:{type:[String,Number],default:0,required:!0},replace:{type:Boolean,default:!1}},mounted:function(){var t=this;t.$store.dispatch("getAssembleDetail",this.record_id).then(function(e){t.now_num=e.now_num,t.group_num=e.group_num,t.buyer_list=e.buyer_list})},components:{AvatarGroup:i.a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-cell-group",[s("van-cell",{attrs:{icon:"v-icon-team","is-link":"",value:"拼团详情",to:"/assemble/detail/"+t.record_id,replace:t.replace}},[s("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n      拼团情况\n      "),s("span",{staticClass:"text-maintone"},[t._v(t._s(t.now_num)+"/"+t._s(t.group_num))])])]),t._v(" "),s("van-cell",[s("AvatarGroup",{attrs:{list:t.buyer_list,group_num:t.group_num}})],1)],1)},staticRenderFns:[]};var n=s("VU/8")(a,o,!1,function(t){s("Ehu1")},"data-v-ffd49a2a",null);e.a=n.exports},z1C2:function(t,e){},zZFw:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("eKM9"),a=s("Lo3X"),o=s("zcfZ"),n={data:function(){return{}},props:{resultInfo:{type:[Object,Boolean]}},computed:{stateType:function(){return"refund-"+this.resultInfo.result}},methods:{onAgainApply:function(){this.$emit("change-page-type",1)}},components:{ResultBox:o.a}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"result-box"},[s("ResultBox",{attrs:{"state-type":t.stateType}},[s("van-row",{staticClass:"result-info",attrs:{type:"flex",justify:"center"}},[s("div",{staticClass:"text"},[s("div",[t._v(t._s(t.resultInfo.message))]),t._v(" "),"fail"===t.resultInfo.result?s("div",{staticClass:"reason"},[t._v("原因："+t._s(t.resultInfo.reason))]):t._e()])])],1),t._v(" "),"fail"===t.resultInfo.result&&t.resultInfo.isAgainApply?s("div",{staticClass:"foot-btn-group"},[s("van-button",{attrs:{size:"normal",block:"",round:"",type:"danger"},on:{click:t.onAgainApply}},[t._v("重新申请")])],1):t._e()],1)},staticRenderFns:[]};var l=s("VU/8")(n,r,!1,function(t){s("z1C2")},"data-v-1569a516",null).exports,c=s("FWz8"),d=s("txgx"),u={data:function(){return{refund_require_money:null,reasonText:"",reason_id:"",isLoading:!1,default_refund_type:1,columns:[{text:"拍错/多拍/不想要",id:1},{text:"协商一致退款/退货",id:2},{text:"缺货",id:3},{text:"未按约定时间发货",id:4},{text:"其他",id:5}]}},props:{pageType:{type:Number},info:{type:Object}},computed:{refund_type:function(){var t=this.info.order_status;return 2==t||3==t||4==t?2:1},refund_reason_text:function(){var t=this;return t.columns.filter(function(e){return e.id==t.info.refund_reason})[0].text},refundPaymentType:function(){var t=[];return this.info.refund_eth_money&&t.push("eth"),this.info.refund_eos_money&&t.push("eos"),t},blockchainText:function(){return this.refundPaymentType.length?"由于行情不断更新，实际到账金额可能会有细小偏差":""},isDisabledRefundBtn:function(){return this.info.eth_status&&this.info.eos_status},refundBtnText:function(){return this.isDisabledRefundBtn?"退款金额为0，无法申请退款":"提交"}},created:function(){this.refund_require_money=this.info.refund_max_money},methods:{onPicker:function(t){this.reasonText=t.text,this.reason_id=t.id},onSubmit:function(){var t=this,e=t.info;if(!t.reason_id)return t.$Toast("请选择退款原因！"),!1;if(parseFloat(e.refund_max_money)>0){if(null==t.refund_require_money)return t.$Toast("退款金额不能为空！"),!1;if(t.refund_require_money>e.refund_max_money)return t.$Toast("退款金额不能超过最大退款金额！"),!1;if(t.refund_require_money<0)return t.$Toast("退款金额不能小于0！"),!1}else t.refund_require_money=0;var s=[];e.goods_list.forEach(function(t){s.push(t.order_goods_id)});var i={};i.order_id=e.order_id,i.order_goods_id=s,i.refund_type=t.default_refund_type,i.refund_require_money=t.refund_require_money,i.refund_reason=t.reason_id,t.isLoading=!0,Object(c.d)(i).then(function(e){t.$Toast.success("提交成功"),t.$router.back()}).catch(function(){t.isLoading=!1})},onCancel:function(){var t=this,e=t.info,s=2===e.refund_type?"退货":"退款";t.$Dialog.confirm({message:"确认取消"+s+"吗？"}).then(function(){var s=[];e.goods_list.forEach(function(t){s.push(t.order_goods_id)});var i={};i.order_id=e.order_id,i.order_goods_id=s,t.isLoading=!0,Object(c.e)(i).then(function(e){t.$Toast.success("取消成功"),t.$router.replace({name:"order-list"})}).catch(function(){t.isLoading=!1})})}},components:{CellSelector:d.a}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-apply"},[1===t.pageType?s("div",[s("van-cell-group",[s("van-cell",{staticClass:"cell-panel",attrs:{title:"处理方式"}},[s("van-radio-group",{staticClass:"cell-radio-group",model:{value:t.default_refund_type,callback:function(e){t.default_refund_type=e},expression:"default_refund_type"}},[s("van-radio",{attrs:{name:1}},[t._v(t._s(2===t.refund_type?"仅退款":"退款"))]),t._v(" "),2===t.refund_type&&3!=t.info.goods_type?s("van-radio",{attrs:{name:2}},[t._v("退货退款")]):t._e()],1)],1),t._v(" "),s("CellSelector",{attrs:{label:"退款原因",placeholder:"请选择退款原因",value:t.reasonText,columns:t.columns,"popup-title":"退款原因"},on:{confirm:t.onPicker}}),t._v(" "),t.info.refund_max_money>0?s("van-field",{attrs:{label:"退款金额",type:"number",clearable:"",placeholder:"最多能退款¥"+t.info.refund_max_money},model:{value:t.refund_require_money,callback:function(e){t.refund_require_money=t._n(e)},expression:"refund_require_money"}}):t._e(),t._v(" "),t.info.refund_point>0?s("van-field",{attrs:{label:"退"+t.$store.state.member.memberSetText.point_style,disabled:"",value:t.info.refund_point}}):t._e(),t._v(" "),t._l(t.refundPaymentType,function(e,i){return[t.info["refund_"+e+"_money"]?s("van-field",{attrs:{label:"退款"+e.toUpperCase(),readonly:"",value:t.info["refund_"+e+"_money"]}}):t._e(),t._v(" "),t.info["refund_"+e+"_charge"]?s("van-field",{attrs:{label:"手续费",readonly:"",value:t.info["refund_"+e+"_charge"]}}):t._e(),t._v(" "),t.info["refund_"+e+"_val"]?s("van-field",{attrs:{label:"实际到账",readonly:"",value:t.info["refund_"+e+"_val"]}}):t._e()]})],2),t._v(" "),t.blockchainText?s("div",{staticClass:"tip-text"},[t._v(t._s(t.blockchainText))]):t._e(),t._v(" "),s("div",{staticClass:"foot-btn-group"},[s("van-button",{attrs:{size:"normal",block:"",round:"",type:"danger",disabled:t.isDisabledRefundBtn,loading:t.isLoading},on:{click:t.onSubmit}},[t._v(t._s(t.refundBtnText))])],1)],1):2===t.pageType?s("div",[1===t.info.refund_status?s("div",[s("van-cell-group",[s("van-field",{attrs:{label:"处理方式",readonly:"",value:2===t.info.refund_type?"退货退款":"退款"}}),t._v(" "),s("van-field",{attrs:{label:"退款原因",readonly:"",value:t.info.refund_reason?t.refund_reason_text:t.reasonText}}),t._v(" "),t.info.require_refund_money>0?s("van-field",{attrs:{label:"退款金额",readonly:"",value:t._f("yuan")(t.info.require_refund_money||t.refund_require_money)}}):t._e(),t._v(" "),t.info.refund_point>0?s("van-field",{attrs:{label:"退"+t.$store.state.member.memberSetText.point_style,readonly:"",value:t.info.refund_point}}):t._e(),t._v(" "),t._l(t.refundPaymentType,function(e,i){return[t.info["refund_"+e+"_money"]?s("van-field",{attrs:{label:"退款"+e.toUpperCase(),readonly:"",value:t.info["refund_"+e+"_money"]}}):t._e(),t._v(" "),t.info["refund_"+e+"_charge"]?s("van-field",{attrs:{label:"手续费",readonly:"",value:t.info["refund_"+e+"_charge"]}}):t._e(),t._v(" "),t.info["refund_"+e+"_val"]?s("van-field",{attrs:{label:"实际到账",readonly:"",value:t.info["refund_"+e+"_val"]}}):t._e()]})],2),t._v(" "),s("div",{staticClass:"foot-btn-group"},[s("van-button",{attrs:{size:"normal",block:"",round:"",type:"danger",loading:t.isLoading},on:{click:t.onCancel}},[t._v("取消"+t._s(2===t.info.refund_type?"退货退款":"退款"))])],1)],1):t._e()]):t._e()])},staticRenderFns:[]};var p=s("VU/8")(u,_,!1,function(t){s("Lbtm")},"data-v-20398560",null).exports,f=s("WyhY"),v=s("msXN"),h={data:function(){return{show:!1,params:{search_text:""}}},props:{name:String},mixins:[v.e],mounted:function(){this.loadList()},methods:{onLeftClick:function(){this.show=!1},search:function(t){this.params.search_text=t,this.loadList("init")},select:function(t){this.show=!1,this.$emit("select",t)},loadList:function(t){var e=this;t&&"init"===t&&e.initList(),Object(c.j)(e.params).then(function(s){var i=s.data,a=i.expressList||[];e.pushToList(a,i.page_count,t)}).catch(function(){e.loadError()})}},components:{HeadSearch:f.a}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-cell",{attrs:{title:"物流公司",value:t.name,"is-link":""},on:{click:function(e){t.show=!0}}}),t._v(" "),s("div",[s("van-popup",{staticClass:"popup",attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",[s("HeadSearch",{attrs:{disabled:!1,showLeft:"","show-action":"",leftClick:t.onLeftClick},on:{rightAction:t.search}}),t._v(" "),s("List",{staticClass:"list",attrs:{finished:t.finished,error:t.error},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,i){return s("van-cell",{key:i,attrs:{clickable:"",title:e.company_name},on:{click:function(s){t.select(e)}}})}))],1)])],1)],1)},staticRenderFns:[]};var g=s("VU/8")(h,m,!1,function(t){s("LT09")},"data-v-49e547f4",null).exports,y={data:function(){return{refund_shipping_code:null,refund_shipping_company:null,refund_shipping_company_name:null,columns:[],isLoading:!1}},props:{info:{type:Object},companyList:{type:Array},shopInfo:{type:Object},returnGoodsType:{type:Number}},methods:{onSelect:function(t){this.refund_shipping_company=t.co_id,this.refund_shipping_company_name=t.company_name},onSubmit:function(){var t=this,e=t.info;if(!t.refund_shipping_company)return t.$Toast("请选择物流公司！"),!1;if(!t.refund_shipping_code)return t.$Toast("请填写物流单号！"),!1;var s=[];e.goods_list.forEach(function(t){s.push(t.order_goods_id)});var i={};i.order_id=e.order_id,i.order_goods_id=s,i.refund_express_company=t.refund_shipping_company,i.refund_shipping_no=t.refund_shipping_code,t.isLoading=!0,Object(c.s)(i).then(function(e){t.$Toast.success("提交成功"),t.$router.replace({name:"order-list"})}).catch(function(){t.isLoading=!1})}},components:{CellExpressCompanyGroup:g}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-cell-group",[s("van-cell",[s("van-row",[s("van-col",{staticClass:"blod",attrs:{span:"24"}},[t._v("\n          卖家已经同意退货，请把商品回寄到以下地址：\n        ")]),t._v(" "),s("van-col",{attrs:{span:"10"}},[t._v(t._s(t.shopInfo.consigner))]),t._v(" "),s("van-col",{attrs:{span:"14"}},[t._v(t._s(t.shopInfo.mobile))]),t._v(" "),s("van-col",{attrs:{span:"24"}},[t._v(t._s(t.shopInfo.address))])],1)],1),t._v(" "),1===t.returnGoodsType?s("CellExpressCompanyGroup",{attrs:{name:t.refund_shipping_company_name||"请选择物流公司"},on:{select:t.onSelect}}):2===t.returnGoodsType?s("van-field",{attrs:{label:"物流公司",readonly:"",value:t.info.refund_shipping_company_name||t.refund_shipping_company_name}}):t._e(),t._v(" "),1===t.returnGoodsType?s("van-field",{attrs:{label:"物流单号",clearable:"",placeholder:"请输入物流单号"},model:{value:t.refund_shipping_code,callback:function(e){t.refund_shipping_code="string"==typeof e?e.trim():e},expression:"refund_shipping_code"}}):2===t.returnGoodsType?s("van-field",{attrs:{label:"物流单号",readonly:"",value:t.info.refund_shipping_code?t.info.refund_shipping_code:t.refund_shipping_code}}):t._e()],1),t._v(" "),1===t.returnGoodsType?s("div",{staticClass:"foot-btn-group"},[s("van-button",{attrs:{size:"normal",block:"",round:"",type:"danger",loading:t.isLoading},on:{click:t.onSubmit}},[t._v("提交")])],1):t._e()],1)},staticRenderFns:[]};var x=s("VU/8")(y,b,!1,function(t){s("kAb5")},"data-v-b5eeb776",null).exports,C=s("oFuF"),k=Object(i.a)({name:"order-post",data:function(){return{pageType:0,returnGoodsType:0,refund_detail:{},goods_list:[],shop_info:{},company_list:[]}},filters:{filterSpec:function(t){if(Object(C.s)(t))return"";var e=[];return t.forEach(function(t){if(t.spec_name){var s=t.spec_name+" "+t.spec_value_name;e.push(s)}}),e.length?e.join(","):""}},computed:{navbarTitle:function(){var t=this.refund_detail.order_status,e="";return(e=2==t||3==t||4==t?"退款退货":-1==t?"售后中":"退款")&&(document.title=e),e},resultInfo:function(){var t=this.refund_detail,e=t.order_status,s=t.refund_type,i=t.refund_status;if(4===i||5===i||-3===i){var a={};if(4===i)a.result="success",a.message=2===s?"卖家已收到商品，等待卖家处理退款！":"卖家已同意您的退款，请耐心等待打款！";else if(5===i)a.result="finish",a.message="退款成功，退款到账可能会有1-3天延迟，请留意你的账户！";else if(-3===i){var o=this.refund_detail.reason;a.result="fail",a.message=2===s?"卖家已拒绝你的退货！":"卖家已拒绝你的退款！",a.reason=o,a.isAgainApply=4!=e&&5!=e}return!Object(C.s)(a)&&a}return!1}},mounted:function(){var t=this,e=t.$route.query;Object(c.p)(e).then(function(e){var s=e.data;t.refund_detail=s.refund_detail,t.goods_list=s.refund_detail.goods_list,t.shop_info=s.shop_info,t.company_list=s.company_list?s.company_list:[],t.refund_detail.is_refund_all=s.is_all,t.setPageType(),2!==t.refund_detail.refund_status&&3!==t.refund_detail.refund_status||t.setReturnGoodsType(),t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})},methods:{setPageType:function(){this.refund_detail.refund_type;var t=this.refund_detail.refund_status,e=0;0===t?e=1:1===t||2===t||3===t?e=2:4!==t&&5!==t&&-3!==t||(e=3),this.pageType=e},setReturnGoodsType:function(){var t=this.refund_detail.refund_status,e=0;2===t?e=1:3===t&&(e=2),this.returnGoodsType=e},changePageType:function(t){this.pageType=t}},components:{PostResult:l,PostApply:p,PostApplyReturnGoods:x,GoodsCard:a.a}}),T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Layout",{ref:"load",staticClass:"order-post bg-f8"},[s("Navbar",{attrs:{title:t.navbarTitle}}),t._v(" "),1===t.pageType||2===t.pageType?s("div",[s("van-cell",{staticClass:"goods-cell"},t._l(t.goods_list,function(e,i){return s("GoodsCard",{key:i,staticClass:"goods-card",attrs:{id:e.goods_id,num:e.num,desc:t._f("filterSpec")(e.spec),title:e.goods_name,thumb:t._f("BASESRC")(e.pic_cover)}})})),t._v(" "),s("PostApply",{attrs:{info:t.refund_detail,"page-type":t.pageType}}),t._v(" "),2!==t.pageType||2!==t.refund_detail.refund_status&&3!==t.refund_detail.refund_status?t._e():s("PostApplyReturnGoods",{attrs:{info:t.refund_detail,"return-goods-type":t.returnGoodsType,"company-list":t.company_list,"shop-info":t.shop_info}})],1):3===t.pageType?s("PostResult",{attrs:{"result-info":t.resultInfo},on:{"change-page-type":t.changePageType}}):t._e()],1)},staticRenderFns:[]};var $=s("VU/8")(k,T,!1,function(t){s("jSj2")},"data-v-4f28ea16",null);e.default=$.exports},zcfZ:function(t,e,s){"use strict";var i={props:{stateType:String,message:String},computed:{text:function(){var t="";if(this.message)t=this.message;else switch(this.stateType){case"pay-success":t="支付成功";break;case"pay-fail":t="支付失败";break;case"recharge-success":t="充值成功";break;case"recharge-fail":t="充值失败";break;case"refund-success":t="同意退款";break;case"refund-fail":t="拒绝退款";break;case"refund-finish":t="完成退款"}return t}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-row",{staticClass:"box",attrs:{type:"flex",justify:"center"}},[s("van-col",{attrs:{span:"8"}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.$BASEIMGPATH+"result-"+t.stateType+".png"}})]),t._v(" "),s("div",{staticClass:"message text-center"},[t._v(t._s(t.text))])])],1),t._v(" "),t._t("default")],2)},staticRenderFns:[]};var o=s("VU/8")(i,a,!1,function(t){s("PjAf")},"data-v-aa3b2f76",null);e.a=o.exports}});