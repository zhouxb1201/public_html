webpackJsonp([32],{OyAA:function(t,e){},ercx:function(t,e){},fDhX:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("eKM9"),a=i("QmeG"),r=i("+7rM"),n=i("r5Ok"),l=i("vLgD");function o(t){return Object(l.a)({url:"/addons/wheelsurf/wheelsurf/wheelsurfInfo",method:"post",data:{wheelsurf_id:t}})}var c={data:function(){return{listData:[],params:{page_index:1,page_size:50},nowTime:null,copyHtml:null}},watch:{},filters:{telvague:function(t){return t?t.substr(0,3)+"****"+t.substr(7):"匿名"}},mounted:function(){this.loadData()},methods:{loadData:function(){var t,e=this;e.params.wheelsurf_id=e.$route.params.wheelsurfid?e.$route.params.wheelsurfid:null,(t=e.params,Object(l.a)({url:"/addons/wheelsurf/wheelsurf/prizeRecords",method:"post",data:t})).then(function(t){e.listData=t.data.data,e.moveTop()})},closeInterval:function(){clearInterval(this.nowTime),this.nowTime=null},moveTop:function(){var t=this;if(this.listData.length<=6)return!1;this.copyHtml=this.listData;var e=this.$refs.prize;this.nowTime=setInterval(function(){e.scrollTop-t.$refs.prizeFirstUl.scrollHeight<=0?e.scrollTop++:e.scrollTop=0},50)}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"prize-wrap"},[i("h3",{staticClass:"prize-title"},[t._v("幸运大转盘中奖记录")]),t._v(" "),i("div",{ref:"prize",staticClass:"prize-list-wrap"},[i("ul",{ref:"prizeFirstUl",staticClass:"item"},t._l(t.listData,function(e,s){return i("li",{key:s},[i("span",{staticClass:"title"},[t._v(t._s(t._f("telvague")(e.user_tel)))]),t._v(" "),i("span",{staticClass:"date"},[t._v(t._s(e.term_name))])])})),t._v(" "),i("ul",t._l(t.copyHtml,function(e,s){return i("li",{key:s},[i("span",{staticClass:"title"},[t._v(t._s(t._f("telvague")(e.user_tel)))]),t._v(" "),i("span",{staticClass:"date"},[t._v(t._s(e.term_name))])])}))])])])},staticRenderFns:[]};var h=i("VU/8")(c,u,!1,function(t){i("u0PE")},"data-v-88f160be",null).exports,p=i("1nCk"),f=i("R5/C"),d={props:{isShow:{type:Boolean,default:!1},id:[Number,String]},data:function(){return{info:{}}},watch:{isShow:function(t){document.querySelector("html").style.overflow=!0===t?"hidden":""}},mounted:function(){var t=this;o(this.id).then(function(e){var i=e.data;t.info=i})},methods:{close:function(){this.$emit("close")}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow?i("div",{staticClass:"popup"},[i("div",{staticClass:"popup-explain-wrap"},[i("div",{staticClass:"explain-content"},[i("div",{staticClass:"prize-title"},[i("img",{attrs:{src:t.$BASEIMGPATH+"prize_title.png"}}),t._v(" "),i("span",[t._v("活动奖品")])]),t._v(" "),i("div",{staticClass:"prize-table"},[t._m(0),t._v(" "),i("ul",t._l(t.info.prize,function(e,s){return i("li",{key:s},[i("span",{staticClass:"tal"},[t._v(t._s(e.term_name))]),t._v(" "),i("span",[t._v(t._s(e.prize_name))]),t._v(" "),i("span",{staticClass:"tar"},[t._v(t._s(e.num))])])}))]),t._v(" "),i("div",{staticClass:"prize-title mt20"},[i("img",{attrs:{src:t.$BASEIMGPATH+"prize_title.png"}}),t._v(" "),i("span",[t._v("活动时间")])]),t._v(" "),i("p",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(t.info.start_time,"s"))+" ~ "+t._s(t._f("formatDate")(t.info.end_time,"s")))]),t._v(" "),t.info.desc?i("div",{staticClass:"prize-title"},[i("img",{attrs:{src:t.$BASEIMGPATH+"prize_title.png"}}),t._v(" "),i("span",[t._v("活动说明")])]):t._e(),t._v(" "),t.info.desc?i("p",{staticClass:"time"},[t._v(t._s(t.info.desc))]):t._e()]),t._v(" "),i("div",{staticClass:"explain-bottom"},[i("img",{staticClass:"pic-arcs",attrs:{src:t.$BASEIMGPATH+"arcs.png"}}),t._v(" "),i("div",{staticClass:"bottom-wrap"},[i("van-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(e){return t.close(e)}}},[t._v("知道了")])],1)])])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"table-th"},[e("li",[e("span",{staticClass:"tal"},[this._v("奖项")]),this._v(" "),e("span",[this._v("奖品名称")]),this._v(" "),e("span",{staticClass:"tar"},[this._v("数量")])])])}]};var _=i("VU/8")(d,v,!1,function(t){i("rjVH")},"data-v-697605a2",null).exports,m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{staticClass:"palace",attrs:{src:t.items.background_pic,onerror:t.palaceBgImg}}),t._v(" "),i("div",{staticClass:"rotate-wrap"},[t.items.prize?i("ul",t._l(t.items.prize,function(e,s){return i("li",{key:s,style:t.liStyle(s)},[i("div",[i("img",{attrs:{src:e.prize_pic,onerror:t.defaultImg(e.prize_type)}}),t._v(" "),i("span",[t._v(t._s(e.prize_name))])])])})):t._e()])])},staticRenderFns:[]};var g=i("VU/8")({props:{items:{}},computed:{palaceBgImg:function(){var t=null;if(this.items.prize){var e=this.items.prize,i=this.$BASEIMGPATH;6==e.length?t='this.src="'+i+'wheels-bg-palace-6.png"':8==e.length?t='this.src="'+i+'wheels-bg-palace-8.png"':10==e.length?t='this.src="'+i+'wheels-bg-palace-10.png"':12==e.length&&(t='this.src="'+i+'wheels-bg-palace-12.png"')}return t},liStyle:function(t){var e=this.items.prize,i=60,s=null,a=null,r=null;return 6==e.length?(i=60,s=41.555,a=29.555,r=10):8==e.length?(i=45,s=32.888,a=32.333,r=10):10==e.length?(i=36,s=27,a=36,r=12):12==e.length&&(i=30,s=25,a=38,r=10),function(t){return{transform:"rotate("+t*i+"deg)",width:s+"%",left:a+"%",paddingTop:r+"%"}}},defaultImg:function(t){var e=null,i=this.$BASEIMGPATH;return function(t){return 0==t?e='this.src="'+i+'default-no.jpg"':1==t?e='this.src="'+i+'default-balance.png"':2==t?e='this.src="'+i+'default-integral.png"':3==t?e='this.src="'+i+'default-coupon.png"':4==t?e='this.src="'+i+'default-giftvoucher.png"':5==t?e='this.src="'+i+'default-goods.png"':6==t&&(e='this.src="'+i+'default-gift.png"'),e}}},methods:{}},m,!1,function(t){i("ercx")},"data-v-78342790",null).exports,w=i("msXN"),z=Object(s.a)({name:"wheelsurf-centre",data:function(){return{navtitle:"",winfo:{},frequency:0,startRotDegree:0,rotateAngle:0,rotateTransition:"transform 5s ease-in-out",clickFlag:!0,wheelsurfid:2,termname:null,prizename:null,prizeCode:null,noPrize:!1,winPrize:!1,activity:!1,isShare:!1,isExplain:!1}},mixins:[w.a],computed:{navbarTitle:function(){var t="幸运大转盘";return this.navtitle&&(t=this.navtitle),t&&(document.title=t),t},pointerPic:function(){return'this.src="'+this.$BASEIMGPATH+'wheels-pointer.png"'}},mounted:function(){var t,e=this,i=this;if(i.$store.state.config.addons.wheelsurf){if(!this.$route.params.wheelsurfid)return;this.wheelsurfid=this.$route.params.wheelsurfid,(t=i.wheelsurfid,Object(l.a)({url:"/addons/wheelsurf/wheelsurf/userFrequency",method:"post",data:{wheelsurf_id:t},isWriteIn:!0})).then(function(t){i.navtitle=t.data.wheelsurf_name,1==t.data.state?(e.$refs.load.result(),e.$Toast("活动还未开始"),e.$router.replace("/member/centre")):2==t.data.state?(i.frequency=t.data.frequency,o(i.wheelsurfid).then(function(t){var e=t.data;i.winfo=e})):3==t.data.state&&(i.activity=!0)}).catch(function(){i.$refs.load.fail()}),i.$refs.load.success()}else i.$refs.load.fail({errorText:"未开启大转盘应用",showFoot:!1})},beforeDestroy:function(){this.$refs.situation.closeInterval()},methods:{rotateHandle:function(){var t,e=this,i=this;if(0===i.frequency)return i.$Toast("抱歉，您已经没有抽奖机会了。"),!1;this.clickFlag&&(this.clickFlag=!1,(t=i.wheelsurfid,Object(l.a)({url:"/addons/wheelsurf/wheelsurf/userWheelsurf",method:"post",data:{wheelsurf_id:t},isWriteIn:!0})).then(function(t){if(0!=t.code&&1!=t.code)return!1;i.prizeCode=t.code,i.termname=t.data.term_name,i.prizename=t.data.prize_name;for(var s=0;s<i.winfo.prize.length;s++)if(i.winfo.prize[s].prize_id==t.data.prize_id){e.rotating(s);break}}))},rotating:function(t){var e=this;-9999!==this.frequency&&(this.frequency=this.frequency-1);var i=t,s=[];6==this.winfo.prize.length?s=[360,300,240,180,120,60]:8==this.winfo.prize.length?s=[360,315,270,225,180,135,90,45]:10==this.winfo.prize.length?s=[360,324,288,252,216,180,144,108,72,36]:12==this.winfo.prize.length&&(s=[360,330,300,270,240,210,180,150,120,90,60,30]);var a=this.startRotDegree+3600+s[i]-this.startRotDegree%360;this.startRotDegree=a,this.rotateAngle="rotate("+a+"deg)",setTimeout(function(){e.clickFlag=!0,e.gameOver()},5e3)},gameOver:function(){0===this.prizeCode?this.noPrize=!0:1===this.prizeCode&&(this.winPrize=!0)},closeToast:function(){1==this.winPrize?this.winPrize=!1:1==this.noPrize?this.noPrize=!1:1==this.activity&&(this.activity=!1,window.history.length<=1?this.$router.replace("/"):this.$router.go(-1))},closeShare:function(){this.isShare=!1},openShare:function(){this.winPrize=!1,this.noPrize=!1,this.$store.state.isWeixin?this.isShare=!0:this.$Toast("请点击下方工具栏“分享”按钮进行分享")},closeExplain:function(){this.isExplain=!1},openExplain:function(){this.isExplain=!0}},components:{HeadBanner:a.a,PopupWinPrize:r.a,PopupNoPrize:n.a,PopupActivityEnd:p.a,PrizeList:h,PopupShare:f.a,Explain:_,Adventures:g}}),C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Layout",{ref:"load",staticClass:"wheelsurf-centre bg-f6"},[i("Navbar",{attrs:{title:t.navbarTitle}}),t._v(" "),i("HeadBanner",{attrs:{src:t.$BASEIMGPATH+"wheelsurf-bg.png"}}),t._v(" "),i("div",{staticClass:"right-tag"},[i("div",{staticClass:"menu",on:{click:t.openExplain}},[t._v("活动说明")]),t._v(" "),i("router-link",{staticClass:"menu",attrs:{to:"/prize/list"}},[t._v("我的奖品")])],1),t._v(" "),i("div",{staticClass:"wheel-wrap"},[i("div",{staticClass:"wheel-main"},[i("div",{staticClass:"wheel-bg",style:{transform:t.rotateAngle,transition:t.rotateTransition}},[i("Adventures",{attrs:{items:t.winfo}})],1),t._v(" "),i("div",{staticClass:"wheel-pointer-box"},[i("div",{staticClass:"wheel-pointer",on:{click:function(e){t.bindMobile("rotateHandle")}}},[i("img",{attrs:{src:t.winfo.pointer_pic,onerror:t.pointerPic}})])])])]),t._v(" "),-9999!==t.frequency?i("p",{staticClass:"wheel-chance"},[t._v("\n    剩余抽奖次数：\n    "),i("span",[t._v(t._s(t.frequency))]),t._v("次\n  ")]):t._e(),t._v(" "),i("PrizeList",{ref:"situation"}),t._v(" "),i("PopupWinPrize",{attrs:{isShow:t.winPrize,termname:t.termname,prizename:t.prizename},on:{close:t.closeToast,share:t.openShare}}),t._v(" "),i("PopupNoPrize",{attrs:{isShow:t.noPrize},on:{close:t.closeToast,share:t.openShare}}),t._v(" "),i("PopupActivityEnd",{attrs:{isShow:t.activity},on:{close:t.closeToast}}),t._v(" "),i("PopupShare",{attrs:{isShow:t.isShare},nativeOn:{click:function(e){return t.closeShare(e)}}}),t._v(" "),i("Explain",{attrs:{isShow:t.isExplain,id:t.wheelsurfid},on:{close:t.closeExplain}})],1)},staticRenderFns:[]};var y=i("VU/8")(z,C,!1,function(t){i("OyAA")},"data-v-aa138dc2",null);e.default=y.exports},rjVH:function(t,e){},u0PE:function(t,e){}});