webpackJsonp([30],{Fqr5:function(t,a){},JvFY:function(t,a){},RZXc:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("bOdI"),i=s.n(e),n=(s("oXr1"),s("wbAJ")),r=s("eKM9"),o=s("NS8l"),d=(s("oFuF"),Object(r.a)({name:"address-post",data:function(){return{is_saving:!1,params:{},address_info:{}}},computed:{navbarTitle:function(){var t;return(t=this.$route.query.addressid?"编辑收货地址":this.$route.meta.title)&&(document.title=t),t},postType:function(){return this.$route.query.addressid?"edit":"add"},areaList:{get:function(){return this.$store.getters.areaList},set:function(t){console.log(t)}}},mounted:function(){var t=this;t.$store.dispatch("getArea").then(function(a){t.$route.query.addressid?t.getDateil():t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})},methods:{getDateil:function(){var t=this;Object(o.b)(t.$route.query.addressid).then(function(a){var s=a.data,e={};e.id=s.id,e.name=s.consigner,e.tel=s.mobile,e.province=s.province_name,e.city=s.city_name,e.county=s.district_name,e.province_id=s.province,e.city_id=s.city,e.county_id=s.district,e.addressDetail=s.address,e.isDefault=1===s.is_default,e.areaCode=s.area_code,e.postalCode=s.zip_code,t.address_info=e,t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})},onChangeArea:function(t){"edit"===this.postType?(this.address_info.province_id=this.areaList.province_id_list[t[0].code],this.address_info.city_id=this.areaList.city_id_list[t[1].code],this.address_info.county_id=this.areaList.county_id_list[t[2].code]):(this.params.province=this.areaList.province_id_list[t[0].code],this.params.city=this.areaList.city_id_list[t[1].code],this.params.district=this.areaList.county_id_list[t[2].code])},onSave:function(t){var a=this;a.params.id=t.id?t.id:"",a.params.province=t.province_id?t.province_id:a.params.province,a.params.city=t.city_id?t.city_id:a.params.city,a.params.district=t.county_id?t.county_id:a.params.district,a.params.consigner=t.name,a.params.mobile=t.tel,a.params.address=t.addressDetail,a.params.is_default=t.isDefault?1:0,a.params.area_code=t.areaCode,a.params.zip_code=t.postalCode,a.is_saving=!0,Object(o.e)(a.params).then(function(t){a.$Toast.success(t.message),setTimeout(function(){a.$router.back(-1),a.is_saving=!1},1e3)})}},components:i()({},n.a.name,n.a)})),c={render:function(){var t=this.$createElement,a=this._self._c||t;return a("Layout",{ref:"load",staticClass:"address-post bg-f8"},[a("Navbar",{attrs:{title:this.navbarTitle,isMenu:!1}}),this._v(" "),a("van-address-edit",{staticClass:"address-edit",attrs:{"area-list":this.areaList,"address-info":this.address_info,"show-set-default":"","show-postal":"","save-button-text":"保存","is-saving":this.is_saving},on:{save:this.onSave,"change-area":this.onChangeArea}})],1)},staticRenderFns:[]};var l=s("VU/8")(d,c,!1,function(t){s("JvFY")},"data-v-d4fe80b2",null);a.default=l.exports},n5mh:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("eKM9"),i=s("NS8l"),n=Object(e.a)({name:"address-list",data:function(){return{defaultId:"",list:[],params:{page_index:1,page_size:10}}},activated:function(){this.loadData()},methods:{loadData:function(){var t=this;Object(i.c)(t.params).then(function(a){var s=a.data;t.list=s.address_list?s.address_list:[];var e=t.list.filter(function(t){return 1===t.is_default})[0];t.defaultId=e?e.id:"",t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})},onDefault:function(t){t&&Object(i.f)(t)},onEdit:function(t){this.$router.push({name:"address-post",query:{addressid:t}})},onRemove:function(t){var a=this;a.$Dialog.confirm({message:"是否确定删除该地址?"}).then(function(){Object(i.a)(t).then(function(t){a.$Toast.success(t.message),setTimeout(function(){a.loadData()},500)})})},onAdd:function(){this.$router.push({name:"address-post"})}}}),r={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("Layout",{ref:"load",staticClass:"address-list bg-f8"},[s("Navbar",{attrs:{isMenu:!1}}),t._v(" "),s("div",{staticClass:"list"},[s("van-radio-group",{on:{change:t.onDefault},model:{value:t.defaultId,callback:function(a){t.defaultId=a},expression:"defaultId"}},t._l(t.list,function(a,e){return s("van-cell-group",{key:e,staticClass:"item card-group-box"},[s("van-cell",{staticClass:"info"},[s("van-row",{attrs:{type:"flex"}},[s("van-col",{staticClass:"label",attrs:{span:"5"}},[t._v("收货人")]),t._v(" "),s("van-col",{staticClass:"name",attrs:{span:"10"}},[t._v(t._s(a.consigner))]),t._v(" "),s("van-col",{staticClass:"tel",attrs:{span:"9"}},[t._v(t._s(a.mobile))])],1),t._v(" "),s("van-row",{attrs:{type:"flex"}},[s("van-col",{staticClass:"label",attrs:{span:"5"}},[t._v("收货地址")]),t._v(" "),s("van-col",{staticClass:"address",attrs:{span:"19"}},[t._v(t._s(a.province_name)+t._s(a.city_name)+t._s(a.district_name)+t._s(a.address))])],1)],1),t._v(" "),s("van-cell",{staticClass:"foot"},[s("van-row",{attrs:{type:"flex",justify:"space-between"}},[s("van-col",{attrs:{span:"8"}},[s("van-radio",{attrs:{name:a.id}},[t._v("设为默认")])],1),t._v(" "),s("van-col",{staticClass:"btn-group",attrs:{span:"14"}},[s("van-col",{staticClass:"btn e-handle",attrs:{span:"8"},nativeOn:{click:function(s){t.onEdit(a.id)}}},[s("van-icon",{attrs:{name:"edit"}}),t._v(" "),s("span",[t._v("编辑")])],1),t._v(" "),s("van-col",{staticClass:"btn e-handle",attrs:{span:"8"},nativeOn:{click:function(s){t.onRemove(a.id)}}},[s("van-icon",{attrs:{name:"delete"}}),t._v(" "),s("span",[t._v("删除")])],1)],1)],1)],1)],1)}))],1),t._v(" "),s("div",{staticClass:"fixed-foot-btn-group"},[s("van-button",{attrs:{size:"normal",type:"danger",round:"",block:""},on:{click:t.onAdd}},[t._v("新增地址")])],1)],1)},staticRenderFns:[]};var o=s("VU/8")(n,r,!1,function(t){s("Fqr5")},"data-v-1f6f6e32",null);a.default=o.exports}});