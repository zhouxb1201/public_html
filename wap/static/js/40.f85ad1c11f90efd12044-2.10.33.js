webpackJsonp([40],{"9+k/":function(t,s){},jvPx:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("eKM9"),o=a("Lo3X"),n=a("h5jm"),e=a("iVvP"),c=a("qsHl"),l=a("zBN4"),r=a("msXN"),_=Object(i.a)({name:"seckill-list",data:function(){return{tab_active:0,tabs:[],params:{page_index:1,page_size:10,condition_time:"",condition_day:"",tag_status:""}}},filters:{tag_status:function(t){var s="";return"started"==t?s="已开抢":"going"==t?s="抢购中":"unstart"==t?s="即将开抢":"tomorrow_start"==t&&(s="明日开抢"),s},filterPercent:function(t){return parseFloat(t)}},mixins:[r.e],mounted:function(){this.$store.state.config.addons.seckill&&this.loadData()},methods:{onTab:function(t){this.params.condition_time=this.tabs[t].condition_time,this.params.condition_day=this.tabs[t].condition_day,this.params.tag_status=this.tabs[t].tag_status,this.loadList("init")},loadList:function(t){var s=this;t&&"init"===t&&s.initList(),Object(l.b)(s.params).then(function(a){var i=a.data,o=i.sec_goods_list?i.sec_goods_list:[];s.pushToList(o,i.page_count,t)}).catch(function(){s.loadError()})},loadData:function(){var t=this;Object(l.c)().then(function(s){var a=s.data;t.tabs=a,t.params.condition_time=t.tabs[0].condition_time,t.params.condition_day=t.tabs[0].condition_day,t.params.tag_status=t.tabs[0].tag_status,t.loadList()})},onCollection:function(t){var s=this,a=s.list[t];a.is_collection?Object(c.b)(a.goods_id).then(function(t){s.$Toast.success("取消成功"),a.is_collection=!1}):Object(c.m)(a.goods_id,a.seckill_id).then(function(t){s.$Toast.success("收藏成功"),a.is_collection=!0})}},components:{Progressbar:n.a,GoodsCard:o.a,Empty:e.a}}),d={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"goods-seckill bg-f8"},[t.$store.state.config.addons.seckill?[a("Navbar"),t._v(" "),a("div",{staticClass:"head"},[a("div",{staticClass:"box"},[a("van-tabs",{staticClass:"seckill-tab",on:{change:t.onTab},model:{value:t.tab_active,callback:function(s){t.tab_active=s},expression:"tab_active"}},t._l(t.tabs,function(s,i){return a("van-tab",{key:i},[a("div",{attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"fw-blod"},[t._v(t._s(s.tag_name))]),t._v(" "),a("div",{staticClass:"fs-12"},[t._v(t._s(t._f("tag_status")(s.tag_status)))])])])}))],1)]),t._v(" "),a("List",{staticClass:"list",attrs:{finished:t.finished,error:t.error,"is-empty":t.isListEmpty,empty:{message:"没有相关秒杀商品"}},on:{"update:error":function(s){t.error=s},load:t.loadList},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.list,function(s,i){return a("van-cell",{key:i,staticClass:"item"},[a("GoodsCard",{attrs:{id:s.goods_id,thumb:t._f("BASESRC")(s.goods_img)}},[a("div",{staticClass:"van-card__title title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(s.goods_name))]),t._v(" "),a("div",{staticClass:"tags",attrs:{slot:"tags"},slot:"tags"},["started"==s.tag_status||"going"==s.tag_status?a("Progressbar",{attrs:{value:t._f("filterPercent")(s.robbed_percent),num:s.robbed_num}}):a("div",{staticClass:"remain-info"},[a("div",[t._v(t._s(s.seckill_num)+" 件")]),t._v(" "),a("span",{staticClass:"p-span"},[t._v("|")]),t._v(" "),a("div",[t._v(t._s(s.rob_time))])])],1),t._v(" "),a("div",{staticClass:"foot",attrs:{slot:"bottom"},slot:"bottom"},[a("div",{staticClass:"price"},[a("span",{staticClass:"seckill-price",class:"started"==s.tag_status||"going"==s.tag_status?"started":"nostarted"},[t._v(t._s(t._f("yuan")(s.seckill_price)))]),t._v(" "),a("span",{staticClass:"van-card__origin-price"},[t._v(t._s(t._f("yuan")(s.price)))])]),t._v(" "),"started"==s.tag_status||"going"==s.tag_status?a("van-button",{attrs:{size:"mini",type:"danger",to:"/goods/detail/"+s.goods_id}},[t._v("马上抢")]):a("van-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){t.onCollection(i)}}},[t._v(t._s(s.is_collection?"取消收藏":"收藏"))])],1)])],1)}))]:a("Empty",{attrs:{"page-type":"fail",message:"未开启秒杀应用","show-foot":!1}})],2)},staticRenderFns:[]};var u=a("VU/8")(_,d,!1,function(t){a("9+k/")},"data-v-06a65131",null);s.default=u.exports}});