webpackJsonp([26],{"5+z+":function(t,a){},"7TJI":function(t,a){},C7zZ:function(t,a,i){"use strict";a.b=function(t){return Object(n.a)({url:"/addons/bargain/bargain/getBargainList",method:"post",data:t})},a.a=function(t){return Object(n.a)({url:"/addons/bargain/bargain/myActionBargain",method:"post",data:t,errorCallback:!0})},a.c=function(t){return Object(n.a)({url:"/addons/bargain/bargain/helpBargain",method:"post",data:{bargain_record_id:t},isWriteIn:!0,isShowLoading:!0})};var n=i("vLgD")},F3TJ:function(t,a){},Hm0X:function(t,a){},LoEF:function(t,a){},Qk5p:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=i("eKM9"),e=i("Lo3X"),s={props:{items:Object},filters:{itemText:function(t){return 1==t?"距结束":"距开始"}},components:{GoodsCard:e.a}},o={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("van-cell",{staticClass:"item",attrs:{to:{name:"goods-detail",params:{goodsid:t.items.goods_id}}}},[i("GoodsCard",{attrs:{thumb:t.items.pic_cover_url,title:t.items.goods_name}},[i("div",{staticClass:"tags",attrs:{slot:"tags"},slot:"tags"},[i("div",{staticClass:"time-box"},[i("span",{staticClass:"text",class:1==t.items.status?"ing":"not"},[t._v(t._s(t._f("itemText")(t.items.status)))]),t._v(" "),i("span",{staticClass:"time"},[t._v(t._s(1==t.items.status?t.items.end_bargain_date:t.items.start_bargain_date))])])]),t._v(" "),i("div",{staticClass:"text-maintone",attrs:{slot:"bottom"},slot:"bottom"},[t._v("初始价："+t._s(t._f("yuan")(t.items.start_money)))])])],1)},staticRenderFns:[]};var r=i("VU/8")(s,o,!1,function(t){i("F3TJ")},"data-v-17d09a23",null).exports,d=i("C7zZ"),c=i("iVvP"),l=i("msXN"),u=Object(n.a)({name:"bargain-list",data:function(){return{}},mixins:[l.e],mounted:function(){this.$route.query.shop_id&&(this.params.shop_id=this.$route.query.shop_id),this.$store.state.config.addons.bargain&&this.loadList()},methods:{loadList:function(t){var a=this;Object(d.b)(a.params).then(function(i){var n=i.data,e=n.bargain_list;a.pushToList(e,n.page_count,t)}).catch(function(){a.loadError()})}},components:{CellGoodsCard:r,Empty:c.a}}),_={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"bargain-list bg-f8"},[t.$store.state.config.addons.bargain?[i("Navbar"),t._v(" "),i("List",{attrs:{finished:t.finished,error:t.error,"is-empty":t.isListEmpty,empty:{message:"没有相关砍价商品"}},on:{"update:error":function(a){t.error=a},load:t.loadList},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.list,function(t,a){return i("CellGoodsCard",{key:a,attrs:{items:t}})}))]:i("Empty",{attrs:{"page-type":"fail",message:"未开启砍价应用","show-foot":!1}})],2)},staticRenderFns:[]};var m=i("VU/8")(u,_,!1,function(t){i("gV5b")},"data-v-46cc2a97",null);a.default=m.exports},VoH6:function(t,a){},gV5b:function(t,a){},iglA:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=i("eKM9"),e=i("Lo3X"),s=i("kPQs"),o={props:{items:Object,loadData:{type:Function}},computed:{endTime:function(){return this.items.end_time?1e3*parseFloat(this.items.end_time):""}},methods:{onCallback:function(){this.loadData()}},components:{GoodsCard:e.a,CountDown:s.a}},r={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("GoodsCard",{staticClass:"goods-card",attrs:{thumb:t.items.picture,title:t.items.title,price:t.items.price,id:t.items.id}},[i("div",{staticClass:"tags",attrs:{slot:"tags"},slot:"tags"},[t.endTime?i("div",{staticClass:"time-box"},[i("CountDown",{attrs:{time:t.endTime,"done-text":"00:00:00"},on:{callback:t.onCallback}},[i("div",{staticClass:"time-end"},[i("span",[t._v("{%d}")]),t._v(" "),i("i",[t._v(":")]),t._v(" "),i("span",[t._v("{%h}")]),t._v(" "),i("i",[t._v(":")]),t._v(" "),i("span",[t._v("{%m}")]),t._v(" "),i("i",[t._v(":")]),t._v(" "),i("span",[t._v("{%s}")])])]),t._v(" "),i("span",{staticClass:"text"},[t._v("砍价将失效")])],1):t._e()])])},staticRenderFns:[]};var d=i("VU/8")(o,r,!1,function(t){i("LoEF")},"data-v-1c8277f7",null).exports,c=i("i8hT"),l={props:{list:Array},components:{Divider:c.a}},u={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("Divider",{attrs:{title:"砍价帮"}},[i("van-cell-group",{attrs:{slot:"html",border:!1},slot:"html"},t._l(t.list,function(a,n){return i("van-cell",{key:n},[i("div",{staticClass:"item"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t._f("BASESRC")(a.help_user_headimg),onerror:t.$ERRORPIC.noAvatar}})]),t._v(" "),i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v(t._s(a.help_name))]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n            帮忙砍掉了\n            "),i("span",[t._v(t._s(a.help_price))]),t._v("元\n          ")])])])])}))],1)},staticRenderFns:[]};var _=i("VU/8")(l,u,!1,function(t){i("VoH6")},"data-v-c2127d94",null).exports,m=i("mvHQ"),g=i.n(m),p=i("oFuF"),v=i("BuIE"),b=i("msXN"),f=i("cgSz"),h={data:function(){return{showSku:!1,promoteParams:{}}},props:{detail:Object},mixins:[b.a],computed:{goodsData:function(){var t=this.detail,a={goods_id:t.goods_id,goods_image:t.pic_cover,goods_name:t.goods_name,goods_type:t.goods_type,max_buy:0,max_market_price:"0",max_price:"0",min_buy:0,min_market_price:"0",min_price:t.now_bargain_money,state:1,sku:{list:t.sku.list,tree:t.sku.tree},is_allow_buy:!0};return a.sku.list.forEach(function(a){a.price=parseFloat(t.now_bargain_money)}),a}},methods:{onInvite:function(){this.$Toast(this.$store.state.isWeixin?"微信环境下点击右上角分享":"手机浏览器点击底部工具栏分享")},onAction:function(t,a){this.onBuyNow(a)},onBuyNow:function(t){var a=this;this.bindMobile().then(function(){var i={order_tag:"buy_now"};i.goodsType=t.goodsType,i.sku_list=[];var n={};n.num=t.selectedNum,n.sku_id=t.selectedSkuComb.id,n.bargain_id=a.detail.bargain_id,i.sku_list.push(n),a.$router.push({name:"order-confirm",query:{params:Object(v.b)(g()(i))}})})}},components:{SkuPopup:f.a}},C={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"btn-group"},[i("van-button",{staticClass:"btn",attrs:{round:"",type:"warning",block:"",size:"normal"},on:{click:t.onInvite}},[t._v("邀请朋友砍一刀")]),t._v(" "),i("van-button",{staticClass:"btn",attrs:{round:"",type:"danger",block:"",size:"normal"},on:{click:function(a){t.showSku=!0}}},[t._v("现价购买")]),t._v(" "),i("SkuPopup",{attrs:{info:t.goodsData,action:"buy","promote-params":t.promoteParams},on:{action:t.onAction},model:{value:t.showSku,callback:function(a){t.showSku=a},expression:"showSku"}})],1)},staticRenderFns:[]};var y=i("VU/8")(h,C,!1,function(t){i("Hm0X")},"data-v-d9d49fe4",null).exports,k=i("C7zZ"),$={data:function(){return{}},props:{bargain_uid:{type:[String,Number],required:!0},bargain_record_id:{type:[String,Number],required:!0},value:Boolean,isCanBargain:Boolean,isShowBargain:Boolean,loadData:{type:Function}},methods:{onHelpBargain:function(){var t=this;Object(k.c)(this.bargain_record_id).then(function(a){var i=a.message;t.$Toast.success(i),t.$emit("input",!1),t.loadData()})},onBargain:function(){var t=this.$route.params,a=t.goodsid,i=t.bargainid,n=this.bargain_uid;this.$router.push({name:"bargain-detail",params:{goodsid:a,bargainid:i,bargainuid:n}})}}},B={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"btn-group"},[i("van-button",{staticClass:"btn",attrs:{round:"",type:"warning",block:"",size:"normal",disabled:!t.isCanBargain||!t.value},on:{click:t.onHelpBargain}},[t._v(t._s(t.value?"帮砍":"已砍"))]),t._v(" "),t.isShowBargain?i("van-button",{staticClass:"btn",attrs:{round:"",type:"danger",block:"",size:"normal"},on:{click:t.onBargain}},[t._v("我要砍价")]):t._e()],1)},staticRenderFns:[]};var x=i("VU/8")($,B,!1,function(t){i("5+z+")},"data-v-43b0183c",null).exports,w=Object(n.a)({name:"bargain-detail",data:function(){return{detail:{}}},computed:{bargainuid:function(){return this.$route.params.bargainuid},bargain_uid:function(){return!!this.detail.bargain_uid&&this.detail.bargain_uid},isCanBargain:function(){return!(parseFloat(this.detail.can_bargain_money)<=0)},goods_info:function(){var t={},a=this.detail;return t.id=a.goods_id,t.title=a.goods_name,t.picture=a.pic_cover,t.price=a.start_money,t.end_time=a.end_bargain_time,t},isShowBargain:function(){return!this.detail.is_buy}},watch:{bargainuid:function(t){t&&this.loadData()}},mounted:function(){this.$store.state.config.addons.bargain?this.loadData():this.$refs.load.fail({errorText:"未开启砍价应用",showFoot:!1})},methods:{loadData:function(){var t=this,a={};a.goods_id=t.$route.params.goodsid,a.bargain_id=t.$route.params.bargainid,a.bargain_uid=t.$route.params.bargainuid,Object(k.a)(a).then(function(a){var i=a.data;t.detail=i,t.onShare({title:t.detail.goods_name,desc:"快来帮我砍价吧！",imgUrl:t.$BASESRC(t.detail.pic_cover),link:t.$store.state.domain+"/wap"+t.$route.path+Object(p.k)(t.$route.query,"extend_code")}).then(function(){t.$refs.load.success()})}).catch(function(){t.$refs.load.fail()})}},components:{DetailCellGoodsCard:d,DividerUserList:_,InviteBtnGroup:y,ShareBtnGroup:x}}),S={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("Layout",{ref:"load",staticClass:"bargain-detail bg-f8"},[i("Navbar"),t._v(" "),i("DetailCellGoodsCard",{attrs:{items:t.goods_info,"load-data":t.loadData}}),t._v(" "),i("div",{staticClass:"cell-info"},[i("div",{staticClass:"text-center"},[t._v("\n      现价\n      "),i("span",{staticClass:"price"},[t._v(t._s(t._f("yuan")(t.detail.now_bargain_money)))]),t._v("元，还能砍\n      "),i("span",{staticClass:"price"},[t._v(t._s(t._f("yuan")(t.detail.can_bargain_money)))]),t._v("元\n    ")]),t._v(" "),t.detail.is_my_bargain?i("InviteBtnGroup",{attrs:{detail:t.detail}}):t.bargain_uid?i("ShareBtnGroup",{attrs:{bargain_uid:t.bargain_uid,bargain_record_id:t.detail.bargain_record_id,isCanBargain:t.isCanBargain,isShowBargain:t.isShowBargain,"load-data":t.loadData},model:{value:t.detail.is_help_bargain,callback:function(a){t.$set(t.detail,"is_help_bargain",a)},expression:"detail.is_help_bargain"}}):t._e()],1),t._v(" "),i("DividerUserList",{staticClass:"divider-cell-group",attrs:{list:t.detail.help_bargain_list}})],1)},staticRenderFns:[]};var D=i("VU/8")(w,S,!1,function(t){i("7TJI")},"data-v-9afb1734",null);a.default=D.exports}});