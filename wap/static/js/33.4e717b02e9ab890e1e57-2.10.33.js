webpackJsonp([33],{CDG5:function(t,e){},GtPa:function(t,e){},ajSN:function(t,e){},jK2i:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("eKM9"),a=s("QmeG"),n=s("vLgD");var r={data:function(){return{listData:[],params:{page_index:1,page_size:50},nowTime:null,copyHtml:null}},watch:{},filters:{telvague:function(t){return t?t.substr(0,3)+"****"+t.substr(7):"匿名"}},mounted:function(){this.loadData()},methods:{loadData:function(){var t,e=this;e.params.smash_egg_id=e.$route.params.smasheggid?e.$route.params.smasheggid:null,(t=e.params,Object(n.a)({url:"/addons/smashegg/smashegg/prizeRecords",method:"post",data:t})).then(function(t){e.listData=t.data.data,e.moveTop()})},closeInterval:function(){clearInterval(this.nowTime),this.nowTime=null},moveTop:function(){var t=this;if(this.listData.length<=6)return!1;this.copyHtml=this.listData;var e=this.$refs.prize;this.nowTime=setInterval(function(){e.scrollTop-t.$refs.prizeFirstUl.scrollHeight<=0?e.scrollTop++:e.scrollTop=0},50)}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"prize-wrap"},[s("h3",{staticClass:"prize-title"},[t._v("砸金蛋中奖记录")]),t._v(" "),s("div",{ref:"prize",staticClass:"prize-list-wrap"},[s("ul",{ref:"prizeFirstUl",staticClass:"item"},t._l(t.listData,function(e,i){return s("li",{key:i},[s("span",{staticClass:"title"},[t._v(t._s(t._f("telvague")(e.user_tel)))]),t._v(" "),s("span",{staticClass:"date"},[t._v(t._s(e.term_name))])])})),t._v(" "),s("ul",t._l(t.copyHtml,function(e,i){return s("li",{key:i},[s("span",{staticClass:"title"},[t._v(t._s(t._f("telvague")(e.user_tel)))]),t._v(" "),s("span",{staticClass:"date"},[t._v(t._s(e.term_name))])])}))])])])},staticRenderFns:[]};var l=s("VU/8")(r,o,!1,function(t){s("CDG5")},"data-v-734e389f",null).exports,c=s("1nCk"),m={props:{isShow:{type:Boolean,default:!1},id:[Number,String]},data:function(){return{info:{}}},watch:{isShow:function(t){document.querySelector("html").style.overflow=!0===t?"hidden":""}},mounted:function(){var t,e=this;(t=this.id,Object(n.a)({url:"/addons/smashegg/smashegg/smasheggInfo",method:"post",data:{smash_egg_id:t}})).then(function(t){var s=t.data;e.info=s})},methods:{close:function(){this.$emit("close")}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isShow?s("div",{staticClass:"popup"},[s("div",{staticClass:"popup-explain-wrap"},[s("div",{staticClass:"explain-content"},[s("div",{staticClass:"prize-title"},[s("img",{attrs:{src:t.$BASEIMGPATH+"prize_title.png"}}),t._v(" "),s("span",[t._v("活动奖品")])]),t._v(" "),s("div",{staticClass:"prize-table"},[t._m(0),t._v(" "),s("ul",t._l(t.info.prize,function(e,i){return s("li",{key:i},[s("span",{staticClass:"tal"},[t._v(t._s(e.term_name))]),t._v(" "),s("span",[t._v(t._s(e.prize_name))]),t._v(" "),s("span",{staticClass:"tar"},[t._v(t._s(e.num))])])}))]),t._v(" "),s("div",{staticClass:"prize-title mt20"},[s("img",{attrs:{src:t.$BASEIMGPATH+"prize_title.png"}}),t._v(" "),s("span",[t._v("活动时间")])]),t._v(" "),s("p",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(t.info.start_time,"s"))+" ~ "+t._s(t._f("formatDate")(t.info.end_time,"s")))]),t._v(" "),t.info.desc?s("div",{staticClass:"prize-title"},[s("img",{attrs:{src:t.$BASEIMGPATH+"prize_title.png"}}),t._v(" "),s("span",[t._v("活动说明")])]):t._e(),t._v(" "),t.info.desc?s("p",{staticClass:"time"},[t._v(t._s(t.info.desc))]):t._e()]),t._v(" "),s("div",{staticClass:"explain-bottom"},[s("img",{staticClass:"pic-arcs",attrs:{src:t.$BASEIMGPATH+"arcs.png"}}),t._v(" "),s("div",{staticClass:"bottom-wrap"},[s("van-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(e){return t.close(e)}}},[t._v("知道了")])],1)])])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"table-th"},[e("li",[e("span",{staticClass:"tal"},[this._v("奖项")]),this._v(" "),e("span",[this._v("奖品名称")]),this._v(" "),e("span",{staticClass:"tar"},[this._v("数量")])])])}]};var g=s("VU/8")(m,h,!1,function(t){s("ajSN")},"data-v-cd845dba",null).exports,u=s("r5Ok"),p=s("+7rM"),v=s("R5/C"),d=Object(i.a)({name:"smashegg-centre",data:function(){return{itemsEgg:[{eggimg:"egg-close.png",hammer:"hammer.png",hammerMove:""},{eggimg:"egg-close.png",hammer:"hammer.png",hammerMove:""},{eggimg:"egg-close.png",hammer:"hammer.png",hammerMove:""}],navtitle:"",smasheggid:1,frequency:0,activity:!1,isExplain:!1,noPrize:!1,winPrize:!1,termname:null,prizename:null,isShare:!1,isContinue:!0,clickFlag:!0}},computed:{navbarTitle:function(){var t="疯狂砸金蛋";return this.navtitle&&(t=this.navtitle),t&&(document.title=t),t}},mounted:function(){var t,e=this;if(this.$store.state.config.addons.smashegg){if(!this.$route.params.smasheggid)return;this.smasheggid=this.$route.params.smasheggid,(t=this.smasheggid,Object(n.a)({url:"/addons/smashegg/smashegg/userFrequency",method:"post",data:{smash_egg_id:t},isWriteIn:!0})).then(function(t){var s=t.data;e.navtitle=s.smashegg_name,1==s.state?(e.$refs.load.result(),e.$Toast("活动还未开始"),e.$router.replace("/member/centre")):2==s.state?e.frequency=s.frequency:3==s.state&&(e.activity=!0)}).catch(function(){e.$refs.load.fail()}),this.$refs.load.success()}else this.$refs.load.fail({errorText:"未开启砸金蛋应用",showFoot:!1})},beforeDestroy:function(){this.$refs.situation.closeInterval()},methods:{haveHand:function(t){var e=this;if(this.isContinue){if(0===this.frequency)return this.$Toast("抱歉，您已经没有抽奖机会了。"),!1;var s;if(this.clickFlag)this.clickFlag=!1,(s=this.smasheggid,Object(n.a)({url:"/addons/smashegg/smashegg/userSmashegg",method:"post",data:{smash_egg_id:s},isWriteIn:!0})).then(function(s){if(0==s.code)e.handld(t),setTimeout(function(){e.noPrize=!0},500);else{if(1!=s.code)return!1;e.handld(t),e.termname=s.data.term_name,e.prizename=s.data.prize_name,setTimeout(function(){e.winPrize=!0},500)}}),setTimeout(function(){e.isContinue=!1},500)}},handld:function(t){var e=this;-9999!==this.frequency&&(this.frequency=this.frequency-1),"egg-close.png"==this.itemsEgg[t].eggimg&&(this.itemsEgg[t].hammerMove="shak",setTimeout(function(){e.itemsEgg[t].eggimg="egg-open.png",e.clickFlag=!0},500))},onContinue:function(){this.isContinue=!0;for(var t=0;t<this.itemsEgg.length;t++)this.itemsEgg[t].eggimg="egg-close.png",this.itemsEgg[t].hammerMove=""},closeToast:function(){1==this.activity?(this.activity=!1,window.history.length<=1?this.$router.replace("/"):this.$router.go(-1)):1==this.noPrize?this.noPrize=!1:1==this.winPrize&&(this.winPrize=!1)},closeShare:function(){this.isShare=!1},openShare:function(){this.winPrize=!1,this.noPrize=!1,this.$store.state.isWeixin?this.isShare=!0:this.$Toast("请点击下方工具栏“分享”按钮进行分享")},closeExplain:function(){this.isExplain=!1},openExplain:function(){this.isExplain=!0}},components:{Explain:g,HeadBanner:a.a,PrizeList:l,PopupActivityEnd:c.a,PopupNoPrize:u.a,PopupWinPrize:p.a,PopupShare:v.a}}),_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Layout",{ref:"load",staticClass:"smashegg-centre bg-f6"},[s("Navbar",{attrs:{title:t.navbarTitle}}),t._v(" "),s("HeadBanner",{attrs:{src:t.$BASEIMGPATH+"smashegg-bg.png"}}),t._v(" "),s("div",{staticClass:"right-tag"},[s("div",{staticClass:"menu",on:{click:t.openExplain}},[t._v("活动说明")]),t._v(" "),s("router-link",{staticClass:"menu",attrs:{to:"/prize/list"}},[t._v("我的奖品")])],1),t._v(" "),s("div",{staticClass:"smashegg-main"},[s("div",{staticClass:"smashegg-egg"},t._l(t.itemsEgg,function(e,i){return s("div",{key:i,staticClass:"item-egg"},[s("div",{staticClass:"egg-img",on:{click:function(e){t.haveHand(i)}}},[s("img",{attrs:{src:t.$BASEIMGPATH+e.eggimg}})]),t._v(" "),s("img",{staticClass:"hammer",class:e.hammerMove,attrs:{src:t.$BASEIMGPATH+e.hammer}})])})),t._v(" "),-9999!==t.frequency?s("p",{staticClass:"smashegg-chance"},[t._v("\n      剩余抽奖次数：\n      "),s("span",[t._v(t._s(t.frequency))]),t._v("次\n    ")]):t._e(),t._v(" "),s("div",{staticClass:"btn-continue"},[s("van-button",{attrs:{type:"default",disabled:t.isContinue},on:{click:t.onContinue}},[t._v("再砸一次")])],1)]),t._v(" "),s("PrizeList",{ref:"situation"}),t._v(" "),s("PopupActivityEnd",{attrs:{isShow:t.activity},on:{close:t.closeToast}}),t._v(" "),s("Explain",{attrs:{isShow:t.isExplain,id:t.smasheggid},on:{close:t.closeExplain}}),t._v(" "),s("PopupWinPrize",{attrs:{isShow:t.winPrize,termname:t.termname,prizename:t.prizename},on:{close:t.closeToast,share:t.openShare}}),t._v(" "),s("PopupNoPrize",{attrs:{isShow:t.noPrize},on:{close:t.closeToast,share:t.openShare}}),t._v(" "),s("PopupShare",{attrs:{isShow:t.isShare},nativeOn:{click:function(e){return t.closeShare(e)}}})],1)},staticRenderFns:[]};var f=s("VU/8")(d,_,!1,function(t){s("GtPa")},"data-v-1886b958",null);e.default=f.exports}});