webpackJsonp([15],{"5orW":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("eKM9"),c=o("9uSG"),n=o("QmeG"),s=o("J38Z"),i=o("D1I1"),r=o("w3CS"),l=o("VKKs"),d=(o("vMJZ"),Object(a.a)({name:"register",data:function(){return{form:{mobile:"",verification_code:"",password:""},extend_code:null,check_password:"",checked:!1,isLoading:!1}},computed:{extendCodeDisabled:function(){return!!Object(l.c)("getSupCode")}},created:function(){Object(l.c)("getSupCode")&&(this.extend_code=Object(l.c)("getSupCode"))},methods:{register:function(){var e=this,t=this.form;if(!(Object(r.f)(t.mobile)&&Object(r.g)(t.verification_code)&&Object(r.i)(t.password)&&Object(r.b)(t.password,this.check_password)))return!1;this.extend_code&&(t.extend_code=this.extend_code),this.isLoading=!0,this.$store.dispatch("register",t).then(function(t){e.$router.replace(Object(l.c)("toPath")?Object(l.c)("toPath"):"/mall/index"),e.isLoading=!1}).catch(function(){e.isLoading=!1})}},components:{HeadBanner:n.a,HeadBtn:c.a,PopupProtocol:s.a,CellMsgCodeGroup:i.a}})),f={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"register bg-fff"},[o("HeadBanner",{attrs:{src:e.$store.getters.config.wap_register_adv?e.$store.getters.config.wap_register_adv:e.$BASEIMGPATH+"login-head-default-01.png",link:e.$store.getters.config.wap_register_jump}}),e._v(" "),o("HeadBtn"),e._v(" "),o("HeadBtn",{attrs:{type:"home"}}),e._v(" "),o("van-cell-group",[o("van-field",{attrs:{label:"手机号码",type:"number",maxlength:"11","left-icon":"v-icon-phone",placeholder:"请输入您的手机号码"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}}),e._v(" "),o("CellMsgCodeGroup",{attrs:{mobile:e.form.mobile,type:"register"},model:{value:e.form.verification_code,callback:function(t){e.$set(e.form,"verification_code",t)},expression:"form.verification_code"}}),e._v(" "),o("van-field",{attrs:{label:"密码",type:"password","left-icon":"v-icon-password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),o("van-field",{attrs:{label:"确认密码",type:"password","left-icon":"v-icon-confirm",placeholder:"请输入确认密码"},model:{value:e.check_password,callback:function(t){e.check_password=t},expression:"check_password"}}),e._v(" "),o("van-field",{attrs:{label:"邀请码",type:"text",disabled:e.extendCodeDisabled,"left-icon":"v-icon-channel",placeholder:"请输入邀请码"},model:{value:e.extend_code,callback:function(t){e.extend_code=t},expression:"extend_code"}})],1),e._v(" "),e.$store.getters.config.reg_rule?o("div",{staticClass:"agree-checkbox"},[o("van-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("我已经阅读并同意")]),e._v(" "),o("PopupProtocol")],1):e._e(),e._v(" "),o("div",{staticClass:"foot-btn-group"},[o("van-button",{attrs:{size:"normal",type:"danger",round:"",block:"",disabled:!!e.$store.getters.config.reg_rule&&!e.checked,loading:e.isLoading,"loading-text":"注册中..."},on:{click:e.register}},[e._v("注册")]),e._v(" "),o("van-button",{attrs:{size:"normal",type:"default",round:"",block:"",to:"/login"}},[e._v("已有账号？去登录")])],1)],1)},staticRenderFns:[]};var u=o("VU/8")(d,f,!1,function(e){o("PBxX")},"data-v-03213ff1",null);t.default=u.exports},CdUl:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("eKM9"),c=o("9uSG"),n=o("QmeG"),s=o("D1I1"),i=o("w3CS"),r=(o("VKKs"),o("vMJZ"),Object(a.a)({name:"forget",data:function(){return{form:{mobile:"",verification_code:"",password:""},check_password:"",isLoading:!1}},methods:{forget:function(){var e=this,t=this.form;if(!(Object(i.f)(t.mobile)&&Object(i.g)(t.verification_code)&&Object(i.i)(t.password)&&Object(i.b)(t.password,this.check_password)))return!1;this.isLoading=!0,this.$store.dispatch("resetPassword",t).then(function(t){e.$router.push("/login"),e.isLoading=!1}).catch(function(){e.isLoading=!1})}},components:{HeadBanner:n.a,HeadBtn:c.a,CellMsgCodeGroup:s.a}})),l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"forget bg-fff"},[o("HeadBanner",{attrs:{src:e.$store.getters.config.wap_login_adv?e.$store.getters.config.wap_login_adv:e.$BASEIMGPATH+"login-head-default-01.png",link:e.$store.getters.config.wap_login_jump}}),e._v(" "),o("HeadBtn"),e._v(" "),o("HeadBtn",{attrs:{type:"home"}}),e._v(" "),o("van-cell-group",[o("van-field",{attrs:{label:"手机号码",type:"number",maxlength:"11","left-icon":"v-icon-phone",placeholder:"请输入您的手机号码"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}}),e._v(" "),o("CellMsgCodeGroup",{attrs:{mobile:e.form.mobile,type:"forget_password"},model:{value:e.form.verification_code,callback:function(t){e.$set(e.form,"verification_code",t)},expression:"form.verification_code"}}),e._v(" "),o("van-field",{attrs:{label:"新密码",type:"password","left-icon":"v-icon-password",placeholder:"请输入新密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),o("van-field",{attrs:{label:"确认密码",type:"password","left-icon":"v-icon-confirm",placeholder:"请输入确认新密码"},model:{value:e.check_password,callback:function(t){e.check_password=t},expression:"check_password"}})],1),e._v(" "),o("div",{staticClass:"foot-btn-group"},[o("van-button",{attrs:{size:"normal",type:"danger",round:"",block:"",loading:e.isLoading},on:{click:e.forget}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var d=o("VU/8")(r,l,!1,function(e){o("M/xc")},"data-v-23c299cc",null);t.default=d.exports},"M/xc":function(e,t){},PBxX:function(e,t){},RsEl:function(e,t){},jyGG:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("bOdI"),c=o.n(a),n=(o("nOaS"),o("pIDD")),s=(o("eqfM"),o("/QYm")),i=o("eKM9"),r=o("VKKs"),l=(o("vLgD"),o("IcnI")),d=Object(i.a)({name:"author",data:function(){return{}},beforeRouteEnter:function(e,t,o){e.query.code?o(function(t){t.$get("/login/oauthLogin",{code:e.query.code,type:"WCHAT"}).then(function(e){var t=e.code,a=e.data;1===t?(l.a.commit("setUserInfo",{user_token:a.user_token,have_mobile:a.have_mobile}),s.a.success("授权成功"),o({replace:!0,path:Object(r.c)("toPath")})):2===t?(Object(s.a)(message),o(function(e){e.$refs.load.result()})):3===t?(s.a.fail(message),o(function(e){e.$refs.load.result()})):4===t&&alert(a.url)}).catch(function(){o(function(e){e.onFail()})})}):e.query.user_token?(l.a.commit("setUserInfo",{user_token:e.query.user_token,have_mobile:!0}),s.a.success("授权成功"),o({replace:!0,path:Object(r.c)("toPath")})):o(function(e){e.onFail()})},methods:{onFail:function(){this.$refs.load.result(),this.$Toast.fail("授权失败")}},components:c()({},n.a.name,n.a)}),f={render:function(){var e=this.$createElement;return(this._self._c||e)("Layout",{ref:"load",staticClass:"author",attrs:{"loading-text":"授权中..."}})},staticRenderFns:[]};var u=o("VU/8")(d,f,!1,function(e){o("RsEl")},"data-v-62f86dac",null);t.default=u.exports},r8Hh:function(e,t){},vdVF:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("eKM9"),c=o("9uSG"),n=o("QmeG"),s=o("i8hT"),i=o("D1I1"),r=o("w3CS"),l=o("VKKs"),d=o("vMJZ"),f={name:"MsgLogin",data:function(){return{form:{account:"",verification_code:"",captcha_code:""},captcha_src:"",show_captcha_code:!1}},methods:{getImgCode:function(){var e=this;Object(d.c)().then(function(t){e.captcha_src=t.data.captcha_src+"?"+(new Date).getTime()})}},components:{CellMsgCodeGroup:i.a}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"msg-login"},[o("van-cell-group",[o("van-field",{attrs:{label:"手机号码",type:"number",maxlength:"11","left-icon":"v-icon-phone",placeholder:"请输入您的手机号码"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}}),e._v(" "),o("CellMsgCodeGroup",{attrs:{mobile:e.form.account,type:"login"},model:{value:e.form.verification_code,callback:function(t){e.$set(e.form,"verification_code",t)},expression:"form.verification_code"}}),e._v(" "),e.show_captcha_code?o("van-field",{staticClass:"field-cell",attrs:{label:"图片验证码",type:"number",maxlength:"4","left-icon":"v-icon-validate",placeholder:"请输入图片验证码"},model:{value:e.form.captcha_code,callback:function(t){e.$set(e.form,"captcha_code",t)},expression:"form.captcha_code"}},[o("div",{staticClass:"field-msg-code",attrs:{slot:"button"},on:{click:e.getImgCode},slot:"button"},[o("img",{attrs:{src:e._f("BASESRC")(e.captcha_src)}})])]):e._e()],1)],1)},staticRenderFns:[]};var g=o("VU/8")(f,u,!1,function(e){o("y7Tv")},"data-v-4fe3b6ec",null).exports,p={name:"AccountLogin",data:function(){return{form:{account:"",password:"",captcha_code:""},captcha_src:"",show_captcha_code:!1,mobile:""}},methods:{getImgCode:function(){var e=this;Object(d.c)().then(function(t){e.captcha_src=t.data.captcha_src+"?"+(new Date).getTime()}).catch(function(e){console.log(e)})}}},v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"account-login"},[o("van-cell-group",[o("van-field",{attrs:{label:"账号",type:"text","left-icon":"v-icon-user",placeholder:"请输入手机/用户名"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}}),e._v(" "),o("van-field",{attrs:{label:"密码",type:"password","left-icon":"v-icon-password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),e.show_captcha_code?o("van-field",{staticClass:"field-cell",attrs:{label:"图片验证码",type:"number",maxlength:"4","left-icon":"v-icon-validate",placeholder:"请输入图片验证码"},model:{value:e.form.captcha_code,callback:function(t){e.$set(e.form,"captcha_code",t)},expression:"form.captcha_code"}},[o("div",{staticClass:"field-msg-code",attrs:{slot:"button"},on:{click:e.getImgCode},slot:"button"},[o("img",{attrs:{src:e._f("BASESRC")(e.captcha_src)}})])]):e._e()],1)],1)},staticRenderFns:[]};var _=o("VU/8")(p,v,!1,function(e){o("vujc")},"data-v-274bec92",null).exports,h=Object(a.a)({name:"login",data:function(){return{tab_active:0,type:"login",tabs:[{title:"账号密码登录",type:"AccountLogin",isShow:!0},{title:"短信验证码登录",type:"MsgLogin",isShow:this.$store.getters.config.mobile_verification}],isLoading:!1}},methods:{vaildForm:function(){var e="";if(0===this.tab_active){if(e=this.$refs.AccountLogin[0].form,!Object(r.k)(e.account)||!Object(r.i)(e.password)||this.$refs.AccountLogin[0].show_captcha_code&&!Object(r.e)(e.captcha_code))return!1}else if(e=this.$refs.MsgLogin[0].form,!Object(r.f)(e.account)||!Object(r.g)(e.verification_code)||this.$refs.MsgLogin[0].show_captcha_code&&!Object(r.e)(e.captcha_code))return!1;return e},login:function(){var e=this,t=this.vaildForm();t&&(e.isLoading=!0,e.$store.dispatch("login",t).then(function(t){0===t.code?(e.$refs.AccountLogin[0].show_captcha_code=!0,e.$refs.AccountLogin[0].getImgCode(),e.$refs.MsgLogin&&(e.$refs.MsgLogin[0].show_captcha_code=!0,e.$refs.MsgLogin[0].getImgCode()),e.isLoading=!1):e.$router.replace(Object(l.c)("toPath")?Object(l.c)("toPath"):"/mall/index")}).catch(function(){e.isLoading=!1,0==e.tab_active?e.$refs.AccountLogin[0].show_captcha_code&&e.$refs.AccountLogin[0].getImgCode():e.$refs.MsgLogin&&e.$refs.MsgLogin[0].show_captcha_code&&e.$refs.MsgLogin[0].getImgCode()}))},onOtherLogin:function(e){this.$store.dispatch("otherLogin",{action:"author",form:{type:e,redirect_url:Object(l.c)("toPath")}})}},components:{HeadBanner:n.a,HeadBtn:c.a,Divider:s.a,MsgLogin:g,AccountLogin:_}}),m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login bg-fff"},[o("HeadBanner",{attrs:{src:e.$store.getters.config.wap_login_adv?e.$store.getters.config.wap_login_adv:e.$BASEIMGPATH+"login-head-default-01.png",link:e.$store.getters.config.wap_login_jump}}),e._v(" "),o("HeadBtn"),e._v(" "),o("HeadBtn",{attrs:{type:"home"}}),e._v(" "),o("van-tabs",{model:{value:e.tab_active,callback:function(t){e.tab_active=t},expression:"tab_active"}},e._l(e.tabs,function(t,a){return t.isShow?o("van-tab",{key:a,attrs:{title:t.title}},[o(t.type,{ref:t.type,refInFor:!0,tag:"component"})],1):e._e()})),e._v(" "),o("div",{staticClass:"login-assist"},[o("router-link",{staticClass:"text-maintone",attrs:{to:"/register"}},[e._v("快速注册 >")]),e._v(" "),o("router-link",{staticClass:"text-secondary",attrs:{to:"/forget"}},[e._v("忘记密码?")])],1),e._v(" "),o("div",{staticClass:"foot-btn-group"},[o("van-button",{attrs:{size:"normal",type:"danger",round:"",block:"",loading:e.isLoading,"loading-text":"登录中..."},on:{click:e.login}},[e._v("登录")])],1),e._v(" "),e.$store.getters.config.qq_login?o("Divider",{attrs:{title:"其他登录方式"}},[o("div",{staticClass:"login-type",attrs:{slot:"html"},slot:"html"},[e.$store.getters.config.wechat_login&&e.$store.state.isWeixin&&e.$store.getters.config.is_wchat?o("div",{staticClass:"box"},[o("img",{attrs:{src:e.$BASEIMGPATH+"wx-login-icon.png"},on:{click:function(t){e.onOtherLogin("WCHAT")}}})]):e._e(),e._v(" "),e.$store.getters.config.qq_login?o("div",{staticClass:"box"},[o("img",{attrs:{src:e.$BASEIMGPATH+"qq-login-icon.png"},on:{click:function(t){e.onOtherLogin("QQLOGIN")}}})]):e._e()])]):e._e()],1)},staticRenderFns:[]};var b=o("VU/8")(h,m,!1,function(e){o("r8Hh")},"data-v-3f1b6730",null);t.default=b.exports},vujc:function(e,t){},y7Tv:function(e,t){}});