webpackJsonp([1],{"3gWi":function(t,i,e){"use strict";var s=e("nsZj"),o=(e.n(s),e("yU4Z"));e.n(o)},"46i5":function(t,i){},BSJs:function(t,i,e){"use strict";var s=e("bOdI"),o=e.n(s),a=(e("3gWi"),e("ZxCb")),n=(e("nsZj"),e("hW8u"),e("JsOw"),e("W0KU"),e("CGQl"),e("WPoX")),c=e("7+uW"),r=e("AA6R"),l=e.n(r),h=e("o69Z"),u=e("sM86"),d=e("CsZI"),v=e("vwLT"),p=Object(h.j)("swipe"),f=p[0],m=p[1],g=f({mixins:[v.a],props:{width:Number,height:Number,autoplay:Number,vertical:Boolean,initialSwipe:Number,indicatorColor:String,loop:{type:Boolean,default:!0},touchable:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!0},duration:{type:Number,default:500}},data:function(){return{computedWidth:0,computedHeight:0,offset:0,active:0,deltaX:0,deltaY:0,swipes:[],swiping:!1}},mounted:function(){this.initialize(),this.$isServer||Object(u.b)(window,"resize",this.onResize,!0)},activated:function(){this.rendered&&this.initialize(),this.rendered=!0},destroyed:function(){this.clear(),this.$isServer||Object(u.a)(window,"resize",this.onResize,!0)},watch:{swipes:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t?this.autoPlay():this.clear()}},computed:{count:function(){return this.swipes.length},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?"vertical":"horizontal";return this.direction===t},trackStyle:function(){var t,i=this.vertical?"height":"width",e=this.vertical?"width":"height";return(t={})[i]=this.trackSize+"px",t[e]=this[e]?this[e]+"px":"",t.transitionDuration=(this.swiping?0:this.duration)+"ms",t.transform="translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)",t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}}},methods:{initialize:function(t){if(void 0===t&&(t=this.initialSwipe),clearTimeout(this.timer),this.$el){var i=this.$el.getBoundingClientRect();this.computedWidth=this.width||i.width,this.computedHeight=this.height||i.height}this.swiping=!0,this.active=t,this.offset=this.count>1?-this.size*this.active:0,this.swipes.forEach(function(t){t.offset=0}),this.autoPlay()},onResize:function(){this.initialize(this.activeIndicator)},onTouchStart:function(t){this.touchable&&(this.clear(),this.swiping=!0,this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&(Object(u.c)(t,!0),this.move({offset:Math.min(Math.max(this.delta,-this.size),this.size)})))},onTouchEnd:function(){if(this.touchable&&this.swiping){if(this.delta&&this.isCorrectDirection){var t=this.vertical?this.offsetY:this.offsetX;this.move({pace:t>0?this.delta>0?-1:1:0,emitChange:!0})}this.swiping=!1,this.autoPlay()}},move:function(t){var i=t.pace,e=void 0===i?0:i,s=t.offset,o=void 0===s?0:s,a=t.emitChange,n=this.delta,c=this.active,r=this.count,l=this.swipes,h=this.trackSize,u=0===c,d=c===r-1;!this.loop&&(u&&(o>0||e<0)||d&&(o<0||e>0))||r<=1||(l[0]&&(l[0].offset=d&&(n<0||e>0)?h:0),l[r-1]&&(l[r-1].offset=u&&(n>0||e<0)?-h:0),e&&c+e>=-1&&c+e<=r&&(this.active+=e,a&&this.$emit("change",this.activeIndicator)),this.offset=Math.round(o-this.active*this.size))},swipeTo:function(t){var i=this;this.swiping=!0,this.resetTouchStatus(),this.correctPosition(),setTimeout(function(){i.swiping=!1,i.move({pace:t%i.count-i.active,emitChange:!0})},30)},correctPosition:function(){this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,i=this.autoplay;i&&this.count>1&&(this.clear(),this.timer=setTimeout(function(){t.swiping=!0,t.resetTouchStatus(),t.correctPosition(),setTimeout(function(){t.swiping=!1,t.move({pace:1,emitChange:!0}),t.autoPlay()},30)},i))}},render:function(t){var i=this,e=this.count,s=this.activeIndicator,o=this.slots("indicator")||this.showIndicators&&e>1&&t("div",{class:m("indicators",{vertical:this.vertical})},[Array.apply(void 0,Array(e)).map(function(e,o){return t("i",{class:m("indicator",{active:o===s}),style:o===s?i.indicatorStyle:null})})]);return t("div",{class:m()},[t("div",{ref:"track",style:this.trackStyle,class:m("track"),on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[this.slots()]),o])}}),b=Object(h.j)("swipe-item"),_=b[0],k=b[1],w=_({data:function(){return{offset:0}},beforeCreate:function(){this.$parent.swipes.push(this)},destroyed:function(){this.$parent.swipes.splice(this.$parent.swipes.indexOf(this),1)},render:function(t){var i=this.$parent,e=i.vertical,s=i.computedWidth,o=i.computedHeight,a={width:s+"px",height:e?o+"px":"100%",transform:"translate"+(e?"Y":"X")+"("+this.offset+"px)"};return t("div",{class:k(),style:a,on:Object(n.a)({},this.$listeners)},[this.slots()])}}),y=Object(h.j)("image-preview"),x=y[0],C=y[1];function $(t){return Math.sqrt(Math.abs((t[0].clientX-t[1].clientX)*(t[0].clientY-t[1].clientY)))}var S,z=x({mixins:[d.a,v.a],props:{images:Array,className:null,lazyLoad:Boolean,asyncClose:Boolean,startPosition:Number,showIndicators:Boolean,loop:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},minZoom:{type:Number,default:1/3},maxZoom:{type:Number,default:3},overlayClass:{type:String,default:"van-image-preview__overlay"},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,active:0}},computed:{imageStyle:function(){var t=this.scale,i={transition:this.zooming||this.moving?"":".3s all"};return 1!==t&&(i.transform="scale3d("+t+", "+t+", 1) translate("+this.moveX/t+"px, "+this.moveY/t+"px)"),i}},watch:{value:function(){this.active=this.startPosition},startPosition:function(t){this.active=t}},methods:{onWrapperTouchStart:function(){this.touchStartTime=new Date},onWrapperTouchEnd:function(t){Object(u.c)(t);var i=new Date-this.touchStartTime,e=this.$refs.swipe||{},s=e.offsetX,o=void 0===s?0:s,a=e.offsetY;if(i<300&&o<10&&(void 0===a?0:a)<10){var n=this.active;this.resetScale(),this.$emit("close",{index:n,url:this.images[n]}),this.asyncClose||this.$emit("input",!1)}},startMove:function(t){var i=t.currentTarget.getBoundingClientRect(),e=window.innerWidth,s=window.innerHeight;this.touchStart(t),this.moving=!0,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.maxMoveX=Math.max(0,(i.width-e)/2),this.maxMoveY=Math.max(0,(i.height-s)/2)},startZoom:function(t){this.moving=!1,this.zooming=!0,this.startScale=this.scale,this.startDistance=$(t.touches)},onTouchStart:function(t){var i=t.touches,e=(this.$refs.swipe||{}).offsetX,s=void 0===e?0:e;1===i.length&&1!==this.scale?this.startMove(t):2!==i.length||s||this.startZoom(t)},onTouchMove:function(t){var i=t.touches;if((this.moving||this.zooming)&&Object(u.c)(t,!0),this.moving){this.touchMove(t);var e=this.deltaX+this.startMoveX,s=this.deltaY+this.startMoveY;this.moveX=Object(h.i)(e,-this.maxMoveX,this.maxMoveX),this.moveY=Object(h.i)(s,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===i.length){var o=$(i),a=this.startScale*o/this.startDistance;this.scale=Object(h.i)(a,this.minZoom,this.maxZoom)}},onTouchEnd:function(t){if(this.moving||this.zooming){var i=!0;this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(i=!1),t.touches.length||(this.moving=!1,this.zooming=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale()),i&&Object(u.c)(t,!0)}},onChange:function(t){this.resetScale(),this.active=t,this.$emit("change",t)},resetScale:function(){this.scale=1,this.moveX=0,this.moveY=0}},render:function(t){var i=this;if(this.value){var e=this.active,s=this.images,o=this.showIndex&&t("div",{class:C("index")},[this.slots("index")||e+1+"/"+s.length]),a=t(g,{ref:"swipe",attrs:{loop:this.loop,indicatorColor:"white",initialSwipe:this.startPosition,showIndicators:this.showIndicators},on:{change:this.onChange}},[s.map(function(s,o){var a={class:C("image"),style:o===e?i.imageStyle:null,on:{touchstart:i.onTouchStart,touchmove:i.onTouchMove,touchend:i.onTouchEnd,touchcancel:i.onTouchEnd}};return t(w,[i.lazyLoad?t("img",l()([{directives:[{name:"lazy",value:s}]},a])):t("img",l()([{attrs:{src:s}},a]))])})]);return t("transition",{attrs:{name:"van-fade"}},[t("div",{class:[C(),this.className],on:{touchstart:this.onWrapperTouchStart,touchend:this.onWrapperTouchEnd,touchcancel:this.onWrapperTouchEnd}},[o,a])])}}}),T={images:[],loop:!0,value:!0,minZoom:1/3,maxZoom:3,className:"",lazyLoad:!1,showIndex:!0,asyncClose:!1,startPosition:0,showIndicators:!1},P=function(t,i){if(void 0===i&&(i=0),!h.g){S||(S=new(c.a.extend(z))({el:document.createElement("div")}),document.body.appendChild(S.$el));var e=Array.isArray(t)?{images:t,startPosition:i}:t;return Object(n.a)(S,T,e),S.$once("input",function(t){S.value=t}),e.onClose&&S.$once("close",e.onClose),S}};P.install=function(){c.a.use(z)};var O=P,M={data:function(){return{}},props:{list:{type:Array},showDelete:{type:Boolean,default:!0}},methods:{onPreview:function(t){O({images:this.list,startPosition:t})},onDelete:function(t){var i=this;this.$Dialog.confirm({showCancelButton:!0,message:"确定删除该图片？"}).then(function(){i.list.splice(t,1),i.$emit("delete",i.list,t)})}}},j={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"img-group"},t._l(t.list,function(i,s){return e("div",{key:s,staticClass:"item"},[t.showDelete?e("van-icon",{staticClass:"btn-delete",attrs:{name:"close"},on:{click:function(i){t.onDelete(s)}}}):t._e(),t._v(" "),e("div",{staticClass:"box e-handle",on:{click:function(i){t.onPreview(s)}}},[e("img",{attrs:{src:t._f("BASESRC")(i)}})])],1)}))},staticRenderFns:[]};var E,B=e("VU/8")(M,j,!1,function(t){e("DYTv")},"data-v-3aa502fa",null).exports,X={data:function(){return{}},props:{value:Boolean,info:Object},computed:{checked:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},components:(E={},o()(E,a.a.name,a.a),o()(E,"ImagePanelPreview",B),E)},Y={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("van-cell-group",[e("van-cell",{attrs:{title:"基础信息","title-class":"title"}}),t._v(" "),e("van-cell",{staticClass:"cell-panel",attrs:{title:"图片"}},[e("ImagePanelPreview",{attrs:{"show-delete":!1,list:t.info.img}})],1),t._v(" "),e("van-cell",{staticClass:"cell-panel",attrs:{title:"商品标题"}},[e("div",{staticClass:"value"},[t._v(t._s(t.info.name))])]),t._v(" "),e("van-cell",{staticClass:"cell-panel",attrs:{title:"是否上架","value-class":"flex"}},[e("van-switch",{attrs:{size:"24px"},model:{value:t.checked,callback:function(i){t.checked=i},expression:"checked"}})],1)],1)},staticRenderFns:[]};var I=e("VU/8")(X,Y,!1,function(t){e("bb1y")},"data-v-19eb4b40",null);i.a=I.exports},CGQl:function(t,i){},DVwd:function(t,i,e){"use strict";(function(t){var s=e("BSJs"),o=e("vkwB"),a=e("W0az"),n=e("qsHl"),c=e("oFuF");i.a={name:"goods-edit",data:function(){return{state:!1,isLoading:!1,goodsInfo:{img:[],name:""},sku_list:[{sku_name:"",sku_id:0,price:0,market_price:0,stock:0,bar_code:""}]}},created:function(){this.loadData()},beforeRouteEnter:function(i,e,s){"/clerk"+i.path!==t.location.pathname&&Object(c.g)()?location.assign("/clerk"+i.fullPath):s()},methods:{loadData:function(){var t=this,i="#add"==this.$route.hash?"add":"edit";Object(n.b)(this.$route.params.goodsid,i).then(function(i){var e=i.data;t.goodsInfo={img:e.goods_img||[],name:e.goods_name},t.state=!!e.state,e.sku_list.forEach(function(t){t.bar_code=t.bar_code||""}),t.sku_list=e.sku_list||[]})},save:function(t){var i=this,e={};e.goods_id=this.$route.params.goodsid,e.state=this.state?1:0,e.sku_list=t,this.isLoading=!0,Object(n.d)({product:e}).then(function(t){var e=t.message;i.$Toast.success(e),i.$router.back()}).catch(function(){i.isLoading=!1})}},components:{EditInfoPanelGroup:s.a,EditSkuPanelGroup:o.a,EditFootBtnGroup:a.a}}}).call(i,e("DuR2"))},DYTv:function(t,i){},JsOw:function(t,i){},W0KU:function(t,i){},W0az:function(t,i,e){"use strict";var s={data:function(){return{showPopup:!1,item:{price:"",market_price:"",stock:"",bar_code:""}}},props:{list:Array,loading:Boolean},methods:{comfirm:function(){var t=this.validator(this.list);t&&this.$emit("comfirm",t)},validator:function(t){var i=this,e=!0,s=[];return t.forEach(function(t){s.push({sku_id:t.sku_id,price:t.price,market_price:t.market_price,stock:t.stock,bar_code:t.bar_code}),isNaN(parseFloat(t.price))&&(i.$Toast("请输入销售价"),e=!1),parseFloat(t.price)<0&&(i.$Toast("销售价不能小于0！"),e=!1),isNaN(parseFloat(t.market_price))&&(i.$Toast("请输入市场价"),e=!1),parseFloat(t.market_price)<0&&(i.$Toast("市场价不能小于0！"),e=!1),isNaN(parseFloat(t.stock))&&(i.$Toast("请输入库存"),e=!1),parseFloat(t.stock)<0&&(i.$Toast("库存不能小于0！"),e=!1)}),!!e&&s},closePopup:function(){this.showPopup=!1},popupComfirm:function(){var t=this,i=function(i){t.item[i]&&t.list.forEach(function(e){e[i]=t.item[i]})};for(var e in this.item)i(e);this.closePopup()},scanQR:function(){var t=this;this.$store.dispatch("scanQRCode").then(function(i){t.item.bar_code=i})}}},o={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"btn-group"},[t.list.length>1?e("van-button",{attrs:{type:"default",size:"normal",hairline:"",square:"",block:""},on:{click:function(i){t.showPopup=!0}}},[t._v("批量设定")]):t._e(),t._v(" "),e("van-button",{attrs:{type:"danger",size:"normal",hairline:"",square:"",block:"",loading:t.loading},on:{click:t.comfirm}},[t._v("保存")])],1),t._v(" "),e("van-popup",{staticClass:"popup",attrs:{position:"bottom"},model:{value:t.showPopup,callback:function(i){t.showPopup=i},expression:"showPopup"}},[e("div",[e("div",{staticClass:"van-hairline--top-bottom van-actionsheet__header"},[e("div",[t._v("批量设定")]),t._v(" "),e("van-icon",{attrs:{name:"close"},on:{click:t.closePopup}})],1),t._v(" "),e("van-cell-group",{staticClass:"cell-group"},[e("van-field",{attrs:{label:"销售价",type:"number",placeholder:"请输入销售价"},model:{value:t.item.price,callback:function(i){t.$set(t.item,"price",i)},expression:"item.price"}}),t._v(" "),e("van-field",{attrs:{label:"市场价",type:"number",placeholder:"请输入市场价"},model:{value:t.item.market_price,callback:function(i){t.$set(t.item,"market_price",i)},expression:"item.market_price"}}),t._v(" "),e("van-field",{attrs:{label:"库存",type:"number",placeholder:"请输入库存"},model:{value:t.item.stock,callback:function(i){t.$set(t.item,"stock",i)},expression:"item.stock"}}),t._v(" "),e("van-field",{attrs:{label:"条形码",placeholder:"选填，用于O2O扫码","right-icon":t.$store.state.isWeixin?"v-icon-qr1":""},on:{"click-right-icon":t.scanQR},model:{value:t.item.bar_code,callback:function(i){t.$set(t.item,"bar_code",i)},expression:"item.bar_code"}})],1),t._v(" "),e("div",{staticClass:"btn-group"},[e("van-button",{attrs:{type:"danger",size:"normal",hairline:"",square:"",block:""},on:{click:t.popupComfirm}},[t._v("确定")]),t._v(" "),e("van-button",{attrs:{type:"default",size:"normal",hairline:"",square:"",block:""},on:{click:t.closePopup}},[t._v("取消")])],1)],1)])],1)},staticRenderFns:[]};var a=e("VU/8")(s,o,!1,function(t){e("46i5")},"data-v-127eb3ec",null);i.a=a.exports},ZxCb:function(t,i,e){"use strict";var s=e("AA6R"),o=e.n(s),a=e("o69Z"),n=e("pIDD"),c={value:null,loading:Boolean,disabled:Boolean,activeColor:String,inactiveColor:String,activeValue:{type:null,default:!0},inactiveValue:{type:null,default:!1},size:{type:String,default:"30px"}},r=e("rhik"),l=Object(a.j)("switch"),h=l[0],u=l[1];function d(t,i,e,s){var a=i.value,c=i.loading,l=i.disabled,h=i.activeValue,d=i.inactiveValue,v={fontSize:i.size,backgroundColor:a?i.activeColor:i.inactiveColor};return t("div",o()([{class:u({on:a===h,disabled:l}),style:v,on:{click:function(){if(!l&&!c){var t=a===h?d:h;Object(r.a)(s,"input",t),Object(r.a)(s,"change",t)}}}},Object(r.b)(s)]),[t("div",{class:u("node")},[c&&t(n.a,{class:u("loading")})])])}d.props=c;i.a=h(d)},abjX:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("DVwd"),o={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"goods-edit bg-f8"},[e("Navbar"),t._v(" "),e("EditInfoPanelGroup",{attrs:{info:t.goodsInfo},model:{value:t.state,callback:function(i){t.state=i},expression:"state"}}),t._v(" "),e("EditSkuPanelGroup",{attrs:{list:t.sku_list}}),t._v(" "),e("EditFootBtnGroup",{attrs:{list:t.sku_list,loading:t.isLoading},on:{comfirm:t.save}})],1)},staticRenderFns:[]};var a=function(t){e("lQ4a")},n=e("VU/8")(s.a,o,!1,a,"data-v-77ba3bda",null);i.default=n.exports},bb1y:function(t,i){},lQ4a:function(t,i){},vkwB:function(t,i,e){"use strict";var s={data:function(){return{}},props:{list:Array},methods:{scanQR:function(t){var i=this;this.$store.dispatch("scanQRCode").then(function(e){i.list[t].bar_code=e})}},components:{}},o={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"panel-group"},[e("van-cell",{attrs:{title:"价格库存","title-class":"title"}}),t._v(" "),t._l(t.list,function(i,s){return e("van-cell-group",{key:s,staticClass:"cell-group",attrs:{border:!1}},[i.sku_name?e("van-cell",{attrs:{title:i.sku_name}}):t._e(),t._v(" "),e("van-field",{attrs:{required:"",label:"销售价",type:"number",placeholder:"请输入销售价"},model:{value:i.price,callback:function(e){t.$set(i,"price",e)},expression:"item.price"}}),t._v(" "),e("van-field",{attrs:{required:"",label:"市场价",type:"number",placeholder:"请输入市场价"},model:{value:i.market_price,callback:function(e){t.$set(i,"market_price",e)},expression:"item.market_price"}}),t._v(" "),e("van-field",{attrs:{required:"",label:"库存",type:"number",placeholder:"请输入库存"},model:{value:i.stock,callback:function(e){t.$set(i,"stock",e)},expression:"item.stock"}}),t._v(" "),e("van-field",{attrs:{label:"条形码",placeholder:"选填，用于O2O扫码","right-icon":t.$store.state.isWeixin?"v-icon-qr1":""},on:{"click-right-icon":function(i){t.scanQR(s)}},model:{value:i.bar_code,callback:function(e){t.$set(i,"bar_code",e)},expression:"item.bar_code"}})],1)})],2)},staticRenderFns:[]};var a=e("VU/8")(s,o,!1,function(t){e("vqxi")},"data-v-0e977c61",null);i.a=a.exports},vqxi:function(t,i){},yU4Z:function(t,i){}});