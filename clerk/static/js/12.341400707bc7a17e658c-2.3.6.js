webpackJsonp([12],{OzY0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("//Fk"),n=a.n(i),s=a("r4M4"),o=a("yRCI"),c=a("msXN"),r=a("qsHl"),l={name:"goods-add",data:function(){return{activeKey:0,category_list:[],params:{category_id:""},viewHeight:{height:"calc(100vh - "+(this.$store.state.isWeixin?"0":"46")+"px)"}}},mixins:[c.c],created:function(){this.loadData()},methods:{onChangeNav:function(t){this.activeKey=t,this.params.category_id=this.category_list[t].category_id,this.loadList("init")},getCategory:function(){var t=this;return new n.a(function(e,a){Object(r.a)({},"add").then(function(a){var i=a.data;t.category_list=i||[],e()}).catch(function(){})})},loadData:function(t){var e=this;this.getCategory().then(function(){e.params.category_id=e.category_list[e.activeKey]?e.category_list[e.activeKey].category_id:"",e.loadList(t)})},loadList:function(t){var e=this;t&&"init"===t&&this.initList(),Object(r.c)(this.params,"add").then(function(a){var i=a.data,n=i.goods_info||[];n.forEach(function(t){t.operate=[{text:"添加",type:"Add"}]}),e.pushToList(n,i.page_count,t)}).catch(function(){e.loadError()})},btnOperate:function(t){t.type;this.loadList("init")}},components:{CategoryView:s.a,GoodsPanelGroup:o.a}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-add bg-f8"},[a("Navbar",[a("van-icon",{attrs:{slot:"slotRight",name:"v-icon-search"},on:{click:function(e){t.$router.push("/search?type=goods&search_type=add")}},slot:"slotRight"})],1),t._v(" "),a("CategoryView",{attrs:{"view-style":t.viewHeight}},[a("div",{staticClass:"nav-group",attrs:{slot:"nav"},slot:"nav"},t._l(t.category_list,function(e,i){return a("div",{key:i,staticClass:"item",class:t.activeKey==i?"activeKey":"",on:{click:function(e){t.onChangeNav(i)}}},[a("span",{staticClass:"nav-item-text"},[t._v(t._s(e.short_name||e.category_name))])])})),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("List",{attrs:{finished:t.finished,error:t.error,"is-empty":t.isListEmpty,empty:{message:"没有相关商品"}},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,i){return a("GoodsPanelGroup",{key:i,attrs:{items:e},on:{"btn-click":t.btnOperate}})}))],1)]),t._v(" "),t.$store.state.isWeixin?a("div",{staticClass:"search-btn"},[a("van-icon",{attrs:{name:"v-icon-search"},on:{click:function(e){t.$router.push("/search?type=goods&search_type=add")}}})],1):t._e()],1)},staticRenderFns:[]};var u=a("VU/8")(l,d,!1,function(t){a("gBPu")},"data-v-41a2d3a3",null);e.default=u.exports},gBPu:function(t,e){},pet1:function(t,e){},r4M4:function(t,e,a){"use strict";var i={data:function(){return{}},props:{viewStyle:{type:[Object,Boolean]},navStyle:{type:Object},contentStyle:{type:Object},top:{type:[Number,String],default:0},bottom:{type:[Number,String],default:0}},computed:{viewHeight:function(){return{height:"calc(100vh - "+(Number(this.top)+Number(this.bottom))+"px)"}}}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"category-view",style:[this.viewHeight,this.viewStyle]},[e("div",{staticClass:"category"},[e("div",{staticClass:"nav",style:this.navStyle},[this._t("nav")],2),this._v(" "),e("div",{staticClass:"content",style:this.contentStyle},[this._t("content")],2)])])},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(t){a("pet1")},"data-v-1dc0e107",null);e.a=s.exports}});