webpackJsonp([8],{"2yBr":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("WyhY"),r=s("VKKs"),i={name:"search",data:function(){return{placeholder:"请输入搜索关键词",path:"",historyList:[],type:""}},created:function(){var t=this.$route.query,e=t.type,s=t.search_type,a=t.params_type,i="/goods/search?search_text=";"goods"===e&&(i="/goods/search?search_type="+s+"&search_text="),a&&(i="/goods/search?search_type="+s+"&params_type="+a+"&search_text="),this.type=e,this.path=i,Object(r.a)("store_history_key_"+e)&&(this.historyList=Object(r.a)("store_history_key_"+e))},methods:{onBack:function(){this.$router.back()},onSearch:function(t){var e=this.path,s=t.trim();if(!s)return this.$Toast("内容不能为空");this.saveHistory(s),this.$router.push({path:e,query:{search_text:s}})},insertArray:function(t,e,s,a){var r=t.findIndex(s);0!==r&&(r>0&&t.splice(r,1),t.unshift(e),a&&t.length>a&&t.pop())},saveHistory:function(t){var e=Object(r.a)("store_history_key_"+this.type)?Object(r.a)("store_history_key_"+this.type):[];return this.insertArray(e,t,function(e){return e===t},15),Object(r.e)("store_history_key_"+this.type,e),e},removeHistory:function(){var t=this;t.$Dialog.confirm({title:"提示",message:"确定删除所有历史记录？"}).then(function(){Object(r.c)("store_history_key_"+t.type),t.historyList=[]}).catch(function(){})}},components:{HeadSearch:a.a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search bg-f8"},[s("HeadSearch",{attrs:{disabled:!1,showLeft:"","show-action":"",placeholder:t.placeholder},on:{rightAction:t.onSearch}}),t._v(" "),t.historyList.length>0?s("div",{staticClass:"search-history"},[s("div",{staticClass:"history-head"},[t._v("历史搜索")]),t._v(" "),s("div",{staticClass:"history-list"},[s("van-cell-group",t._l(t.historyList,function(e,a){return s("van-cell",{key:a,attrs:{clickable:"",value:e,to:t.path+e}})}))],1),t._v(" "),s("div",{staticClass:"history-foot"},[s("van-button",{attrs:{round:""},on:{click:t.removeHistory}},[t._v("清空历史记录")])],1)]):s("div",{staticClass:"empty"},[t._v("暂无搜索记录")])],1)},staticRenderFns:[]};var c=s("VU/8")(i,o,!1,function(t){s("A5/z")},"data-v-4aabc1b6",null);e.default=c.exports},"A5/z":function(t,e){},UV5r:function(t,e){},WyhY:function(t,e,s){"use strict";var a=s("bOdI"),r=s.n(a),i=(s("4yKu"),s("wolx")),o={data:function(){return{value:""}},props:{searchType:{type:String,default:"goods"},placeholder:{type:String},showAction:{type:Boolean,default:!1},rightActionText:{type:String},top:{type:[String]},showLeft:{type:Boolean,default:!1},disabled:{type:Boolean,default:!0},replace:{type:Boolean,default:!1},leftClick:Function},methods:{toSearch:function(){if(this.disabled){var t={path:"/search",query:{type:this.searchType}};this.replace?this.$router.replace(t):this.$router.push(t)}},onLeftClick:function(){this.leftClick?this.leftClick():this.$router.back()},rightAction:function(){this.$emit("rightAction",this.value)}},components:r()({},i.a.name,i.a)},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"head-search"},[s("div",{staticClass:"search-box",style:{top:t.top},on:{click:t.toSearch}},[t.showLeft?s("div",{staticClass:"left-icon e-handle",on:{click:t.onLeftClick}},[s("van-icon",{attrs:{name:"arrow-left"}})],1):t._e(),t._v(" "),s("van-search",{staticClass:"search",attrs:{disabled:t.disabled,placeholder:t.placeholder||"请输入关键词","show-action":t.showAction},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[t.showAction?s("div",{attrs:{slot:"action"},on:{click:function(e){return e.stopPropagation(),t.rightAction(e)}},slot:"action"},[t._v(t._s(t.rightActionText||"搜索"))]):t._e()])],1)])},staticRenderFns:[]};var n=s("VU/8")(o,c,!1,function(t){s("UV5r")},"data-v-cdbe5320",null);e.a=n.exports}});