webpackJsonp([11],{"28ui":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("//Fk"),s=a.n(i),n=a("ORU3"),o=a("r4M4"),r=a("yRCI"),c=a("msXN"),l=a("qsHl"),p={name:"goods-index",data:function(){return{tabs:[{name:"已上架商品",type:1},{name:"仓库中商品",type:2}],activeKey:0,category_list:[],params:{category_id:"",type:1},viewHeight:{height:"calc(100vh - "+(this.$store.state.isWeixin?"88":"134")+"px)"}}},mixins:[c.c],created:function(){this.loadData()},methods:{tabChange:function(t){this.activeKey=0,this.params.type=this.tabs[t].type,this.loadData("init")},onChangeNav:function(t){this.activeKey=t,this.params.category_id=this.category_list[t].category_id,this.loadList("init")},getCategory:function(){var t=this;return new s.a(function(e,a){Object(l.a)({type:t.params.type}).then(function(a){var i=a.data;t.category_list=i||[],e()}).catch(function(){})})},loadData:function(t){var e=this;this.getCategory().then(function(){e.params.category_id=e.category_list[e.activeKey]?e.category_list[e.activeKey].category_id:"",e.loadList(t)})},loadList:function(t){var e=this,a=this;t&&"init"===t&&a.initList(),Object(l.c)(a.params).then(function(i){var s=i.data,n=s.goods_info||[];n.forEach(function(t){t.operate=[{text:"编辑",type:"Edit"}],1==a.params.type&&t.operate.push({text:"下架",type:"Offline"}),2==a.params.type&&t.operate.push({text:"上架",type:"Online"},{text:"移除",type:"Del"})}),e.pushToList(n,s.page_count,t)}).catch(function(){e.loadError()})},btnOperate:function(t){t.type,t.text,t.id;this.loadList("init")}},components:{HeadTab:n.a,CategoryView:o.a,GoodsPanelGroup:r.a}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-index bg-f8"},[a("Navbar",[a("van-icon",{attrs:{slot:"slotRight",name:"v-icon-search"},on:{click:function(e){t.$router.push("/search?type=goods&search_type=all&params_type="+t.params.type)}},slot:"slotRight"})],1),t._v(" "),a("HeadTab",{attrs:{tabs:t.tabs},on:{"tab-change":t.tabChange}}),t._v(" "),a("CategoryView",{attrs:{"view-style":t.viewHeight}},[a("div",{staticClass:"nav-group",attrs:{slot:"nav"},slot:"nav"},t._l(t.category_list,function(e,i){return a("div",{key:i,staticClass:"item",class:t.activeKey==i?"activeKey":"",on:{click:function(e){t.onChangeNav(i)}}},[a("span",{staticClass:"nav-item-text"},[t._v(t._s(e.short_name||e.category_name))])])})),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("List",{attrs:{finished:t.finished,error:t.error,"is-empty":t.isListEmpty,empty:{message:"没有相关商品"}},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,i){return a("GoodsPanelGroup",{key:i,attrs:{items:e},on:{"btn-click":t.btnOperate}})}))],1)]),t._v(" "),t.$store.state.isWeixin?a("div",{staticClass:"search-btn"},[a("van-icon",{attrs:{name:"v-icon-search"},on:{click:function(e){t.$router.push("/search?type=goods&search_type=all&params_type="+t.params.type)}}})],1):t._e(),t._v(" "),a("div",{staticClass:"foot"},[a("van-button",{attrs:{type:"default",size:"normal",hairline:"",square:"",block:"",to:"/goods/add"}},[t._v("添加商品")])],1)],1)},staticRenderFns:[]};var y=a("VU/8")(p,u,!1,function(t){a("X1Te")},"data-v-54b21d0a",null);e.default=y.exports},X1Te:function(t,e){},pet1:function(t,e){},r4M4:function(t,e,a){"use strict";var i={data:function(){return{}},props:{viewStyle:{type:[Object,Boolean]},navStyle:{type:Object},contentStyle:{type:Object},top:{type:[Number,String],default:0},bottom:{type:[Number,String],default:0}},computed:{viewHeight:function(){return{height:"calc(100vh - "+(Number(this.top)+Number(this.bottom))+"px)"}}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"category-view",style:[this.viewHeight,this.viewStyle]},[e("div",{staticClass:"category"},[e("div",{staticClass:"nav",style:this.navStyle},[this._t("nav")],2),this._v(" "),e("div",{staticClass:"content",style:this.contentStyle},[this._t("content")],2)])])},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("pet1")},"data-v-1dc0e107",null);e.a=n.exports}});