webpackJsonp([4],{"+3Ep":function(t,e){},"3UG7":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44}}},"5Hoj":function(t,e){},N0xK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("vLgD");var a=n("oFuF"),s=n("bOdI"),o=n.n(s),u=(n("nsZj"),n("5Hoj"),n("WPoX")),r=n("o69Z"),l=n("qWG/"),c=n("3UG7");function h(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}function m(t){return("00"+t).slice(-2)}function f(t){if(t){for(;isNaN(parseInt(t,10));)t=t.slice(1);return parseInt(t,10)}}function d(t,e){return 32-new Date(t,e-1,32).getDate()}var p=Object(r.j)("datetime-picker"),v=p[0],g=p[1],x=(new Date).getFullYear(),y=v({props:Object(u.a)({},c.a,{value:null,minHour:Number,minMinute:Number,type:{type:String,default:"datetime"},showToolbar:{type:Boolean,default:!0},format:{type:String,default:"YYYY.MM.DD HH时 mm分"},formatter:{type:Function,default:function(t,e){return e}},minDate:{type:Date,default:function(){return new Date(x-10,0,1)},validator:h},maxDate:{type:Date,default:function(){return new Date(x+10,11,31)},validator:h},maxHour:{type:Number,default:23},maxMinute:{type:Number,default:59}}),data:function(){return{innerValue:this.correctValue(this.value)}},watch:{value:function(t){t=this.correctValue(t),("time"===this.type?t===this.innerValue:t.valueOf()===this.innerValue.valueOf())||(this.innerValue=t,"time"===this.type&&this.updateColumnValue(t))},innerValue:function(t){this.$emit("input",t)},columns:function(){this.updateColumnValue(this.innerValue)}},computed:{ranges:function(){if("time"===this.type)return[{type:"hour",range:[this.minHour,this.maxHour]},{type:"minute",range:[this.minMinute,this.maxMinute]}];var t=this.getBoundary("max",this.innerValue),e=t.maxYear,n=t.maxDate,i=t.maxMonth,a=t.maxHour,s=t.maxMinute,o=this.getBoundary("min",this.innerValue),u=o.minYear,r=o.minDate,l=[{type:"year",range:[u,e]},{type:"month",range:[o.minMonth,i]},{type:"day",range:[r,n]},{type:"hour",range:[o.minHour,a]},{type:"minute",range:[o.minMinute,s]}];return"date"===this.type&&l.splice(3,2),"year-month"===this.type&&l.splice(2,3),l},columns:function(){var t=this;return this.ranges.map(function(e){var n=e.type,i=e.range;return{values:function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(i[1]-i[0]+1,function(e){var a=i[0]+e;return a=a<10?"0"+a:""+a,t.formatter(n,a)})}})}},mounted:function(){this.updateColumnValue(this.innerValue)},methods:{correctValue:function(t){var e="time"!==this.type;if(e&&!h(t))t=this.minDate;else if(!t){var n=this.minHour;t=(n>10?n:"0"+n)+":00"}if(!e){var i=t.split(":"),a=i[0],s=i[1];return(a=m(Object(r.i)(a,this.minHour,this.maxHour)))+":"+(s=m(Object(r.i)(s,this.minMinute,this.maxMinute)))}return t=Math.max(t,this.minDate.getTime()),t=Math.min(t,this.maxDate.getTime()),new Date(t)},getBoundary:function(t,e){var n,i=this[t+"Date"],a=i.getFullYear(),s=1,o=1,u=0,r=0;return"max"===t&&(s=12,o=d(e.getFullYear(),e.getMonth()+1),u=23,r=59),e.getFullYear()===a&&(s=i.getMonth()+1,e.getMonth()+1===s&&(o=i.getDate(),e.getDate()===o&&(u=i.getHours(),e.getHours()===u&&(r=i.getMinutes())))),(n={})[t+"Year"]=a,n[t+"Month"]=s,n[t+"Date"]=o,n[t+"Hour"]=u,n[t+"Minute"]=r,n},onConfirm:function(){this.$emit("confirm",this.innerValue)},onChange:function(t){var e,n=this;if("time"===this.type){var i=t.getIndexes();e=i[0]+this.minHour+":"+(i[1]+this.minMinute)}else{var a=t.getValues(),s=f(a[0]),o=f(a[1]),u=d(s,o),r=f(a[2]);"year-month"===this.type&&(r=1),r=r>u?u:r;var l=0,c=0;"datetime"===this.type&&(l=f(a[3]),c=f(a[4])),e=new Date(s,o-1,r,l,c)}this.innerValue=this.correctValue(e),this.$nextTick(function(){n.$nextTick(function(){n.$emit("change",t)})})},updateColumnValue:function(t){var e=this,n=[],i=this.formatter;if("time"===this.type){var a=t.split(":");n=[i("hour",a[0]),i("minute",a[1])]}else n=[i("year",""+t.getFullYear()),i("month",m(t.getMonth()+1)),i("day",m(t.getDate()))],"datetime"===this.type&&n.push(i("hour",m(t.getHours())),i("minute",m(t.getMinutes()))),"year-month"===this.type&&(n=n.slice(0,2));this.$nextTick(function(){e.$refs.picker.setValues(n)})}},render:function(t){var e=this,n={};return Object.keys(c.a).forEach(function(t){n[t]=e[t]}),t(l.a,{class:g(),ref:"picker",attrs:{columns:this.columns},on:{change:this.onChange,confirm:this.onConfirm,cancel:function(){e.$emit("cancel")}},props:Object(u.a)({},n)})}}),b={data:function(){return{}},props:{value:{type:Boolean,default:!1},date:{type:[Number,String]},minDate:{type:[Number,String]},maxDate:{type:[Number,String]}},computed:{formatValue:{get:function(){var t=this.date?this.date:Math.round(new Date/1e3);return this.formatTimeStamp(t)},set:function(t){}},formatMinDate:function(){return this.formatTimeStamp(this.minDate)},formatMaxDate:function(){return this.formatTimeStamp(this.maxDate)}},methods:{formatTimeStamp:function(t){if(t){var e=10===(t+"").length?new Date(1e3*parseInt(t)):new Date(parseInt(t));return new Date(e)}},onConfirmDate:function(t){this.$emit("confirm",Math.round(t/1e3)),this.onCancel()},onCancel:function(){this.$emit("input",!1)}},components:o()({},y.name,y)},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-popup",{attrs:{position:"bottom","close-on-click-overlay":!1},on:{"click-overlay":t.onCancel},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("van-datetime-picker",{attrs:{title:"选择日期",type:"date","min-date":t.formatMinDate,"max-date":t.formatMaxDate},on:{confirm:t.onConfirmDate,cancel:t.onCancel},model:{value:t.formatValue,callback:function(e){t.formatValue=e},expression:"formatValue"}})],1)},staticRenderFns:[]};var D={name:"statistic",data:function(){return{store_name:null,shop_name:null,date:Object(a.c)((new Date).getTime()),detail:{},dateShow:!1}},filters:{bi:function(t){return t+"笔"}},created:function(){this.loadData()},methods:{onDate:function(t){this.date=Object(a.c)(t),this.loadData()},loadData:function(){var t=this;t.$store.dispatch("getAccountInfo").then(function(e){var n;t.store_name=e.store_info.store_name,t.shop_name=e.shop_name,(n=t.date,Object(i.a)({url:"/addons/execute/addons/store/controller/wapstore/action/saleStatistics",method:"post",data:{date:n}})).then(function(e){var n=e.data;t.detail=n,t.$refs.load.success()}).catch(function(){t.$refs.load.fail()})}).catch(function(){t.$refs.load.fail()})}},components:{PopupDate:n("VU/8")(b,C,!1,function(t){n("+3Ep")},"data-v-78df9a15",null).exports}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{ref:"load",staticClass:"statistic bg-f8"},[n("Navbar"),t._v(" "),n("van-cell",{staticClass:"card-group-box",attrs:{border:!1}},[n("div",{staticClass:"text-center"},[n("div",[t._v(t._s(t.shop_name)+t._s("（"+t.store_name+"）"))]),t._v(" "),n("div",[n("span",{staticClass:"e-handle",on:{click:function(e){t.dateShow=!0}}},[t._v(t._s(t.date))])])])]),t._v(" "),n("van-cell-group",{staticClass:"card-group-box"},[n("van-cell",{attrs:{title:"总销售额","value-class":"text-maintone",value:t._f("yuan")(t.detail.sale_money)}}),t._v(" "),n("van-cell",{attrs:{title:"交易笔数","value-class":"text-maintone",value:t._f("bi")(t.detail.sale_count)}})],1),t._v(" "),n("van-cell-group",{staticClass:"card-group-box"},[n("van-cell",{attrs:{title:"支付宝","value-class":"text-maintone",value:t._f("yuan")(t.detail.sale_money_alipay)}}),t._v(" "),n("van-cell",{attrs:{title:"微信","value-class":"text-maintone",value:t._f("yuan")(t.detail.sale_money_wechat)}}),t._v(" "),n("van-cell",{attrs:{title:"余额","value-class":"text-maintone",value:t._f("yuan")(t.detail.sale_money_balance)}})],1),t._v(" "),n("van-cell-group",{staticClass:"card-group-box"},[n("van-cell",{attrs:{title:"核销订单","value-class":"text-maintone",value:t._f("bi")(t.detail.finished_count)}}),t._v(" "),n("van-cell",{attrs:{title:"待核销订单","value-class":"text-maintone",value:t._f("bi")(t.detail.unfinished_count)}})],1),t._v(" "),n("PopupDate",{on:{confirm:t.onDate},model:{value:t.dateShow,callback:function(e){t.dateShow=e},expression:"dateShow"}})],1)},staticRenderFns:[]};var _=n("VU/8")(D,I,!1,function(t){n("diUq")},"data-v-1c3db69e",null);e.default=_.exports},diUq:function(t,e){},"qWG/":function(t,e,n){"use strict";var i=n("WPoX"),a=n("o69Z"),s=n("sM86"),o=n("54/E");function u(t){return Array.isArray(t)?t.map(function(t){return u(t)}):"object"==typeof t?Object(o.a)({},t):t}var r=n("3UG7"),l=n("pIDD"),c=Object(a.j)("picker-column"),h=c[0],m=c[1],f=h({props:{valueKey:String,className:String,itemHeight:Number,defaultIndex:Number,initialOptions:Array,visibleItemCount:Number},data:function(){return{startY:0,offset:0,duration:0,startOffset:0,options:u(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length}},methods:{onTouchStart:function(t){this.startY=t.touches[0].clientY,this.startOffset=this.offset,this.duration=0},onTouchMove:function(t){Object(s.c)(t);var e=t.touches[0].clientY-this.startY;this.offset=Object(a.i)(this.startOffset+e,-this.count*this.itemHeight,this.itemHeight)},onTouchEnd:function(){if(this.offset!==this.startOffset){this.duration=200;var t=Object(a.i)(Math.round(-this.offset/this.itemHeight),0,this.count-1);this.setIndex(t,!0)}},adjustIndex:function(t){for(var e=t=Object(a.i)(t,0,this.count);e<this.count;e++)if(!this.isDisabled(this.options[e]))return e;for(var n=t-1;n>=0;n--)if(!this.isDisabled(this.options[n]))return n},isDisabled:function(t){return Object(a.f)(t)&&t.disabled},getOptionText:function(t){return Object(a.f)(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight,t!==this.currentIndex&&(this.currentIndex=t,e&&this.$emit("change",t))},setValue:function(t){for(var e=this.options,n=0;n<e.length;n++)if(this.getOptionText(e[n])===t)return this.setIndex(n)},getValue:function(){return this.options[this.currentIndex]}},render:function(t){var e=this,n=this.itemHeight,i=this.visibleItemCount,a={height:n*i+"px"},s=n*(i-1)/2,o={transition:this.duration+"ms",transform:"translate3d(0, "+(this.offset+s)+"px, 0)",lineHeight:n+"px"},u={height:n+"px"};return t("div",{style:a,class:[m(),this.className],on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("ul",{style:o},[this.options.map(function(n,i){return t("li",{style:u,class:["van-ellipsis",m("item",{disabled:e.isDisabled(n),selected:i===e.currentIndex})],domProps:{innerHTML:e.getOptionText(n)},on:{click:function(){e.setIndex(i,!0)}}})})])])}}),d=Object(a.j)("picker"),p=d[0],v=d[1],g=d[2];e.a=p({props:Object(i.a)({},r.a,{columns:Array,defaultIndex:{type:Number,default:0},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:function(){this.setColumns()}},methods:{setColumns:function(){var t=this;(this.simple?[{values:this.columns}]:this.columns).forEach(function(e,n){t.setColumnValues(n,u(e.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var n=this.getColumn(t);n&&n.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var n=this.getColumn(t);n&&n.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var n=this.children[t];n&&JSON.stringify(n.options)!==JSON.stringify(e)&&(n.options=e,n.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,n){e.setColumnValue(n,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,n){e.setColumnIndex(n,t)})},onConfirm:function(){this.emit("confirm")},onCancel:function(){this.emit("cancel")}},render:function(t){var e=this,n=this.itemHeight,i=this.simple?[this.columns]:this.columns,a={height:n+"px"},o={height:n*this.visibleItemCount+"px"},u=this.showToolbar&&t("div",{class:["van-hairline--top-bottom",v("toolbar")]},[this.slots()||[t("div",{class:v("cancel"),on:{click:this.onCancel}},[this.cancelButtonText||g("cancel")]),this.slots("title")||this.title&&t("div",{class:["van-ellipsis",v("title")]},[this.title]),t("div",{class:v("confirm"),on:{click:this.onConfirm}},[this.confirmButtonText||g("confirm")])]]);return t("div",{class:v()},[u,this.loading?t("div",{class:v("loading")},[t(l.a)]):t(),t("div",{class:v("columns"),style:o,on:{touchmove:s.c}},[i.map(function(n,i){return t(f,{attrs:{valueKey:e.valueKey,className:n.className,itemHeight:e.itemHeight,defaultIndex:n.defaultIndex||e.defaultIndex,visibleItemCount:e.visibleItemCount,initialOptions:e.simple?n:n.values},on:{change:function(){e.onChange(i)}}})}),t("div",{class:["van-hairline--top-bottom",v("frame")],style:a})])])}})}});