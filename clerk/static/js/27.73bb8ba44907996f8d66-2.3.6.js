webpackJsonp([27],{"1vYx":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Lo3X"),o=e("iVvP"),n=e("xBL0"),i={name:"verify-cardvoucher",data:function(){return{detail:""}},computed:{isDisabled:function(){return 0==parseInt(this.detail.surplus_num)}},created:function(){this.loadData()},methods:{loadData:function(){var t=this,a=t.$route.params.code;Object(n.a)(a).then(function(a){1==a.code?(t.detail=a.data,t.$refs.load.success()):(t.$refs.load.result(),t.$Dialog.alert({showCancelButton:!0,message:a.data.prompt}).then(function(){t.$store.dispatch("selectStore",a.data.store_id).then(function(){t.loadData()})}).catch(function(){t.$router.back()}))}).catch(function(){t.$refs.load.fail()})},onVerify:function(){var t=this;t.$Dialog.confirm({message:"确定核销吗？"}).then(function(){Object(n.e)(t.$route.params.code).then(function(a){t.$Toast.success("核销成功"),setTimeout(function(){t.loadData()},500)})})}},components:{GoodsCard:s.a,Empty:o.a}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Layout",{ref:"load",staticClass:"verify-cardvoucher bg-f8"},[e("Navbar"),t._v(" "),t.detail?e("van-cell-group",{staticClass:"card-group-box"},[e("van-cell",[e("GoodsCard",{attrs:{title:t.detail.goods_name,desc:t.detail.card_title,thumb:t.detail.goods_picture}},[1==t.detail.state?e("div",{attrs:{slot:"bottom"},slot:"bottom"},[1==t.detail.type?e("div",[e("span",{staticClass:"text-maintone"},[t._v(t._s(t.detail.invalid_time))]),t._v("到期\n          ")]):e("div",[t._v("\n            剩余\n            "),e("span",{staticClass:"text-maintone"},[t._v(t._s(t.detail.surplus_num))]),t._v("次\n          ")])]):e("div",{attrs:{slot:"bottom"},slot:"bottom"},[e("span",{staticClass:"text-maintone"},[t._v(t._s(2==t.detail.state?"已使用":"已过期"))])])])],1),t._v(" "),1==t.detail.state?e("van-cell",[e("van-row",{staticClass:"btn-group",attrs:{type:"flex",justify:"end"}},[e("van-button",{staticClass:"btn",attrs:{size:"small",disabled:t.isDisabled},on:{click:t.onVerify}},[t._v("核销")])],1)],1):t._e()],1):e("Empty",{attrs:{"page-type":"order",message:"没有相关卡券","show-foot":!1}})],1)},staticRenderFns:[]},r=e("VU/8")(i,l,!1,null,null,null);a.default=r.exports}});